var yo=Object.defineProperty;var An=n=>{throw TypeError(n)};var wo=(n,o,c)=>o in n?yo(n,o,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[o]=c;var In=(n,o,c)=>wo(n,typeof o!="symbol"?o+"":o,c),fl=(n,o,c)=>o.has(n)||An("Cannot "+c);var os=(n,o,c)=>(fl(n,o,"read from private field"),c?c.call(n):o.get(n)),hr=(n,o,c)=>o.has(n)?An("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(n):o.set(n,c),hl=(n,o,c,_)=>(fl(n,o,"write to private field"),_?_.call(n,c):o.set(n,c),c),Mn=(n,o,c)=>(fl(n,o,"access private method"),c);import{c as Ra,a as i,f as u,d as It,t as ot}from"../chunks/DBc14fdn.js";import{I as ml,h as Ft,a0 as ko,a as bl,D as xo,b as Co,t as e,Q as To,F as So,H as Eo,G as Ln,J as yl,f as Hr,a9 as Fo,ay as Do,ag as Bn,c as vs,e as Sl,s as Ao,aF as qn,aw as Al,aG as Hn,a7 as Pn,aB as Io,aH as Mo,aI as Lo,aJ as Bo,aK as cs,r as Gn,p as Yn,aL as wl,M as jn,as as Po,aM as $o,av as No,d as Ro,aN as Il,K as Jn,an as Uo,aO as zo,aP as Oo,aQ as Kn,aR as Wo,aS as Vo,aT as qo,aU as Ho,aV as Go,aD as Yo,k as Ml,L as Xn,x as Ns,i as ue,z as Rs,aW as jo,A as s,B as a,C as r,y as b,u as mr,aC as y,T as l,ah as rt,aE as Ae,R as Ut,aX as Jo,aY as $n}from"../chunks/CpRHF_J6.js";import{d as kr,e as Zn,s as h}from"../chunks/CwfX5RAp.js";import{i as k,p as ja,b as Ko}from"../chunks/DFbZmBis.js";import{s as Xo}from"../chunks/jUeHQVEq.js";import"../chunks/B0ZUWw0k.js";function Se(n,o){return o}function Zo(n,o,c){for(var _=[],p=o.length,g,f=o.length,w=0;w<p;w++){let X=o[w];Yn(X,()=>{if(g){if(g.pending.delete(X),g.done.add(X),g.pending.size===0){var F=n.outrogroups;El(Al(g.done)),F.delete(g),F.size===0&&(n.outrogroups=null)}}else f-=1},!1)}if(f===0){var m=_.length===0&&c!==null;if(m){var M=c,N=M.parentNode;No(N),N.append(M),n.items.clear()}El(o,!m)}else g={pending:new Set(o),done:new Set},(n.outrogroups??(n.outrogroups=new Set)).add(g)}function El(n,o=!0){for(var c=0;c<n.length;c++)Ro(n[c],o)}var Nn;function Ee(n,o,c,_,p,g=null){var f=n,w=new Map,m=(o&qn)!==0;if(m){var M=n;f=Ft?ml(ko(M)):M.appendChild(bl())}Ft&&xo();var N=null,X=To(()=>{var x=c();return Hn(x)?x:x==null?[]:Al(x)}),F,L=!0;function R(){S.fallback=N,Qo(S,F,f,o,_),N!==null&&(F.length===0?(N.f&cs)===0?Gn(N):(N.f^=cs,br(N,null,f)):Yn(N,()=>{N=null}))}var J=Co(()=>{F=e(X);var x=F.length;let ee=!1;if(Ft){var Fe=So(f)===Eo;Fe!==(x===0)&&(f=Ln(),ml(f),yl(!1),ee=!0)}for(var _e=new Set,ge=vs,ne=Ao(),te=0;te<x;te+=1){Ft&&Hr.nodeType===Fo&&Hr.data===Do&&(f=Hr,ee=!0,yl(!1));var fe=F[te],ke=_(fe,te),B=L?null:w.get(ke);B?(B.v&&Bn(B.v,fe),B.i&&Bn(B.i,te),ne&&ge.skipped_effects.delete(B.e)):(B=ev(w,L?f:Nn??(Nn=bl()),fe,ke,te,p,o,c),L||(B.e.f|=cs),w.set(ke,B)),_e.add(ke)}if(x===0&&g&&!N&&(L?N=Sl(()=>g(f)):(N=Sl(()=>g(Nn??(Nn=bl()))),N.f|=cs)),Ft&&x>0&&ml(Ln()),!L)if(ne){for(const[q,K]of w)_e.has(q)||ge.skipped_effects.add(K.e);ge.oncommit(R),ge.ondiscard(()=>{})}else R();ee&&yl(!0),e(X)}),S={effect:J,items:w,outrogroups:null,fallback:N};L=!1,Ft&&(f=Hr)}function Qo(n,o,c,_,p){var B,q,K,xe,Ie,aa,Xe,xa,ft;var g=(_&$o)!==0,f=o.length,w=n.items,m=n.effect.first,M,N=null,X,F=[],L=[],R,J,S,x;if(g)for(x=0;x<f;x+=1)R=o[x],J=p(R,x),S=w.get(J).e,(S.f&cs)===0&&((q=(B=S.nodes)==null?void 0:B.a)==null||q.measure(),(X??(X=new Set)).add(S));for(x=0;x<f;x+=1){if(R=o[x],J=p(R,x),S=w.get(J).e,n.outrogroups!==null)for(const Qa of n.outrogroups)Qa.pending.delete(S),Qa.done.delete(S);if((S.f&cs)!==0)if(S.f^=cs,S===m)br(S,null,c);else{var ee=N?N.next:m;S===n.effect.last&&(n.effect.last=S.prev),S.prev&&(S.prev.next=S.next),S.next&&(S.next.prev=S.prev),bs(n,N,S),bs(n,S,ee),br(S,ee,c),N=S,F=[],L=[],m=N.next;continue}if((S.f&wl)!==0&&(Gn(S),g&&((xe=(K=S.nodes)==null?void 0:K.a)==null||xe.unfix(),(X??(X=new Set)).delete(S))),S!==m){if(M!==void 0&&M.has(S)){if(F.length<L.length){var Fe=L[0],_e;N=Fe.prev;var ge=F[0],ne=F[F.length-1];for(_e=0;_e<F.length;_e+=1)br(F[_e],Fe,c);for(_e=0;_e<L.length;_e+=1)M.delete(L[_e]);bs(n,ge.prev,ne.next),bs(n,N,ge),bs(n,ne,Fe),m=Fe,N=ne,x-=1,F=[],L=[]}else M.delete(S),br(S,m,c),bs(n,S.prev,S.next),bs(n,S,N===null?n.effect.first:N.next),bs(n,N,S),N=S;continue}for(F=[],L=[];m!==null&&m!==S;)(M??(M=new Set)).add(m),L.push(m),m=m.next;if(m===null)continue}(S.f&cs)===0&&F.push(S),N=S,m=S.next}if(n.outrogroups!==null){for(const Qa of n.outrogroups)Qa.pending.size===0&&(El(Al(Qa.done)),(Ie=n.outrogroups)==null||Ie.delete(Qa));n.outrogroups.size===0&&(n.outrogroups=null)}if(m!==null||M!==void 0){var te=[];if(M!==void 0)for(S of M)(S.f&wl)===0&&te.push(S);for(;m!==null;)(m.f&wl)===0&&m!==n.fallback&&te.push(m),m=m.next;var fe=te.length;if(fe>0){var ke=(_&qn)!==0&&f===0?c:null;if(g){for(x=0;x<fe;x+=1)(Xe=(aa=te[x].nodes)==null?void 0:aa.a)==null||Xe.measure();for(x=0;x<fe;x+=1)(ft=(xa=te[x].nodes)==null?void 0:xa.a)==null||ft.fix()}Zo(n,te,ke)}}g&&jn(()=>{var Qa,ht;if(X!==void 0)for(S of X)(ht=(Qa=S.nodes)==null?void 0:Qa.a)==null||ht.apply()})}function ev(n,o,c,_,p,g,f,w){var m=(f&Lo)!==0?(f&Bo)===0?Io(c,!1,!1):Pn(c):null,M=(f&Mo)!==0?Pn(p):null;return{v:m,i:M,e:Sl(()=>(g(o,m??c,M??p,w),()=>{n.delete(_)}))}}function br(n,o,c){if(n.nodes)for(var _=n.nodes.start,p=n.nodes.end,g=o&&(o.f&cs)===0?o.nodes.start:c;_!==null;){var f=Po(_);if(g.before(_),_===p)return;_=f}}function bs(n,o,c){o===null?n.effect.first=c:o.next=c,c===null?n.effect.last=o:c.prev=o}const Rn=[...` 	
\r\f \v\uFEFF`];function av(n,o,c){var _=n==null?"":""+n;if(o&&(_=_?_+" "+o:o),c){for(var p in c)if(c[p])_=_?_+" "+p:p;else if(_.length)for(var g=p.length,f=0;(f=_.indexOf(p,f))>=0;){var w=f+g;(f===0||Rn.includes(_[f-1]))&&(w===_.length||Rn.includes(_[w]))?_=(f===0?"":_.substring(0,f))+_.substring(w+1):f=w}}return _===""?null:_}function tv(n,o){return n==null?null:String(n)}function ae(n,o,c,_,p,g){var f=n.__className;if(Ft||f!==c||f===void 0){var w=av(c,_,g);(!Ft||w!==n.getAttribute("class"))&&(w==null?n.removeAttribute("class"):o?n.className=w:n.setAttribute("class",w)),n.__className=c}else if(g&&p!==g)for(var m in g){var M=!!g[m];(p==null||M!==!!p[m])&&n.classList.toggle(m,M)}return g}function $s(n,o,c,_){var p=n.__style;if(Ft||p!==o){var g=tv(o);(!Ft||g!==n.getAttribute("style"))&&(g==null?n.removeAttribute("style"):n.style.cssText=g),n.__style=o}return _}function Yr(n,o,c=!1){if(n.multiple){if(o==null)return;if(!Hn(o))return zo();for(var _ of n.options)_.selected=o.includes(yr(_));return}for(_ of n.options){var p=yr(_);if(Oo(p,o)){_.selected=!0;return}}(!c||o!==void 0)&&(n.selectedIndex=-1)}function Fl(n){var o=new MutationObserver(()=>{Yr(n,n.__value)});o.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Uo(()=>{o.disconnect()})}function Tt(n,o,c=o){var _=new WeakSet,p=!0;Il(n,"change",g=>{var f=g?"[selected]":":checked",w;if(n.multiple)w=[].map.call(n.querySelectorAll(f),yr);else{var m=n.querySelector(f)??n.querySelector("option:not([disabled])");w=m&&yr(m)}c(w),vs!==null&&_.add(vs)}),Jn(()=>{var g=o();if(n===document.activeElement){var f=Kn??vs;if(_.has(f))return}if(Yr(n,g,p),p&&g===void 0){var w=n.querySelector(":checked");w!==null&&(g=yr(w),c(g))}n.__value=g,p=!1}),Fl(n)}function yr(n){return"__value"in n?n.__value:n.value}const sv=Symbol("is custom element"),rv=Symbol("is html");function Ke(n){if(Ft){var o=!1,c=()=>{if(!o){if(o=!0,n.hasAttribute("value")){var _=n.value;ye(n,"value",null),n.value=_}if(n.hasAttribute("checked")){var p=n.checked;ye(n,"checked",null),n.checked=p}}};n.__on_r=c,jn(c),Wo()}}function lv(n,o){var c=Qn(n);c.value===(c.value=o??void 0)||n.value===o&&(o!==0||n.nodeName!=="PROGRESS")||(n.value=o??"")}function ye(n,o,c,_){var p=Qn(n);Ft&&(p[o]=n.getAttribute(o),o==="src"||o==="srcset"||o==="href"&&n.nodeName==="LINK")||p[o]!==(p[o]=c)&&(o==="loading"&&(n[Ho]=c),c==null?n.removeAttribute(o):typeof c!="string"&&nv(n).includes(o)?n[o]=c:n.setAttribute(o,c))}function Qn(n){return n.__attributes??(n.__attributes={[sv]:n.nodeName.includes("-"),[rv]:n.namespaceURI===Vo})}var Un=new Map;function nv(n){var o=n.getAttribute("is")||n.nodeName,c=Un.get(o);if(c)return c;Un.set(o,c=[]);for(var _,p=n,g=Element.prototype;g!==p;){_=Go(p);for(var f in _)_[f].set&&c.push(f);p=qo(p)}return c}function ea(n,o,c=o){var _=new WeakSet;Il(n,"input",async p=>{var g=p?n.defaultValue:n.value;if(g=kl(n)?xl(g):g,c(g),vs!==null&&_.add(vs),await Yo(),g!==(g=o())){var f=n.selectionStart,w=n.selectionEnd,m=n.value.length;if(n.value=g??"",w!==null){var M=n.value.length;f===w&&w===m&&M>m?(n.selectionStart=M,n.selectionEnd=M):(n.selectionStart=f,n.selectionEnd=Math.min(w,M))}}}),(Ft&&n.defaultValue!==n.value||Ml(o)==null&&n.value)&&(c(kl(n)?xl(n.value):n.value),vs!==null&&_.add(vs)),Xn(()=>{var p=o();if(n===document.activeElement){var g=Kn??vs;if(_.has(g))return}kl(n)&&p===xl(n.value)||n.type==="date"&&!p&&!n.value||p!==n.value&&(n.value=p??"")})}function iv(n,o,c=o){Il(n,"change",_=>{var p=_?n.defaultChecked:n.checked;c(p)}),(Ft&&n.defaultChecked!==n.checked||Ml(o)==null)&&c(n.checked),Xn(()=>{var _=o();n.checked=!!_})}function kl(n){var o=n.type;return o==="number"||o==="range"}function xl(n){return n===""?null:+n}var ys,Js,wr,jr,ei;const Jr=class Jr{constructor(o){hr(this,jr);hr(this,ys,new WeakMap);hr(this,Js);hr(this,wr);hl(this,wr,o)}observe(o,c){var _=os(this,ys).get(o)||new Set;return _.add(c),os(this,ys).set(o,_),Mn(this,jr,ei).call(this).observe(o,os(this,wr)),()=>{var p=os(this,ys).get(o);p.delete(c),p.size===0&&(os(this,ys).delete(o),os(this,Js).unobserve(o))}}};ys=new WeakMap,Js=new WeakMap,wr=new WeakMap,jr=new WeakSet,ei=function(){return os(this,Js)??hl(this,Js,new ResizeObserver(o=>{for(var c of o){Jr.entries.set(c.target,c);for(var _ of os(this,ys).get(c.target)||[])_(c)}}))},In(Jr,"entries",new WeakMap);let Dl=Jr;var ov=new Dl({box:"border-box"});function vv(n,o,c){var _=ov.observe(n,()=>c(n[o]));Jn(()=>(Ml(()=>c(n[o])),_))}async function le(n,o={},c){return window.__TAURI_INTERNALS__.invoke(n,o,c)}var cv=u('<div class="modal-overlay svelte-ta60gp" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="modal svelte-ta60gp"><div class="modal-header svelte-ta60gp"><h2 id="modal-title" class="svelte-ta60gp"> </h2> <button class="close-btn svelte-ta60gp" aria-label="Close modal">×</button></div> <div class="modal-content svelte-ta60gp"><!></div></div></div>');function At(n,o){Ns(o,!0);function c(w){w.key==="Escape"&&o.onclose()}function _(w){w.target===w.currentTarget&&o.onclose()}var p=Ra();Zn("keydown",jo,c);var g=ue(p);{var f=w=>{var m=cv();m.__click=_;var M=s(m);M.__click=S=>S.stopPropagation();var N=s(M),X=s(N),F=s(X,!0);a(X);var L=r(X,2);L.__click=function(...S){var x;(x=o.onclose)==null||x.apply(this,S)},a(N);var R=r(N,2),J=s(R);Xo(J,()=>o.children),a(R),a(M),a(m),b(()=>h(F,o.title)),i(w,m)};k(g,w=>{o.open&&w(f)})}i(n,p),Rs()}kr(["click"]);var uv=u('<span class="item-dot personal svelte-1fd3ybn"></span>'),dv=u('<span class="item-dot family svelte-1fd3ybn"></span>'),_v=u('<span class="item-dot business svelte-1fd3ybn"></span>'),pv=u('<span class="item-dot all svelte-1fd3ybn"></span>'),gv=u("<button><!> </button>"),fv=u('<div class="dropdown-menu svelte-1fd3ybn"></div>'),hv=u('<div class="dropdown svelte-1fd3ybn"><button class="dropdown-trigger svelte-1fd3ybn"><span class="dropdown-value svelte-1fd3ybn"> </span> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg></button> <!></div>');function zn(n,o){Ns(o,!0);let c=ja(o,"value",15),_=ja(o,"placeholder",3,"Select..."),p=y(!1),g;function f(){const x=o.options.find(ee=>ee.value===c());return(x==null?void 0:x.label)||_()}function w(x){c(x.value),l(p,!1)}function m(x){g&&!g.contains(x.target)&&l(p,!1)}mr(()=>(e(p)?document.addEventListener("click",m):document.removeEventListener("click",m),()=>document.removeEventListener("click",m)));var M=hv(),N=s(M);N.__click=()=>l(p,!e(p));var X=s(N),F=s(X,!0);a(X);var L=r(X,2);let R;a(N);var J=r(N,2);{var S=x=>{var ee=fv();Ee(ee,21,()=>o.options,Se,(Fe,_e)=>{var ge=gv();let ne;ge.__click=()=>w(e(_e));var te=s(ge);{var fe=q=>{var K=uv();i(q,K)},ke=q=>{var K=Ra(),xe=ue(K);{var Ie=Xe=>{var xa=dv();i(Xe,xa)},aa=Xe=>{var xa=Ra(),ft=ue(xa);{var Qa=mt=>{var zt=_v();i(mt,zt)},ht=mt=>{var zt=pv();i(mt,zt)};k(ft,mt=>{e(_e).type==="business"?mt(Qa):mt(ht,!1)},!0)}i(Xe,xa)};k(xe,Xe=>{e(_e).type==="family"?Xe(Ie):Xe(aa,!1)},!0)}i(q,K)};k(te,q=>{e(_e).type==="personal"?q(fe):q(ke,!1)})}var B=r(te);a(ge),b(()=>{ne=ae(ge,1,"dropdown-item svelte-1fd3ybn",null,ne,{selected:e(_e).value===c()}),h(B,` ${e(_e).label??""}`)}),i(Fe,ge)}),a(ee),i(x,ee)};k(J,x=>{e(p)&&x(S)})}a(M),Ko(M,x=>g=x,()=>g),b(x=>{h(F,x),R=ae(L,0,"dropdown-arrow svelte-1fd3ybn",null,R,{open:e(p)})},[f]),i(n,M),Rs()}kr(["click"]);var mv=It('<svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>');function ai(n,o){let c=ja(o,"size",3,20),_=ja(o,"color",3,"currentColor");var p=mv();b(()=>{ye(p,"width",c()),ye(p,"height",c()),ye(p,"stroke",_())}),i(n,p)}var bv=u('<div class="overlay svelte-a254c7"><div class="modal svelte-a254c7"><div class="modal-header svelte-a254c7"><h2 class="svelte-a254c7">Delete Wallet</h2> <button class="close-btn svelte-a254c7"><!></button></div> <div class="modal-body svelte-a254c7"><p class="warning svelte-a254c7">This action cannot be undone. All transaction data for this wallet will be permanently deleted.</p> <div class="confirm-input svelte-a254c7"><label class="svelte-a254c7">Type <span class="confirm-text svelte-a254c7"> </span> to confirm:</label> <input type="text" class="svelte-a254c7"/></div> <div class="form-actions svelte-a254c7"><button class="btn secondary svelte-a254c7">Cancel</button> <button class="btn danger svelte-a254c7">Delete Wallet</button></div></div></div></div>');function yv(n,o){Ns(o,!0);let c=ja(o,"open",3,!1),_=y("");const p=Ae(()=>`delete ${o.name}`),g=Ae(()=>e(_).toLowerCase()===e(p).toLowerCase());function f(){e(g)&&(l(_,""),o.onconfirm())}function w(){l(_,""),o.onclose()}var m=Ra(),M=ue(m);{var N=X=>{var F=bv();F.__click=w;var L=s(F);L.__click=B=>B.stopPropagation();var R=s(L),J=r(s(R),2);J.__click=w;var S=s(J);ai(S,{size:20}),a(J),a(R);var x=r(R,2),ee=r(s(x),2),Fe=s(ee),_e=r(s(Fe)),ge=s(_e);a(_e),rt(),a(Fe);var ne=r(Fe,2);Ke(ne),ne.__keydown=B=>B.key==="Enter"&&f(),a(ee);var te=r(ee,2),fe=s(te);fe.__click=w;var ke=r(fe,2);ke.__click=f,a(te),a(x),a(L),a(F),b(()=>{h(ge,`delete ${o.name??""}`),ye(ne,"placeholder",`delete ${o.name??""}`),ke.disabled=!e(g)}),ea(ne,()=>e(_),B=>l(_,B)),i(X,F)};k(M,X=>{c()&&X(N)})}i(n,m),Rs()}kr(["click","keydown"]);var wv=It('<svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="6" width="20" height="14" rx="2"></rect><path d="M2 10h20"></path><circle cx="16" cy="14" r="1.5" stroke="none"></circle></svg>');function Cl(n,o){let c=ja(o,"size",3,20),_=ja(o,"color",3,"currentColor");var p=wv(),g=r(s(p),2);a(p),b(()=>{ye(p,"width",c()),ye(p,"height",c()),ye(p,"stroke",_()),ye(g,"fill",_())}),i(n,p)}var kv=It('<svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-3-6.7"></path><path d="M21 4v5h-5"></path></svg>');function Tl(n,o){let c=ja(o,"size",3,20),_=ja(o,"color",3,"currentColor");var p=kv();b(()=>{ye(p,"width",c()),ye(p,"height",c()),ye(p,"stroke",_())}),i(n,p)}var xv=It('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><rect width="512" height="512" rx="80" fill="#ffffff"></rect><g transform="translate(128, 80) scale(10.67)" fill="none" stroke="#f7931a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5v14"></path><path d="M12 5v14"></path><path d="M9 5h4.5a3 3 0 0 1 0 6H9"></path><path d="M9 11h5a3.5 3.5 0 0 1 0 7H9"></path><path d="M9 8h6"></path><path d="M9 16h6"></path></g></svg>');function On(n){var o=xv();i(n,o)}var Cv=It('<svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');function Ps(n,o){let c=ja(o,"size",3,20),_=ja(o,"color",3,"currentColor");var p=Cv();b(()=>{ye(p,"width",c()),ye(p,"height",c()),ye(p,"stroke",_())}),i(n,p)}var Tv=It('<svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>');function Wn(n,o){let c=ja(o,"size",3,24),_=ja(o,"color",3,"currentColor");var p=Tv();b(()=>{ye(p,"width",c()),ye(p,"height",c()),ye(p,"stroke",_())}),i(n,p)}var Sv=u('<div class="overlay svelte-7e0w24"><div class="modal svelte-7e0w24"><div class="modal-header svelte-7e0w24"><h2> </h2> <button class="close-btn svelte-7e0w24"><!></button></div> <div class="modal-body svelte-7e0w24"><p class="svelte-7e0w24"> </p> <div class="form-actions svelte-7e0w24"><button class="btn secondary svelte-7e0w24">Cancel</button> <button> </button></div></div></div></div>');function Gr(n,o){let c=ja(o,"open",3,!1),_=ja(o,"title",3,"Confirm"),p=ja(o,"message",3,"Are you sure?"),g=ja(o,"confirmText",3,"Confirm"),f=ja(o,"danger",3,!1);var w=Ra(),m=ue(w);{var M=N=>{var X=Sv();X.__click=function(...q){var K;(K=o.onclose)==null||K.apply(this,q)};var F=s(X);F.__click=q=>q.stopPropagation();var L=s(F),R=s(L);let J;var S=s(R,!0);a(R);var x=r(R,2);x.__click=function(...q){var K;(K=o.onclose)==null||K.apply(this,q)};var ee=s(x);ai(ee,{size:20}),a(x),a(L);var Fe=r(L,2),_e=s(Fe),ge=s(_e,!0);a(_e);var ne=r(_e,2),te=s(ne);te.__click=function(...q){var K;(K=o.onclose)==null||K.apply(this,q)};var fe=r(te,2);let ke;fe.__click=function(...q){var K;(K=o.onconfirm)==null||K.apply(this,q)};var B=s(fe,!0);a(fe),a(ne),a(Fe),a(F),a(X),b(()=>{J=ae(R,1,"svelte-7e0w24",null,J,{danger:f()}),h(S,_()),h(ge,p()),ke=ae(fe,1,"btn svelte-7e0w24",null,ke,{danger:f()}),h(B,g())}),i(N,X)};k(m,N=>{c()&&N(M)})}i(n,w)}kr(["click"]);var Ev=u('<div class="empty svelte-9fnibp">No data</div>'),Fv=u('<div class="bar-container svelte-9fnibp"><div class="bar-wrapper svelte-9fnibp"><div class="bar svelte-9fnibp"></div></div> <span class="bar-label svelte-9fnibp"> </span></div>'),Dv=u('<div class="bars svelte-9fnibp"></div>'),Av=u('<div class="chart svelte-9fnibp"><!></div>');function Iv(n,o){Ns(o,!0);let c=ja(o,"height",3,200);const _=Ae(()=>Math.max(...o.data.map(M=>M.value),1)),p=Ae(()=>o.data.length>0?Math.min(40,100/o.data.length-2):40);var g=Av(),f=s(g);{var w=M=>{var N=Ev();i(M,N)},m=M=>{var N=Dv();Ee(N,21,()=>o.data,Se,(X,F)=>{var L=Fv(),R=s(L),J=s(R);a(R);var S=r(R,2),x=s(S,!0);a(S),a(L),b(()=>{$s(L,`width: ${e(p)??""}%`),$s(J,`height: ${e(F).value/e(_)*100}%; background: ${(e(F).color||"#f7931a")??""}`),h(x,e(F).label)}),i(X,L)}),a(N),i(M,N)};k(f,M=>{o.data.length===0?M(w):M(m,!1)})}a(g),b(()=>$s(g,`height: ${c()??""}px`)),i(n,g),Rs()}var Mv=u('<div class="empty svelte-6s3h9y">No data</div>'),Lv=It("<path></path>"),Bv=It('<svg class="svelte-6s3h9y"><!><circle fill="#111"></circle></svg>'),Pv=u('<div class="legend-item svelte-6s3h9y"><span class="legend-dot svelte-6s3h9y"></span> <span class="legend-label svelte-6s3h9y"> </span> <span class="legend-value svelte-6s3h9y"> </span></div>'),$v=u('<div class="pie-chart svelte-6s3h9y"><!> <div class="legend svelte-6s3h9y"></div></div>');function Vn(n,o){Ns(o,!0);let c=ja(o,"size",3,180);const _=Ae(()=>o.data.reduce((F,L)=>F+L.value,0)),p=Ae(()=>{let F=0;return o.data.map(L=>{const R=e(_)>0?L.value/e(_)*360:0,J={...L,startAngle:F,endAngle:F+R,percentage:e(_)>0?L.value/e(_)*100:0};return F+=R,J})});function g(F,L,R){const J=f(R,L),S=f(R,F),x=L-F<=180?"0":"1";return["M",R,R,"L",J.x,J.y,"A",R,R,0,x,0,S.x,S.y,"Z"].join(" ")}function f(F,L){const R=(L-90)*Math.PI/180;return{x:F+F*Math.cos(R),y:F+F*Math.sin(R)}}var w=$v(),m=s(w);{var M=F=>{var L=Mv();b(()=>$s(L,`width: ${c()??""}px; height: ${c()??""}px`)),i(F,L)},N=F=>{var L=Bv(),R=s(L);Ee(R,17,()=>e(p),Se,(S,x)=>{var ee=Ra(),Fe=ue(ee);{var _e=ge=>{var ne=Lv();b(te=>{ye(ne,"d",te),ye(ne,"fill",e(x).color)},[()=>g(e(x).startAngle,e(x).endAngle,c()/2)]),i(ge,ne)};k(Fe,ge=>{e(x).percentage>0&&ge(_e)})}i(S,ee)});var J=r(R);a(L),b(()=>{ye(L,"width",c()),ye(L,"height",c()),ye(L,"viewBox",`0 0 ${c()??""} ${c()??""}`),ye(J,"cx",c()/2),ye(J,"cy",c()/2),ye(J,"r",c()/4)}),i(F,L)};k(m,F=>{o.data.length===0||e(_)===0?F(M):F(N,!1)})}var X=r(m,2);Ee(X,21,()=>e(p).filter(F=>F.percentage>0),Se,(F,L)=>{var R=Pv(),J=s(R),S=r(J,2),x=s(S,!0);a(S);var ee=r(S,2),Fe=s(ee);a(ee),a(R),b(_e=>{$s(J,`background: ${e(L).color??""}`),h(x,e(L).label),h(Fe,`${_e??""}%`)},[()=>e(L).percentage.toFixed(0)]),i(F,R)}),a(X),a(w),i(n,w),Rs()}var Nv=It('<line stroke="#1a1a1a" stroke-dasharray="2,2"></line><text text-anchor="end" dominant-baseline="middle" fill="#555" font-size="10"> </text>',1),Rv=It('<path fill="url(#areaGradient)"></path>'),Uv=It('<path fill="none" stroke="#f7931a" stroke-width="2"></path>'),zv=It('<circle r="3" fill="#f7931a"></circle>'),Ov=It('<text text-anchor="middle" fill="#555" font-size="10"> </text>'),Wv=u('<div class="line-chart svelte-1srghcq"><svg class="svelte-1srghcq"><defs><linearGradient id="areaGradient" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#f7931a;stop-opacity:0.3"></stop><stop offset="100%" style="stop-color:#f7931a;stop-opacity:0.05"></stop></linearGradient></defs><!><!><!><!><!></svg></div>');function Vv(n,o){Ns(o,!0);let c=ja(o,"data",19,()=>[]),_=ja(o,"height",3,200);const p={top:20,right:20,bottom:30,left:60};let g=y(400),f=Ae(()=>e(g)-p.left-p.right),w=Ae(()=>_()-p.top-p.bottom),m=Ae(()=>Math.min(...c().map(B=>B.value),0)),M=Ae(()=>Math.max(...c().map(B=>B.value))),N=Ae(()=>e(M)-e(m)||1);function X(B){return c().length<=1?p.left+e(f)/2:p.left+B/(c().length-1)*e(f)}function F(B){return p.top+e(w)-(B-e(m))/e(N)*e(w)}let L=Ae(()=>c().length===0?"":c().map((B,q)=>{const K=X(q),xe=F(B.value);return`${q===0?"M":"L"} ${K} ${xe}`}).join(" ")),R=Ae(()=>{if(c().length===0)return"";const B=F(e(m));return`${c().map((K,xe)=>{const Ie=X(xe),aa=F(K.value);return`${xe===0?"M":"L"} ${Ie} ${aa}`}).join(" ")} L ${X(c().length-1)} ${B} L ${X(0)} ${B} Z`});function J(B){return Math.abs(B)>=1e6?(B/1e6).toFixed(1)+"M":Math.abs(B)>=1e3?(B/1e3).toFixed(0)+"k":B.toLocaleString()}let S=Ae(()=>{const B=[],q=e(N)/4;for(let K=0;K<=4;K++)B.push(e(m)+q*K);return B});var x=Wv(),ee=s(x),Fe=r(s(ee));Ee(Fe,17,()=>e(S),Se,(B,q)=>{var K=Nv(),xe=ue(K),Ie=r(xe),aa=s(Ie,!0);a(Ie),b((Xe,xa,ft,Qa)=>{ye(xe,"x1",p.left),ye(xe,"y1",Xe),ye(xe,"x2",e(g)-p.right),ye(xe,"y2",xa),ye(Ie,"x",p.left-8),ye(Ie,"y",ft),h(aa,Qa)},[()=>F(e(q)),()=>F(e(q)),()=>F(e(q)),()=>J(e(q))]),i(B,K)});var _e=r(Fe);{var ge=B=>{var q=Rv();b(()=>ye(q,"d",e(R))),i(B,q)};k(_e,B=>{c().length>0&&B(ge)})}var ne=r(_e);{var te=B=>{var q=Uv();b(()=>ye(q,"d",e(L))),i(B,q)};k(ne,B=>{c().length>0&&B(te)})}var fe=r(ne);Ee(fe,17,c,Se,(B,q,K)=>{var xe=zv();b((Ie,aa)=>{ye(xe,"cx",Ie),ye(xe,"cy",aa)},[()=>X(K),()=>F(e(q).value)]),i(B,xe)});var ke=r(fe);Ee(ke,17,c,Se,(B,q,K)=>{var xe=Ra(),Ie=ue(xe);{var aa=Xe=>{var xa=Ov(),ft=s(xa,!0);a(xa),b(Qa=>{ye(xa,"x",Qa),ye(xa,"y",_()-8),h(ft,e(q).label)},[()=>X(K)]),i(Xe,xa)};k(Ie,Xe=>{(K%Math.ceil(c().length/6)===0||K===c().length-1)&&Xe(aa)})}i(B,xe)}),a(ee),a(x),b(()=>{ye(ee,"width",e(g)),ye(ee,"height",_())}),vv(x,"clientWidth",B=>l(g,B)),i(n,x),Rs()}const qv={name:"Phoenix Wallet",detect:n=>["date","id","type","amount_msat","payment_hash"].every(c=>n.includes(c)),parse:(n,o)=>{const c=[],_=[],p=[],g={date:n.indexOf("date"),id:n.indexOf("id"),type:n.indexOf("type"),amount_msat:n.indexOf("amount_msat"),amount_fiat:n.indexOf("amount_fiat"),mining_fee_sat:n.indexOf("mining_fee_sat"),mining_fee_fiat:n.indexOf("mining_fee_fiat"),service_fee_msat:n.indexOf("service_fee_msat"),service_fee_fiat:n.indexOf("service_fee_fiat"),payment_hash:n.indexOf("payment_hash"),tx_id:n.indexOf("tx_id"),description:n.indexOf("description")};for(let f=0;f<o.length;f++){const w=o[f];try{if(w.length===0||w.every(B=>!B.trim()))continue;const m=w[g.date];if(!m){_.push(`Row ${f+1}: Missing date`);continue}const M=Math.floor(new Date(m).getTime()/1e3);if(isNaN(M)){_.push(`Row ${f+1}: Invalid date format "${m}"`);continue}const N=parseInt(w[g.amount_msat],10);if(isNaN(N)){_.push(`Row ${f+1}: Invalid amount "${w[g.amount_msat]}"`);continue}const X=Math.round(N/1e3),F=parseInt(w[g.mining_fee_sat]||"0",10)||0,L=parseInt(w[g.service_fee_msat]||"0",10)||0,R=F+Math.round(L/1e3);let J=null,S=null;const x=w[g.mining_fee_fiat],ee=w[g.service_fee_fiat];if(x||ee){let B=0;if(x){const q=x.match(/^([\d.]+)\s*([A-Z]{3})$/);q&&(B+=parseFloat(q[1]),S=q[2])}if(ee){const q=ee.match(/^([\d.]+)\s*([A-Z]{3})$/);q&&(B+=parseFloat(q[1]),S=q[2])}B>0&&(J=B)}let Fe=null,_e=null;const ge=w[g.amount_fiat];if(ge){const B=ge.match(/^(-?[\d.]+)\s*([A-Z]{3})$/);B&&(Fe=parseFloat(B[1]),_e=B[2],X<0&&Fe>0&&(Fe=-Fe))}const ne=w[g.type];let te;switch(ne){case"swap_in":te="Transfer In";break;case"swap_out":te="Transfer Out";break;case"lightning_sent":te="Payment";break;case"lightning_received":te="Income";break;default:te="Uncategorized",p.push(`Row ${f+1}: Unknown transaction type "${ne}"`)}const fe=w[g.description]||"",ke=w[g.payment_hash]||w[g.tx_id]||w[g.id];c.push({id:`phoenix-${ke}`,timestamp:M,amount_sats:X,fee_sats:R,fee_fiat:J,fee_fiat_currency:S,category:te,note:fe.trim(),fiat_value:Fe,fiat_currency:_e,currency:"BTC",source_type:"phoenix",source_id:ke})}catch(m){_.push(`Row ${f+1}: ${m}`)}}return{transactions:c,errors:_,warnings:p}}},Hv={name:"Bitstack",detect:n=>{const o=n.map(_=>_.toLowerCase().trim());return["type","date","received amount","sent amount","external id"].every(_=>o.includes(_))},parse:(n,o)=>{var w,m,M,N,X;const c=[],_=[],p=[],g=F=>n.findIndex(L=>L.toLowerCase().trim()===F.toLowerCase()),f={type:g("type"),date:g("date"),receivedAmount:g("received amount"),receivedCurrency:g("currency or token received"),sentAmount:g("sent amount"),sentCurrency:g("currency or token sent"),fee:g("fee"),feeCurrency:g("currency or token fee"),description:g("description"),priceReceived:g("token price of the amount received"),priceSent:g("token price of the amount sent"),address:g("address"),txHash:g("transaction hash"),externalId:g("external id")};for(let F=0;F<o.length;F++){const L=o[F];try{if(L.length===0||L.every(Ie=>!Ie.trim()))continue;const R=L[f.date];if(!R){_.push(`Row ${F+1}: Missing date`);continue}const J=Math.floor(new Date(R).getTime()/1e3);if(isNaN(J)){_.push(`Row ${F+1}: Invalid date format "${R}"`);continue}const S=(w=L[f.type])==null?void 0:w.trim(),x=((m=L[f.description])==null?void 0:m.trim())||"",ee=(M=L[f.externalId])==null?void 0:M.trim(),Fe=(N=L[f.txHash])==null?void 0:N.trim();if(!ee){_.push(`Row ${F+1}: Missing External ID`);continue}let _e=0,ge=0,ne=null,te=null,fe=null,ke=null,B="Uncategorized";const q=parseFloat(L[f.fee]||"0"),K=(X=L[f.feeCurrency])==null?void 0:X.trim();if(q>0&&K&&(K==="BTC"?ge=Math.round(q*1e8):(ne=q,te=K)),S==="Trade"){const Ie=parseFloat(L[f.receivedAmount]||"0"),aa=parseFloat(L[f.sentAmount]||"0");if(isNaN(Ie)||Ie<=0){_.push(`Row ${F+1}: Invalid received amount`);continue}_e=Math.round(Ie*1e8),fe=aa+(ne||0),ke="EUR",B="Buy"}else if(S==="Deposit"){const Ie=parseFloat(L[f.receivedAmount]||"0"),aa=parseFloat(L[f.priceReceived]||"0");if(isNaN(Ie)||Ie<=0){_.push(`Row ${F+1}: Invalid received amount`);continue}_e=Math.round(Ie*1e8),aa>0&&(fe=Ie*aa,ke="EUR"),x.toLowerCase().includes("referral")?B="Income":x.toLowerCase().includes("gift")?B="Gift":B="Income"}else if(S==="Withdrawal"){const Ie=parseFloat(L[f.sentAmount]||"0"),aa=parseFloat(L[f.priceSent]||"0");if(isNaN(Ie)||Ie<=0){_.push(`Row ${F+1}: Invalid sent amount`);continue}_e=-Math.round(Ie*1e8),aa>0&&(fe=-(Ie*aa),ke="EUR"),B="Transfer Out"}else{p.push(`Row ${F+1}: Unknown transaction type "${S}"`);continue}const xe=Fe||ee;c.push({id:`bitstack-${ee}`,timestamp:J,amount_sats:_e,fee_sats:ge,fee_fiat:ne,fee_fiat_currency:te,category:B,note:x,fiat_value:fe,fiat_currency:ke,currency:"BTC",source_type:"bitstack",source_id:xe})}catch(R){_.push(`Row ${F+1}: ${R}`)}}return{transactions:c,errors:_,warnings:p}}},Gv={name:"Bull Bitcoin",detect:n=>{const o=n.map(_=>_.toLowerCase().trim());return["order_number","order_type","order_id","payin_amount","payout_amount"].every(_=>o.includes(_))},parse:(n,o)=>{var w,m,M,N,X,F,L,R,J;const c=[],_=[],p=[],g=S=>n.findIndex(x=>x.toLowerCase().trim()===S.toLowerCase()),f={orderNumber:g("order_number"),orderType:g("order_type"),orderSubtype:g("order_subtype"),orderId:g("order_id"),payinAmount:g("payin_amount"),payinCurrency:g("payin_currency"),payoutAmount:g("payout_amount"),payoutCurrency:g("payout_currency"),exchangeRate:g("exchange_rate_amount"),orderStatus:g("order_status"),createdAt:g("created_at (utc)"),completedAt:g("completed_at (utc)"),transactionId:g("transaction_id"),address:g("address")};for(let S=0;S<o.length;S++){const x=o[S];try{if(x.length===0||x.every(ft=>!ft.trim()))continue;const ee=(w=x[f.orderType])==null?void 0:w.trim(),Fe=(m=x[f.orderStatus])==null?void 0:m.trim(),_e=(M=x[f.orderId])==null?void 0:M.trim();if(Fe!=="Completed")continue;if(!_e){_.push(`Row ${S+1}: Missing Order ID`);continue}const ge=((N=x[f.completedAt])==null?void 0:N.trim())||((X=x[f.createdAt])==null?void 0:X.trim());if(!ge){_.push(`Row ${S+1}: Missing date`);continue}const ne=Math.floor(new Date(ge).getTime()/1e3);if(isNaN(ne)){_.push(`Row ${S+1}: Invalid date format "${ge}"`);continue}const te=parseFloat(x[f.payinAmount]||"0"),fe=(F=x[f.payinCurrency])==null?void 0:F.trim(),ke=parseFloat(x[f.payoutAmount]||"0"),B=(L=x[f.payoutCurrency])==null?void 0:L.trim(),q=(R=x[f.transactionId])==null?void 0:R.trim();let K=0,xe=null,Ie="EUR",aa="Uncategorized",Xe="BTC";if(ee==="Buy Bitcoin"){if(B!=="LBTC"&&B!=="BTC"){p.push(`Row ${S+1}: Unexpected payout currency "${B}"`);continue}K=Math.round(ke*1e8),xe=te,aa="Buy",Xe="BTC"}else if(ee==="Sell Bitcoin"||ee==="Fiat Payment"){if(fe!=="LBTC"&&fe!=="BTC"){p.push(`Row ${S+1}: Unexpected payin currency "${fe}"`);continue}K=-Math.round(te*1e8),xe=-ke,aa="Sell",Xe="BTC"}else if(ee==="Funding")if(B==="EUR")K=Math.round(ke*100),xe=ke,Ie="EUR",aa="Transfer In",Xe="EUR";else continue;else if(ee==="Withdraw")if(fe==="EUR")K=-Math.round(te*100),xe=-te,Ie="EUR",aa="Transfer Out",Xe="EUR";else continue;else continue;if(K===0){p.push(`Row ${S+1}: Zero amount, skipping`);continue}const xa=q||_e;c.push({id:`bullbitcoin-${_e}`,timestamp:ne,amount_sats:K,fee_sats:0,fee_fiat:null,fee_fiat_currency:null,category:aa,note:((J=x[f.orderSubtype])==null?void 0:J.trim())||"",fiat_value:xe,fiat_currency:Ie,currency:Xe,source_type:"bullbitcoin",source_id:xa})}catch(ee){_.push(`Row ${S+1}: ${ee}`)}}return{transactions:c,errors:_,warnings:p}}},Yv={name:"LN Markets Futures",detect:(n,o)=>{const c=["leverage","sumFundingFees","exitPrice","entryPrice","pl","closedAt"],_=n.map(p=>p.toLowerCase().trim());return c.every(p=>_.includes(p.toLowerCase()))},parse:(n,o)=>{const c=[],_=[],p=[],g={};n.forEach((w,m)=>g[w.toLowerCase().trim()]=m);const f=(w,m)=>{const M=g[m.toLowerCase()];return M===void 0?"":(w[M]||"").replace(/^"|"$/g,"").trim()};for(let w=0;w<o.length;w++){const m=o[w];try{if(m.length===0||m.every(xe=>!xe.trim()))continue;const M=f(m,"id"),N=f(m,"side"),X=f(m,"canceled")==="true",F=f(m,"closed")==="true",L=parseInt(f(m,"pl")||"0",10),R=parseInt(f(m,"openingFee")||"0",10),J=parseInt(f(m,"closingFee")||"0",10),S=parseInt(f(m,"sumFundingFees")||"0",10),x=R+J+S,ee=L-R-J-S;if((X||!F)&&ee===0&&x===0)continue;const Fe=f(m,"quantity")||"0",_e=f(m,"leverage")||"1",ge=f(m,"entryPrice")||f(m,"price")||"0",ne=f(m,"exitPrice"),te=f(m,"closedAt");if(!te){p.push(`Row ${w+1}: Missing closedAt date, skipping`);continue}const fe=Math.floor(new Date(te).getTime()/1e3);if(isNaN(fe)){_.push(`Row ${w+1}: Invalid date format "${te}"`);continue}const ke=ee>=0?"Trading Gain":"Trading Loss",B=N==="buy"?"Long":"Short",q=ne&&ne!=="null"?"$"+parseFloat(ne).toLocaleString():"N/A",K=`Futures ${B} ${Fe}USD @${_e}x | Entry: $${parseFloat(ge).toLocaleString()} Exit: ${q}`;c.push({id:`lnm-futures-${M}`,timestamp:fe,amount_sats:ee,fee_sats:x>0?x:0,fee_fiat:null,fee_fiat_currency:null,category:ke,note:K,fiat_value:null,fiat_currency:null,currency:"BTC",source_type:"lnmarkets-futures",source_id:M})}catch(M){_.push(`Row ${w+1}: ${M}`)}}return{transactions:c,errors:_,warnings:p}}},jv={name:"LN Markets Options",detect:(n,o)=>{const c=["strike","expiry","exercised","volatility","pl","closedAt"],_=n.map(p=>p.toLowerCase().trim());return c.every(p=>_.includes(p.toLowerCase()))},parse:(n,o)=>{const c=[],_=[],p=[],g={};n.forEach((w,m)=>g[w.toLowerCase().trim()]=m);const f=(w,m)=>{const M=g[m.toLowerCase()];return M===void 0?"":(w[M]||"").replace(/^"|"$/g,"").trim()};for(let w=0;w<o.length;w++){const m=o[w];try{if(m.length===0||m.every(xe=>!xe.trim()))continue;const M=f(m,"id"),N=f(m,"side"),X=f(m,"type"),F=f(m,"closed")==="true",L=f(m,"expired")==="true",R=f(m,"exercised")==="true",J=parseInt(f(m,"pl")||"0",10),S=parseInt(f(m,"openingFee")||"0",10),x=parseInt(f(m,"closingFee")||"0",10),ee=S+x;if(J===0&&ee===0)continue;const Fe=f(m,"quantity")||"0",_e=f(m,"strike")||"0",ge=f(m,"margin")||"0",ne=f(m,"closedAt");if(!ne){p.push(`Row ${w+1}: Missing closedAt date, skipping`);continue}const te=Math.floor(new Date(ne).getTime()/1e3);if(isNaN(te)){_.push(`Row ${w+1}: Invalid date format "${ne}"`);continue}const fe=J>=0?"Trading Gain":"Trading Loss",ke=X==="c"?"Call":"Put",B=N==="b"?"Buy":"Sell";let q="Closed";L?q="Expired":R?q="Exercised":F&&(q="Closed");const K=`Option ${B} ${ke} $${parseFloat(_e).toLocaleString()} ${Fe}USD | Premium: ${parseInt(ge).toLocaleString()} sats | ${q}`;c.push({id:`lnm-options-${M}`,timestamp:te,amount_sats:J,fee_sats:ee,fee_fiat:null,fee_fiat_currency:null,category:fe,note:K,fiat_value:null,fiat_currency:null,currency:"BTC",source_type:"lnmarkets-options",source_id:M})}catch(M){_.push(`Row ${w+1}: ${M}`)}}return{transactions:c,errors:_,warnings:p}}},Jv=[qv,Hv,Gv,Yv,jv];function Kv(n){const o=[];let c="",_=!1;for(let M=0;M<n.length;M++){const N=n[M];N==='"'?(_=!_,c+=N):(N===`
`||N==="\r")&&!_?(c.trim()&&o.push(c),c="",N==="\r"&&n[M+1]===`
`&&M++):c+=N}if(c.trim()&&o.push(c),o.length===0)return{headers:[],rows:[]};const p=o[0],g=p.includes("	")?"	":p.includes(";")?";":",",f=M=>{const N=[];let X="",F=!1;for(let L=0;L<M.length;L++){const R=M[L];R==='"'?F&&M[L+1]==='"'?(X+='"',L++):F=!F:R===g&&!F?(N.push(X.trim()),X=""):X+=R}return N.push(X.trim()),N},w=f(o[0]).map(M=>M.toLowerCase().trim()),m=o.slice(1).map(f);return{headers:w,rows:m}}function Xv(n){for(const o of Jv)if(o.detect(n,[]))return o;return null}var Zv=u('<div class="unlock-screen svelte-1uha8ag"><div class="unlock-container svelte-1uha8ag"><div class="unlock-logo svelte-1uha8ag"><span class="logo-sat svelte-1uha8ag">Sat</span><span class="logo-stone svelte-1uha8ag">Stone</span></div> <div class="loading-spinner svelte-1uha8ag"></div> <p class="unlock-loading svelte-1uha8ag">Loading...</p></div></div>'),Qv=u('<div class="unlock-form svelte-1uha8ag"><input type="password" placeholder="Enter passphrase..." class="unlock-input svelte-1uha8ag"/> <button class="btn primary unlock-btn svelte-1uha8ag">Unlock</button></div>'),ec=u('<div class="unlock-form svelte-1uha8ag"><textarea placeholder="Enter your 12-word recovery phrase..." class="unlock-textarea svelte-1uha8ag" rows="3"></textarea> <button class="btn primary unlock-btn svelte-1uha8ag">Unlock with Recovery</button></div>'),ac=u('<p class="unlock-error svelte-1uha8ag"> </p>'),tc=u('Forgot your passphrase? Use your <button class="link-btn svelte-1uha8ag">recovery phrase</button>',1),sc=u('Remember your passphrase? <button class="link-btn svelte-1uha8ag">Enter it here</button>',1),rc=u('<div class="unlock-screen svelte-1uha8ag"><div class="unlock-container svelte-1uha8ag"><div class="unlock-logo svelte-1uha8ag"><span class="logo-sat svelte-1uha8ag">Sat</span><span class="logo-stone svelte-1uha8ag">Stone</span></div> <h1 class="unlock-title svelte-1uha8ag">Welcome Back</h1> <p class="unlock-subtitle svelte-1uha8ag">Enter your passphrase to unlock</p> <div class="unlock-tabs svelte-1uha8ag"><button>Passphrase</button> <button>Recovery Phrase</button></div> <!> <!> <p class="unlock-hint svelte-1uha8ag"><!></p></div></div>'),lc=u('<div class="update-banner svelte-1uha8ag"><span> </span> <button class="btn-update svelte-1uha8ag">Download Update</button> <button class="btn-dismiss svelte-1uha8ag" title="Dismiss">✕</button></div>'),nc=u('<span class="stat-sub svelte-1uha8ag"> </span>'),ic=u("<span> </span>"),oc=u('<div class="header-stat svelte-1uha8ag"><span class="stat-label svelte-1uha8ag"> </span> <span class="stat-main btc-price-value svelte-1uha8ag"><!></span> <span class="stat-sub svelte-1uha8ag"><!></span></div>'),vc=u("<div> </div>"),cc=u("<option> </option>"),uc=u("<option> </option>"),dc=u('<button class="btn-clear svelte-1uha8ag">Clear</button>'),_c=u("<span> </span>"),pc=u('<div class="stat-sub-holdings svelte-1uha8ag"></div>'),gc=u('<span class="stat-sub svelte-1uha8ag"> </span>'),fc=u('<span class="stat-sub svelte-1uha8ag"> </span>'),hc=u('<span class="stat-sub svelte-1uha8ag"> </span>'),mc=u("<span> </span>"),bc=u('<span class="stat-value muted svelte-1uha8ag">Enable fiat</span>'),yc=u("<span> </span>"),wc=u('<span class="stat-value muted svelte-1uha8ag">Enable fiat</span>'),kc=u('<span class="fiat-holding negative svelte-1uha8ag"> </span>'),xc=u('<div class="stat-sub-holdings svelte-1uha8ag"></div>'),Cc=u("<span> </span>"),Tc=u('<span class="stat-value muted svelte-1uha8ag">Enable fiat</span>'),Sc=u('<div class="chart-empty svelte-1uha8ag">No transaction data yet</div>'),Ec=u('<div class="chart-empty svelte-1uha8ag">No spending data yet</div>'),Fc=u('<div class="chart-empty svelte-1uha8ag">No transaction data yet</div>'),Dc=u('<div class="chart-empty svelte-1uha8ag">No wallet data yet</div>'),Ac=u('<div class="chart-empty svelte-1uha8ag">No transactions yet</div>'),Ic=u('<div class="recent-item svelte-1uha8ag"><div class="recent-info svelte-1uha8ag"><span class="recent-category svelte-1uha8ag"> </span> <span class="recent-date svelte-1uha8ag"> </span></div> <span> </span></div>'),Mc=u('<div class="recent-list svelte-1uha8ag"></div>'),Lc=u('<div class="page-header svelte-1uha8ag"><h1 class="svelte-1uha8ag">Dashboard</h1> <div class="filters svelte-1uha8ag"><select class="filter-select svelte-1uha8ag"><option>Years</option><!></select> <select class="filter-select svelte-1uha8ag"><option>Months</option><!></select> <!></div></div> <div class="stats-grid svelte-1uha8ag"><div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag"> </span> <span class="stat-value primary svelte-1uha8ag"> </span> <!></div> <div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Total Income</span> <span class="stat-value positive svelte-1uha8ag"> </span> <!></div> <div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Total Spent</span> <span class="stat-value negative svelte-1uha8ag"> </span> <!></div> <div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Flow</span> <span> </span> <!></div></div> <div class="stats-grid svelte-1uha8ag"><div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Realized P&L</span> <!></div> <div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Unrealized P&L</span> <!></div> <div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Fees Paid</span> <span class="stat-value negative svelte-1uha8ag"><!></span> <!></div> <div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Total P&L</span> <!></div></div> <div class="charts-grid svelte-1uha8ag"><div class="chart-card svelte-1uha8ag"><h2 class="svelte-1uha8ag">Monthly Flow</h2> <!></div> <div class="chart-card svelte-1uha8ag"><h2 class="svelte-1uha8ag">Spending by Category</h2> <!></div></div> <div class="charts-grid svelte-1uha8ag"><div class="chart-card svelte-1uha8ag"><h2 class="svelte-1uha8ag">Balance History</h2> <!></div> <div class="chart-card svelte-1uha8ag"><h2 class="svelte-1uha8ag">Holdings by Wallet</h2> <!></div></div> <div class="chart-card full-width svelte-1uha8ag"><h2 class="svelte-1uha8ag">Recent Activity</h2> <!></div>',1),Bc=u('<div class="empty-state svelte-1uha8ag"><!> <p class="svelte-1uha8ag">No wallets yet</p> <button class="btn primary svelte-1uha8ag">Add your first wallet</button></div>'),Pc=u('<button class="icon-btn svelte-1uha8ag" title="Sync"><!></button>'),$c=u('<div class="wallet-syncing svelte-1uha8ag">Syncing...</div>'),Nc=u('<div class="wallet-card svelte-1uha8ag"><div class="wallet-card-header svelte-1uha8ag"><div class="wallet-icon svelte-1uha8ag"><!></div> <div class="wallet-meta svelte-1uha8ag"><span class="wallet-name svelte-1uha8ag"> </span> <span class="wallet-owner svelte-1uha8ag"> </span></div> <div class="wallet-actions svelte-1uha8ag"><!> <button class="icon-btn svelte-1uha8ag" title="Edit">✎</button> <button class="icon-btn svelte-1uha8ag" title="Delete">✕</button></div></div> <div class="wallet-card-body svelte-1uha8ag"><span class="wallet-balance svelte-1uha8ag"> </span> <span class="wallet-type svelte-1uha8ag"> </span></div> <!></div>'),Rc=u('<div class="wallet-grid svelte-1uha8ag"></div>'),Uc=u('<div class="empty-type svelte-1uha8ag"><span> </span></div>'),zc=u('<div class="empty-entity svelte-1uha8ag"><span>No wallets</span> <button class="btn-add-small svelte-1uha8ag"><!> Add Wallet</button></div>'),Oc=u('<button class="icon-btn svelte-1uha8ag" title="Sync"><!></button>'),Wc=u('<div class="wallet-syncing svelte-1uha8ag">Syncing...</div>'),Vc=u('<div class="wallet-card svelte-1uha8ag"><div class="wallet-card-header svelte-1uha8ag"><div class="wallet-icon svelte-1uha8ag"><!></div> <div class="wallet-meta svelte-1uha8ag"><span class="wallet-name svelte-1uha8ag"> </span></div> <div class="wallet-actions svelte-1uha8ag"><!> <button class="icon-btn svelte-1uha8ag" title="Edit">✎</button> <button class="icon-btn svelte-1uha8ag" title="Delete">✕</button></div></div> <div class="wallet-card-body svelte-1uha8ag"><span class="wallet-balance svelte-1uha8ag"> </span> <span class="wallet-type svelte-1uha8ag"> </span></div> <!></div>'),qc=u('<div class="wallet-grid svelte-1uha8ag"></div>'),Hc=u('<div class="entity-content svelte-1uha8ag"><!></div>'),Gc=u('<div class="entity-section svelte-1uha8ag"><button class="entity-header svelte-1uha8ag"><span class="collapse-icon small svelte-1uha8ag"> </span> <span class="entity-name svelte-1uha8ag"> </span> <span class="entity-balance svelte-1uha8ag"> </span></button> <!></div>'),Yc=u('<div class="type-content svelte-1uha8ag"><!></div>'),jc=u('<div class="wallet-type-section svelte-1uha8ag"><button class="type-header svelte-1uha8ag"><span class="collapse-icon svelte-1uha8ag"> </span> <span class="type-name svelte-1uha8ag"> </span> <span class="type-balance svelte-1uha8ag"> </span></button> <!></div>'),Jc=u('<div class="wallet-groups svelte-1uha8ag"></div>'),Kc=u('<div class="page-header svelte-1uha8ag"><h1 class="svelte-1uha8ag">Wallets</h1> <button class="btn primary svelte-1uha8ag"><!> Add Wallet</button></div> <!>',1),Xc=u("<option> </option>"),Zc=u("<option> </option>"),Qc=u('<button class="btn-clear svelte-1uha8ag">Clear</button>'),eu=u('<div class="loading svelte-1uha8ag">Loading transactions...</div>'),au=u('<div class="empty-state svelte-1uha8ag"><!> <p class="svelte-1uha8ag">No transactions yet</p> <span class="empty-hint svelte-1uha8ag">Sync a wallet to fetch transactions</span></div>'),tu=u('<div class="tx-th svelte-1uha8ag">Fiat</div>'),su=u('<span class="date-time svelte-1uha8ag"> </span>'),ru=u("<div><!></div>"),lu=u('<span class="fee-btc svelte-1uha8ag"> </span>'),nu=u('<span class="fee-fiat svelte-1uha8ag"> </span>'),iu=u("<!> <!>",1),ou=u("<option> </option>"),vu=u('<a target="_blank" rel="noopener" class="svelte-1uha8ag"> </a>'),cu=u('<span class="svelte-1uha8ag"> </span>'),uu=u('<button class="tx-action-btn svelte-1uha8ag" title="Edit">✎</button> <button class="tx-action-btn danger svelte-1uha8ag" title="Delete">✕</button>',1),du=u('<div><div class="tx-cell tx-date svelte-1uha8ag"><span class="date-main svelte-1uha8ag"> </span> <!></div> <div> </div> <!> <div class="tx-cell tx-fee svelte-1uha8ag"><!></div> <div class="tx-cell tx-wallet svelte-1uha8ag"> </div> <div class="tx-cell tx-category svelte-1uha8ag"><select class="svelte-1uha8ag"></select></div> <div class="tx-cell tx-note svelte-1uha8ag"><input type="text" placeholder="Add note..." class="svelte-1uha8ag"/></div> <div class="tx-cell tx-id svelte-1uha8ag"><!></div> <div class="tx-cell tx-actions svelte-1uha8ag"><button class="tx-action-btn svelte-1uha8ag" title="Duplicate">⧉</button> <!></div></div>'),_u=u('<div class="tx-table svelte-1uha8ag"><div><button class="tx-th sortable svelte-1uha8ag"> </button> <button class="tx-th sortable svelte-1uha8ag"> </button> <!> <div class="tx-th svelte-1uha8ag">Fee</div> <button class="tx-th sortable svelte-1uha8ag"> </button> <button class="tx-th sortable svelte-1uha8ag"> </button> <div class="tx-th svelte-1uha8ag">Note</div> <div class="tx-th svelte-1uha8ag">ID</div> <div class="tx-th svelte-1uha8ag">Actions</div></div> <div class="tx-body svelte-1uha8ag"></div></div>'),pu=u('<div class="page-header svelte-1uha8ag"><h1 class="svelte-1uha8ag">Transactions</h1> <div class="page-actions svelte-1uha8ag"><span class="tx-count svelte-1uha8ag"> </span> <div class="filters svelte-1uha8ag"><select class="filter-select svelte-1uha8ag"><option>Years</option><!></select> <select class="filter-select svelte-1uha8ag"><option>Months</option><!></select> <!></div> <button class="btn secondary svelte-1uha8ag">Import CSV</button> <button class="btn primary svelte-1uha8ag"><!> Add</button></div></div> <!>',1),gu=u('<div class="setting-row svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Fiat Currency</span> <span class="setting-description svelte-1uha8ag">Select your preferred fiat currency</span></div> <div class="setting-control svelte-1uha8ag"><div class="toggle-group svelte-1uha8ag"><button>€ EUR</button> <button>$ USD</button></div></div></div>'),fu=u('<div class="settings-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">Display Preferences</h2> <div class="setting-row svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Theme</span> <span class="setting-description svelte-1uha8ag">Choose your preferred color theme</span></div> <div class="setting-control svelte-1uha8ag"><div class="toggle-group svelte-1uha8ag"><button>Dark</button> <button>Light</button></div></div></div> <div class="setting-row svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Bitcoin Unit</span> <span class="setting-description svelte-1uha8ag">Display amounts in sats or BTC</span></div> <div class="setting-control svelte-1uha8ag"><div class="toggle-group svelte-1uha8ag"><button>Sats</button> <button>BTC</button></div></div></div> <div class="setting-row svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Show Fiat Values</span> <span class="setting-description svelte-1uha8ag">Display fiat equivalents alongside BTC</span></div> <div class="setting-control svelte-1uha8ag"><button><span class="toggle-knob svelte-1uha8ag"></span></button></div></div> <!></div>'),hu=u('<span class="price-time svelte-1uha8ag"> </span>'),mu=u('<div class="price-badge svelte-1uha8ag"> <!></div>'),bu=u('<span class="spinner svelte-1uha8ag"></span> Fetching...',1),yu=u(`<div class="settings-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">P&L Settings</h2> <div class="setting-row svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Cost Basis Method</span> <span class="setting-description svelte-1uha8ag">Method used to calculate realized gains/losses</span></div> <div class="setting-control svelte-1uha8ag"><div class="toggle-group svelte-1uha8ag"><button>Average</button> <button>FIFO</button></div></div></div> <div class="setting-row column svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Historical Fiat Values</span> <span class="setting-description svelte-1uha8ag">Fetch historical prices for transactions without fiat values. 
                    This uses the Coingecko API and may take several minutes.</span></div> <div class="setting-action svelte-1uha8ag"><!> <button class="btn secondary svelte-1uha8ag"><!></button></div></div></div>`),wu=u('<div class="account-item svelte-1uha8ag"><span class="account-name svelte-1uha8ag"> </span> <span class="account-badge primary svelte-1uha8ag">You</span></div>'),ku=u('<div class="account-item svelte-1uha8ag"><span class="account-name svelte-1uha8ag"> </span> <button class="btn-icon-small danger svelte-1uha8ag" title="Delete">✕</button></div>'),xu=u('<div class="empty-list svelte-1uha8ag">No family members added</div>'),Cu=u('<span class="account-badge svelte-1uha8ag"> </span>'),Tu=u('<div class="account-item svelte-1uha8ag"><span class="account-name svelte-1uha8ag"> </span> <!> <button class="btn-icon-small danger svelte-1uha8ag" title="Delete">✕</button></div>'),Su=u('<div class="empty-list svelte-1uha8ag">No businesses added</div>'),Eu=u('<div class="settings-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">Accounts</h2> <p class="section-description svelte-1uha8ag">Manage your personal, family, and business accounts.</p> <div class="account-group svelte-1uha8ag"><div class="account-group-header svelte-1uha8ag"><h3 class="svelte-1uha8ag">Personal</h3></div> <div class="account-list svelte-1uha8ag"></div></div> <div class="account-group svelte-1uha8ag"><div class="account-group-header svelte-1uha8ag"><h3 class="svelte-1uha8ag">Family</h3> <button class="btn-add-inline svelte-1uha8ag"><!> Add</button></div> <div class="account-list svelte-1uha8ag"></div></div> <div class="account-group svelte-1uha8ag"><div class="account-group-header svelte-1uha8ag"><h3 class="svelte-1uha8ag">Business</h3> <button class="btn-add-inline svelte-1uha8ag"><!> Add</button></div> <div class="account-list svelte-1uha8ag"></div></div></div>'),Fu=u('<div class="wallet-list-item svelte-1uha8ag"><div class="wallet-list-info svelte-1uha8ag"><span class="wallet-list-name svelte-1uha8ag"> </span> <span class="wallet-list-meta svelte-1uha8ag"> </span></div> <span class="wallet-list-balance svelte-1uha8ag"> </span> <div class="wallet-list-actions svelte-1uha8ag"><button class="btn-icon-small svelte-1uha8ag" title="Edit">✎</button> <button class="btn-icon-small danger svelte-1uha8ag" title="Delete">✕</button></div></div>'),Du=u('<div class="empty-list svelte-1uha8ag">No wallets added</div>'),Au=u('<div class="settings-section svelte-1uha8ag"><div class="section-header svelte-1uha8ag"><div><h2 class="svelte-1uha8ag">Wallets</h2> <p class="section-description svelte-1uha8ag">Manage your Bitcoin wallets.</p></div> <button class="btn primary svelte-1uha8ag"><!> Add Wallet</button></div> <div class="wallet-list svelte-1uha8ag"></div></div>'),Iu=u('<div class="category-item system svelte-1uha8ag"><span class="category-name svelte-1uha8ag"> </span> <span class="category-badge svelte-1uha8ag">System</span></div>'),Mu=u('<div class="category-item svelte-1uha8ag"><span class="category-name svelte-1uha8ag"> </span> <div class="category-actions svelte-1uha8ag"><button class="btn-icon-small svelte-1uha8ag" title="Edit">✎</button> <button class="btn-icon-small danger svelte-1uha8ag" title="Delete">✕</button></div></div>'),Lu=u('<div class="empty-list svelte-1uha8ag">No custom categories. Click "Add Category" to create one.</div>'),Bu=u('<div class="settings-section svelte-1uha8ag"><div class="section-header svelte-1uha8ag"><div><h2 class="svelte-1uha8ag">Categories</h2> <p class="section-description svelte-1uha8ag">Manage transaction categories. System categories cannot be edited or deleted.</p></div> <button class="btn primary svelte-1uha8ag"><!> Add Category</button></div> <div class="category-group svelte-1uha8ag"><h3 class="svelte-1uha8ag">System Categories</h3> <div class="category-list svelte-1uha8ag"></div></div> <div class="category-group svelte-1uha8ag"><h3 class="svelte-1uha8ag">Custom Categories</h3> <div class="category-list svelte-1uha8ag"></div></div></div>'),Pu=u('<span class="encryption-badge active svelte-1uha8ag"><span class="badge-icon">🔒</span> Encrypted</span> <button class="btn secondary svelte-1uha8ag">Change Passphrase</button> <button class="btn secondary svelte-1uha8ag">Remove Encryption</button>',1),$u=u('<span class="encryption-badge inactive svelte-1uha8ag"><span class="badge-icon">🔓</span> Not Encrypted</span> <button class="btn primary svelte-1uha8ag">Enable Encryption</button>',1),Nu=u('<div class="setting-row svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Auto-Lock</span> <span class="setting-description svelte-1uha8ag">Automatically lock the app after a period of inactivity</span></div> <div class="setting-control svelte-1uha8ag"><select class="settings-select svelte-1uha8ag"><option>Never</option><option>5 minutes</option><option>15 minutes</option><option>30 minutes</option><option>1 hour</option></select></div></div> <div class="setting-row svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Lock Now</span> <span class="setting-description svelte-1uha8ag">Manually lock the app immediately</span></div> <div class="setting-control svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Lock App</button></div></div>',1),Ru=u('<div class="settings-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">Security</h2> <p class="section-description svelte-1uha8ag">Protect your data with AES-256 encryption.</p> <div class="setting-row column svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Database Encryption</span> <span class="setting-description svelte-1uha8ag"><!></span></div> <div class="setting-action svelte-1uha8ag"><!></div></div> <!></div>'),Uu=u('<span class="spinner svelte-1uha8ag"></span> Exporting...',1),zu=u('<div class="settings-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">Data Management</h2> <div class="setting-row column svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Export Data</span> <span class="setting-description svelte-1uha8ag">Download all your transactions as a CSV file for backup or analysis.</span></div> <div class="setting-action svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag"><!></button></div></div> <div class="setting-row column danger-zone svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Reset All Data</span> <span class="setting-description svelte-1uha8ag">Permanently delete all wallets, transactions, and settings. This action cannot be undone.</span></div> <div class="setting-action svelte-1uha8ag"><button class="btn danger svelte-1uha8ag">Reset All Data</button></div></div></div>'),Ou=u('<div class="settings-layout svelte-1uha8ag"><nav class="settings-sidebar svelte-1uha8ag"><button>Display</button> <button>P&L Settings</button> <button>Categories</button> <button>Accounts</button> <button>Wallets</button> <button>Security</button> <button>Data</button></nav> <div class="settings-content svelte-1uha8ag"><!></div></div>'),Wu=u('<!> <header class="svelte-1uha8ag"><div class="header-left svelte-1uha8ag"><div class="logo svelte-1uha8ag"><!> <span><span style="color: #f7931a;">Sat</span>Stone | <span style="color: #f7931a;">Bit</span>Counting</span></div></div> <div class="header-center svelte-1uha8ag"><!> <!></div> <div class="header-right svelte-1uha8ag"><div class="header-stat svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Total Balance</span> <span class="stat-main svelte-1uha8ag"> </span> <!></div> <!> <button title="Refresh price"><!></button></div></header> <nav class="tabs svelte-1uha8ag"><button>Dashboard</button> <button>Wallets</button> <button>Transactions</button> <button>Settings</button></nav> <!> <main class="svelte-1uha8ag"><!> <!> <!> <!></main>',1),Vu=u("<option> </option>"),qu=u('<div class="form-group svelte-1uha8ag"><label for="wallet-xpub" class="svelte-1uha8ag">Extended Public Key</label> <input id="wallet-xpub" placeholder="xpub / ypub / zpub" class="svelte-1uha8ag"/></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="wallet-type" class="svelte-1uha8ag">Address Type</label> <select id="wallet-type" class="svelte-1uha8ag"><option>zpub (Native SegWit)</option><option>ypub (SegWit)</option><option>xpub (Legacy)</option></select></div> <div class="form-group svelte-1uha8ag"><label for="wallet-owner" class="svelte-1uha8ag">Owner</label> <select id="wallet-owner" class="svelte-1uha8ag"></select></div></div>',1),Hu=u("<option> </option>"),Gu=u(`<div class="manual-wallet-info svelte-1uha8ag"><p class="svelte-1uha8ag">Manual wallets don't sync from the blockchain.</p> <p class="svelte-1uha8ag">Use this for Lightning wallets, exchange accounts, or any wallet where you'll import transactions via CSV or add them manually.</p></div> <div class="form-group svelte-1uha8ag"><label for="wallet-owner-manual" class="svelte-1uha8ag">Owner</label> <select id="wallet-owner-manual" class="svelte-1uha8ag"></select></div>`,1),Yu=u('<div class="form-group svelte-1uha8ag"><label for="wallet-name" class="svelte-1uha8ag">Name</label> <input id="wallet-name" placeholder="My Bitcoin Wallet" class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label class="svelte-1uha8ag">Wallet Type</label> <div class="wallet-type-toggle svelte-1uha8ag"><button>Watch-only (xpub)</button> <button>Manual</button></div></div> <!> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Add Wallet</button></div>',1),ju=u("<option> </option>"),Ju=u('<div class="form-group svelte-1uha8ag"><label for="entity-owner" class="svelte-1uha8ag">Owner (optional)</label> <select id="entity-owner" class="svelte-1uha8ag"><option>No owner</option><!></select></div>'),Ku=u('<div class="form-group svelte-1uha8ag"><label for="entity-name" class="svelte-1uha8ag">Name</label> <input id="entity-name" class="svelte-1uha8ag"/></div> <!> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Add</button></div>',1),Xu=u("<option> </option>"),Zu=u('<div class="form-group svelte-1uha8ag"><label for="edit-wallet-name" class="svelte-1uha8ag">Name</label> <input id="edit-wallet-name" placeholder="Wallet name" class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label for="edit-wallet-owner" class="svelte-1uha8ag">Owner</label> <select id="edit-wallet-owner" class="svelte-1uha8ag"></select></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Save</button></div>',1),Qu=u('<span class="form-hint svelte-1uha8ag">Enter sats (whole number) or BTC (with decimal)</span>'),ed=u("<option> </option>"),ad=u("<option> </option>"),td=u('<div class="form-group svelte-1uha8ag"><label for="tx-fiat" class="svelte-1uha8ag"> </label> <input id="tx-fiat" type="text" placeholder="e.g. 85.50" class="svelte-1uha8ag"/></div>'),sd=u('<div class="tx-type-toggle svelte-1uha8ag"><button>Incoming</button> <button>Outgoing</button></div> <div class="form-group svelte-1uha8ag"><label class="svelte-1uha8ag">Currency</label> <div class="currency-toggle svelte-1uha8ag"><button>BTC</button> <button>EUR</button> <button>USD</button></div></div> <div class="form-group svelte-1uha8ag"><label for="tx-amount" class="svelte-1uha8ag">Amount <!></label> <input id="tx-amount" type="text" class="svelte-1uha8ag"/> <!></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="tx-wallet" class="svelte-1uha8ag">Wallet</label> <select id="tx-wallet" class="svelte-1uha8ag"></select></div> <div class="form-group svelte-1uha8ag"><label for="tx-date" class="svelte-1uha8ag">Date</label> <input id="tx-date" type="date" class="svelte-1uha8ag"/></div></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="tx-category" class="svelte-1uha8ag">Category</label> <select id="tx-category" class="svelte-1uha8ag"></select></div> <!></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="tx-fee-sats" class="svelte-1uha8ag">Fee (sats, optional)</label> <input id="tx-fee-sats" type="text" placeholder="e.g. 150" class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label for="tx-fee-fiat" class="svelte-1uha8ag"> </label> <input id="tx-fee-fiat" type="text" placeholder="e.g. 0.50" class="svelte-1uha8ag"/></div></div> <div class="form-group svelte-1uha8ag"><label for="tx-note" class="svelte-1uha8ag">Note (optional)</label> <input id="tx-note" type="text" placeholder="Description..." class="svelte-1uha8ag"/></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag"> </button></div>',1),rd=u('<div class="form-group svelte-1uha8ag"><label for="new-category-name" class="svelte-1uha8ag">Category Name</label> <input id="new-category-name" type="text" placeholder="e.g. Subscriptions, Donations..." class="svelte-1uha8ag"/></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Add Category</button></div>',1),ld=u('<div class="form-group svelte-1uha8ag"><label for="edit-category-name" class="svelte-1uha8ag">Category Name</label> <input id="edit-category-name" type="text" placeholder="Category name" class="svelte-1uha8ag"/></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Save</button></div>',1),nd=u('<span class="form-hint svelte-1uha8ag">Enter sats (whole number) or BTC (with decimal)</span>'),id=u("<option> </option>"),od=u('<div class="form-group svelte-1uha8ag"><label for="edit-tx-fiat" class="svelte-1uha8ag"> </label> <input id="edit-tx-fiat" type="text" placeholder="e.g. 85.50" class="svelte-1uha8ag"/></div>'),vd=u('<div class="tx-type-toggle svelte-1uha8ag"><button>Incoming</button> <button>Outgoing</button></div> <div class="form-group svelte-1uha8ag"><label class="svelte-1uha8ag">Currency</label> <div class="currency-toggle svelte-1uha8ag"><button>BTC</button> <button>EUR</button> <button>USD</button></div></div> <div class="form-group svelte-1uha8ag"><label for="edit-tx-amount" class="svelte-1uha8ag">Amount <!></label> <input id="edit-tx-amount" type="text" class="svelte-1uha8ag"/> <!></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="edit-tx-date" class="svelte-1uha8ag">Date</label> <input id="edit-tx-date" type="date" class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label for="edit-tx-category" class="svelte-1uha8ag">Category</label> <select id="edit-tx-category" class="svelte-1uha8ag"></select></div></div> <div class="form-row-modal svelte-1uha8ag"><!> <div class="form-group svelte-1uha8ag"><label for="edit-tx-note" class="svelte-1uha8ag">Note (optional)</label> <input id="edit-tx-note" type="text" placeholder="Description..." class="svelte-1uha8ag"/></div></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="edit-tx-fee-sats" class="svelte-1uha8ag">Fee (sats, optional)</label> <input id="edit-tx-fee-sats" type="text" placeholder="e.g. 150" class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label for="edit-tx-fee-fiat" class="svelte-1uha8ag"> </label> <input id="edit-tx-fee-fiat" type="text" placeholder="e.g. 0.50" class="svelte-1uha8ag"/></div></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Save Changes</button></div>',1),cd=u("<option> </option>"),ud=u('<span class="form-hint svelte-1uha8ag">Enter sats (whole number) or BTC (with decimal)</span>'),dd=u("<option> </option>"),_d=u('<div class="form-group svelte-1uha8ag"><label for="dup-tx-fiat" class="svelte-1uha8ag"> </label> <input id="dup-tx-fiat" type="text" placeholder="e.g. 85.50" class="svelte-1uha8ag"/></div>'),pd=u('<div class="duplicate-info svelte-1uha8ag"><p class="svelte-1uha8ag">Creating a copy of this transaction. Edit the values as needed.</p></div> <div class="tx-type-toggle svelte-1uha8ag"><button>Incoming</button> <button>Outgoing</button></div> <div class="form-group svelte-1uha8ag"><label class="svelte-1uha8ag">Currency</label> <div class="currency-toggle svelte-1uha8ag"><button>BTC</button> <button>EUR</button> <button>USD</button></div></div> <div class="form-group svelte-1uha8ag"><label for="dup-tx-wallet" class="svelte-1uha8ag">Wallet</label> <select id="dup-tx-wallet" class="svelte-1uha8ag"></select></div> <div class="form-group svelte-1uha8ag"><label for="dup-tx-amount" class="svelte-1uha8ag">Amount <!></label> <input id="dup-tx-amount" type="text" class="svelte-1uha8ag"/> <!></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="dup-tx-date" class="svelte-1uha8ag">Date</label> <input id="dup-tx-date" type="date" class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label for="dup-tx-category" class="svelte-1uha8ag">Category</label> <select id="dup-tx-category" class="svelte-1uha8ag"></select></div></div> <div class="form-row-modal svelte-1uha8ag"><!> <div class="form-group svelte-1uha8ag"><label for="dup-tx-note" class="svelte-1uha8ag">Note (optional)</label> <input id="dup-tx-note" type="text" placeholder="Description..." class="svelte-1uha8ag"/></div></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="dup-tx-fee-sats" class="svelte-1uha8ag">Fee (sats, optional)</label> <input id="dup-tx-fee-sats" type="text" placeholder="e.g. 150" class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label for="dup-tx-fee-fiat" class="svelte-1uha8ag"> </label> <input id="dup-tx-fee-fiat" type="text" placeholder="e.g. 0.50" class="svelte-1uha8ag"/></div></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Create Duplicate</button></div>',1),gd=u(`<div class="confirm-content svelte-1uha8ag"><p class="confirm-message svelte-1uha8ag">You're changing from <strong> </strong> to <strong> </strong>.</p> <p class="confirm-detail svelte-1uha8ag">You have <strong> </strong> transactions with historical fiat values.</p> <p class="confirm-question svelte-1uha8ag"> </p> <p class="confirm-warning svelte-1uha8ag">This will fetch new prices from Coingecko and may take a few minutes depending on the number of unique dates.</p></div> <div class="form-actions three-buttons svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn secondary svelte-1uha8ag">Keep Old Values</button> <button class="btn primary svelte-1uha8ag">Update All</button></div>`,1),fd=u("<option> </option>"),hd=u('<p class="error-text svelte-1uha8ag"> </p>'),md=u('<div class="import-errors svelte-1uha8ag"></div>'),bd=u('<div class="import-upload svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="import-wallet" class="svelte-1uha8ag">Import to Wallet</label> <select id="import-wallet" class="svelte-1uha8ag"></select></div> <div class="file-upload svelte-1uha8ag"><label class="file-upload-label svelte-1uha8ag"><input type="file" accept=".csv" class="svelte-1uha8ag"/> <span class="file-upload-btn svelte-1uha8ag">Choose CSV File</span> <span class="file-upload-hint svelte-1uha8ag">Supported: Phoenix, Bitstack, Bull Bitcoin, LN Markets</span></label></div> <!></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button></div>',1),yd=u('<p class="warning-text svelte-1uha8ag"> </p>'),wd=u('<p class="warning-text svelte-1uha8ag"> </p>'),kd=u('<div class="import-warnings svelte-1uha8ag"><p class="warning-title svelte-1uha8ag">Warnings:</p> <!> <!></div>'),xd=u('<p class="error-text svelte-1uha8ag"> </p>'),Cd=u('<p class="error-text svelte-1uha8ag"> </p>'),Td=u('<div class="import-errors svelte-1uha8ag"><p class="error-title svelte-1uha8ag">Errors:</p> <!> <!></div>'),Sd=u('<div class="import-table-row svelte-1uha8ag"><span> </span> <span> </span> <span> </span> <span class="truncate svelte-1uha8ag"> </span></div>'),Ed=u('<div class="import-table-more svelte-1uha8ag"> </div>'),Fd=u('<div class="import-preview"><div class="import-summary svelte-1uha8ag"><p class="svelte-1uha8ag"><strong class="svelte-1uha8ag">Source:</strong> </p> <p class="svelte-1uha8ag"><strong class="svelte-1uha8ag">File:</strong> </p> <p class="svelte-1uha8ag"><strong class="svelte-1uha8ag">Transactions:</strong> </p> <p class="svelte-1uha8ag"><strong class="svelte-1uha8ag">Target Wallet:</strong> </p></div> <!> <!> <div class="import-table svelte-1uha8ag"><div class="import-table-header svelte-1uha8ag"><span>Date</span> <span>Amount</span> <span>Category</span> <span>Note</span></div> <div class="import-table-body svelte-1uha8ag"><!> <!></div></div></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Back</button> <button class="btn primary svelte-1uha8ag"> </button></div>',1),Dd=u('<div class="import-progress svelte-1uha8ag"><div class="spinner large svelte-1uha8ag"></div> <p class="svelte-1uha8ag">Importing transactions...</p></div>'),Ad=u('<p class="result-errors svelte-1uha8ag"> </p>'),Id=u('<p class="error-text svelte-1uha8ag"> </p>'),Md=u('<div class="import-errors svelte-1uha8ag"></div>'),Ld=u('<div class="import-done svelte-1uha8ag"><div class="import-result svelte-1uha8ag"><p class="result-success svelte-1uha8ag"> </p> <p class="result-skipped svelte-1uha8ag"> </p> <!></div> <!></div> <div class="form-actions svelte-1uha8ag"><button class="btn primary svelte-1uha8ag">Done</button></div>',1),Bd=u('<div class="password-strength svelte-1uha8ag"><div class="strength-bar svelte-1uha8ag"><div></div></div> <span> </span></div>'),Pd=u('<span class="form-error svelte-1uha8ag">Passphrases do not match</span>'),$d=u('<div class="encryption-warning svelte-1uha8ag"><span class="warning-icon svelte-1uha8ag">⚠️</span> <p class="svelte-1uha8ag"><strong class="svelte-1uha8ag">Important:</strong> If you lose your passphrase AND recovery phrase, your data will be permanently lost. There is no way to recover it.</p></div> <div class="form-group svelte-1uha8ag"><label for="encrypt-pass" class="svelte-1uha8ag">Create Passphrase</label> <input id="encrypt-pass" type="password" placeholder="Enter a strong passphrase..." class="svelte-1uha8ag"/> <!></div> <div class="form-group svelte-1uha8ag"><label for="encrypt-pass-confirm" class="svelte-1uha8ag">Confirm Passphrase</label> <input id="encrypt-pass-confirm" type="password" placeholder="Confirm your passphrase..." class="svelte-1uha8ag"/> <!></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Continue</button></div>',1),Nd=u('<div class="recovery-word svelte-1uha8ag"><span class="word-number svelte-1uha8ag"></span> <span class="word-text svelte-1uha8ag"> </span></div>'),Rd=u('<div class="recovery-section svelte-1uha8ag"><div class="recovery-warning svelte-1uha8ag"><span class="warning-icon svelte-1uha8ag">📝</span> <p class="svelte-1uha8ag"><strong>Write this down!</strong> This 12-word phrase is the ONLY way to recover your data if you forget your passphrase.</p></div> <div class="recovery-phrase-display svelte-1uha8ag"><div class="recovery-words svelte-1uha8ag"></div> <button class="btn secondary copy-btn svelte-1uha8ag">📋 Copy to Clipboard</button></div> <div class="recovery-confirm svelte-1uha8ag"><label class="checkbox-label svelte-1uha8ag"><input type="checkbox" class="svelte-1uha8ag"/> <span class="svelte-1uha8ag">I have written down my recovery phrase and stored it safely</span></label></div></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Back</button> <button class="btn primary svelte-1uha8ag">Enable Encryption</button></div>',1),Ud=u('<div class="password-strength svelte-1uha8ag"><div class="strength-bar svelte-1uha8ag"><div></div></div> <span> </span></div>'),zd=u('<span class="form-error svelte-1uha8ag">Passphrases do not match</span>'),Od=u('<div class="form-group svelte-1uha8ag"><label for="current-pass" class="svelte-1uha8ag">Current Passphrase</label> <input id="current-pass" type="password" placeholder="Enter current passphrase..." class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label for="new-pass" class="svelte-1uha8ag">New Passphrase</label> <input id="new-pass" type="password" placeholder="Enter new passphrase..." class="svelte-1uha8ag"/> <!></div> <div class="form-group svelte-1uha8ag"><label for="new-pass-confirm" class="svelte-1uha8ag">Confirm New Passphrase</label> <input id="new-pass-confirm" type="password" placeholder="Confirm new passphrase..." class="svelte-1uha8ag"/> <!></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Change Passphrase</button></div>',1),Wd=u('<div class="encryption-warning danger svelte-1uha8ag"><span class="warning-icon svelte-1uha8ag">⚠️</span> <p class="svelte-1uha8ag"><strong class="svelte-1uha8ag">Warning:</strong> Removing encryption will make your database accessible without a passphrase. Anyone with access to your computer could view your financial data.</p></div> <div class="form-group svelte-1uha8ag"><label for="remove-pass" class="svelte-1uha8ag">Enter Passphrase to Confirm</label> <input id="remove-pass" type="password" placeholder="Enter current passphrase..." class="svelte-1uha8ag"/></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn danger svelte-1uha8ag">Remove Encryption</button></div>',1),Vd=u('<div class="app svelte-1uha8ag"><!></div> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>',1);function Xd(n,o){Ns(o,!0);let c=y(!1),_=y("");const p="0.1.2";let g=y(Ut([])),f=y(!1),w=y(""),m=y(!1),M=y(null),N=y(""),X=y(!1),F=y(null);const L=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];let R=y(Ut([])),J=y(Ut([])),S=y(Ut([])),x=y(Ut({})),ee=y(!1),Fe=y(""),_e=y("info"),ge=y("dashboard"),ne=y(null),te=y(null),fe=y(null),ke=y(null),B=y("timestamp"),q=y("desc"),K=y(!0),xe=y(!1),Ie=y(!0),aa=y(""),Xe=y(""),xa=y("passphrase"),ft=y(""),Qa=y(!1),ht=y(""),mt=y(""),zt=y(""),ws=y(!1),ks=y("passphrase"),ct=y(null),Ks=y(!1),us=y(""),Mt=y(""),jt=y(""),vt=y(null),Xs=y(!1),ds=y(""),xs=y("never"),xr=y(Ut(Date.now())),Cr=null,_s=y(!1),Us=y(!1),zs=y("family"),Tr=y(!1),Os=y(null),Sr=y(!1),Cs=y(null),Zs=y(!1),Ws=y(null),Qs=y(""),Er=y(1),Kr=y(!1),Ot=y("upload"),Vs=y(null),qs=y(0),Xr=y(""),Wt=y(Ut([])),Lt=y(Ut([])),Ts=y(Ut([])),Vt=y(null),Fr=y(!1),Ss=y(null),er=y(!1),Bt=y("incoming"),qt=y(""),ps=y(0),Qt=y("Uncategorized"),gs=y(""),fs=y(Ut(new Date().toISOString().split("T")[0])),es=y(""),ga=y("BTC"),as=y(""),ts=y(""),ar=y(!1),Hs=y(null),Es=y("incoming"),Fs=y(""),tr=y("Uncategorized"),Dr=y(""),Ar=y(""),sr=y(""),kt=y("BTC"),rr=y(""),lr=y(""),Ir=y(!1),Ds=y(null),nr=y(""),ir=y(""),Zr=y("zpub"),Gs=y(1),As=y(""),Mr=y(null),Qr=y(!1),Ys=y(null),or=y("sats"),Ja=y("display"),Lr=y(!1),Br=y(!1),vr=y("dark"),Ka=y(!0),Me=y("EUR"),Xa=y(null),hs=y(null),Pr=y(!1),cr=y(null),$r=y(!1),Nr=y(!1),el=y(null),ur=y("average"),al=Ut({personal:!0,family:!0,business:!0}),tl=Ut({}),ti=Ae(()=>[{value:null,label:"All accounts",type:"all"},...e(R).map(t=>({value:t.id,label:t.name,type:t.entity_type}))]),Rr=Ae(()=>e(g).map(t=>t.name)),si=Ae(()=>{const t=e(ne)?e(J).filter(v=>v.entity_id===e(ne)):e(J);return[{value:null,label:"All wallets"},...t.map(v=>({value:v.id,label:v.name}))]}),Ll=Ae(()=>{const t=new Set;for(const v of e(S))v.timestamp&&t.add(new Date(v.timestamp*1e3).getFullYear());return Array.from(t).sort((v,d)=>d-v)}),Is=Ae(()=>e(S).filter(t=>{if(e(te)!==null&&t.wallet_id!==e(te))return!1;if(!t.timestamp)return e(fe)===null&&e(ke)===null;const v=new Date(t.timestamp*1e3),d=v.getFullYear(),C=v.getMonth()+1;return!(e(fe)!==null&&d!==e(fe)||e(ke)!==null&&C!==e(ke))})),ri=Ae(()=>{const t=[...e(Is)];return t.sort((v,d)=>{let C,T;return e(B)==="timestamp"?(C=v.timestamp??0,T=d.timestamp??0):e(B)==="amount_sats"?(C=v.amount_sats,T=d.amount_sats):e(B)==="wallet_name"?(C=v.wallet_name.toLowerCase(),T=d.wallet_name.toLowerCase()):e(B)==="category"&&(C=(v.category??"").toLowerCase(),T=(d.category??"").toLowerCase()),C<T?e(q)==="asc"?-1:1:C>T?e(q)==="asc"?1:-1:0}),t});const li={Buy:"#4ade80",Sell:"#f87171","Transfer In":"#888888","Transfer Out":"#888888",Income:"#4ade80",Gift:"#a78bfa",Food:"#fb923c",Utilities:"#38bdf8",Shopping:"#f472b6","Trading Gain":"#4ade80","Trading Loss":"#f87171",Mining:"#fbbf24","Lending Interest (Income)":"#4ade80","Lending Interest (Cost)":"#f87171","Receive Loan":"#60a5fa","Repay Loan":"#f87171",Liquidation:"#ef4444",Uncategorized:"#444444"},ni=["Transfer In","Transfer Out","Receive Loan","Repay Loan"];let ms=Ae(()=>e(Is).filter(t=>(t.currency||"BTC")==="BTC")),Bl=Ae(()=>{const t={};for(const v of e(ms))if(v.amount_sats<0&&!ni.includes(v.category||"")){const d=v.category||"Uncategorized";t[d]=(t[d]||0)+Math.abs(v.amount_sats)}return Object.entries(t).map(([v,d])=>({label:v,value:d,color:li[v]||"#666"})).sort((v,d)=>d.value-v.value)}),Pl=Ae(()=>{const t={};for(const d of e(ms))if(d.timestamp){const C=new Date(d.timestamp*1e3),T=`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`;t[T]=(t[T]||0)+d.amount_sats}return Object.entries(t).sort(([d],[C])=>d.localeCompare(C)).slice(-12).map(([d,C])=>{const[,T]=d.split("-");return{label:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(T)-1],value:C,color:C>=0?"#4ade80":"#f87171"}})});const ii=["Trading Gain","Buy","Income","Mining","Lending Interest (Income)"],oi=["Trading Loss","Sell","Lending Interest (Cost)","Liquidation","Food","Shopping","Utilities"];let sl=Ae(()=>e(ms).filter(t=>{const v=t.category||"Uncategorized";return!!(ii.includes(v)&&t.amount_sats>0||v==="Gift"&&t.amount_sats>0)}).reduce((t,v)=>t+v.amount_sats,0)),rl=Ae(()=>Math.abs(e(ms).filter(t=>{const v=t.category||"Uncategorized";return!!(oi.includes(v)&&t.amount_sats<0||v==="Gift"&&t.amount_sats<0)}).reduce((t,v)=>t+v.amount_sats,0))),Ur=Ae(()=>e(sl)-e(rl)),vi=Ae(()=>e(ms).reduce((t,v)=>t+v.amount_sats,0)),zr=Ae(()=>{let t=0,v={};for(const d of e(Is))d.fee_sats&&d.fee_sats>0&&(t+=d.fee_sats),d.fee_fiat&&d.fee_fiat>0&&d.fee_fiat_currency&&(v[d.fee_fiat_currency]=(v[d.fee_fiat_currency]||0)+d.fee_fiat);return{btcFees:t,fiatFees:v}}),$l=Ae(()=>{const t={};for(const v of e(Is)){const d=v.currency||"BTC";d!=="BTC"&&(t[d]=(t[d]||0)+v.amount_sats)}for(const v in t)t[v]=t[v]/100;return t});const ci=["Buy","Income","Mining","Gift","Trading Gain","Lending Interest (Income)"],ui=["Sell","Food","Utilities","Shopping","Trading Loss","Liquidation"],di=["Transfer In","Transfer Out","Receive Loan","Repay Loan","Uncategorized"];let ss=Ae(()=>{if(!e(Xa))return{unrealized:{fiat:0,percent:0},realized:{fiat:0,percent:0},total:{fiat:0,percent:0},totalCostBasis:0,totalProceeds:0};const t=[...e(ms)].filter(A=>A.timestamp&&A.fiat_value!==null).sort((A,z)=>(A.timestamp??0)-(z.timestamp??0)),v=[],d=[];for(const A of t){const z=A.category||"Uncategorized";di.includes(z)||(A.amount_sats>0&&ci.includes(z)?v.push({sats:A.amount_sats,fiatValue:Math.abs(A.fiat_value),timestamp:A.timestamp}):A.amount_sats<0&&ui.includes(z)?d.push({sats:Math.abs(A.amount_sats),fiatValue:Math.abs(A.fiat_value),timestamp:A.timestamp}):A.amount_sats<0&&z==="Gift"?d.push({sats:Math.abs(A.amount_sats),fiatValue:Math.abs(A.fiat_value),timestamp:A.timestamp}):A.amount_sats>0&&z==="Gift"&&v.push({sats:A.amount_sats,fiatValue:Math.abs(A.fiat_value),timestamp:A.timestamp}))}let C=0,T=0,P=0,D=[...v];if(e(ur)==="fifo")for(const A of d){let z=A.sats;for(P+=A.fiatValue;z>0&&D.length>0;){const Z=D[0];if(Z.sats<=z){const se=Z.fiatValue,ce=Z.sats/A.sats,he=A.fiatValue*ce;C+=he-se,T+=se,z-=Z.sats,D.shift()}else{const se=z/Z.sats,ce=Z.fiatValue*se,he=z/A.sats,H=A.fiatValue*he;C+=H-ce,T+=ce,Z.sats-=z,Z.fiatValue-=ce,z=0}}}else{let A=v.reduce((H,Q)=>H+Q.sats,0),z=v.reduce((H,Q)=>H+Q.fiatValue,0);const Z=A>0?z/A:0;for(const H of d){const Q=H.sats*Z;C+=H.fiatValue-Q,T+=Q,P+=H.fiatValue}const se=d.reduce((H,Q)=>H+Q.sats,0),ce=A-se,he=ce*Z;D=ce>0?[{sats:ce,fiatValue:he,timestamp:0}]:[]}const W=D.reduce((A,z)=>A+z.sats,0),$=D.reduce((A,z)=>A+z.fiatValue,0),Y=W/1e8*e(Xa)-$,ie=$>0?Y/$*100:0,G=T>0?C/T*100:0,oe=Y+C,ve=$+T,De=ve>0?oe/ve*100:0;return{unrealized:{fiat:Y,percent:ie},realized:{fiat:C,percent:G},total:{fiat:oe,percent:De},totalCostBasis:ve,totalProceeds:P}}),Nl=Ae(()=>{const t=["#f7931a","#4ade80","#38bdf8","#a78bfa","#f472b6","#fb923c","#fbbf24","#60a5fa","#34d399","#f87171"];return il().map((v,d)=>({label:v.name,value:e(x)[v.id]??0,color:t[d%t.length]})).filter(v=>v.value>0).sort((v,d)=>d.value-v.value)}),Rl=Ae(()=>{if(e(ms).length===0)return[];const t=[...e(ms)].sort((T,P)=>(T.timestamp??0)-(P.timestamp??0)),v={};let d=0;for(const T of t){if(!T.timestamp)continue;const P=new Date(T.timestamp*1e3),D=`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}`;d+=T.amount_sats,v[D]=d}const C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return Object.entries(v).sort(([T],[P])=>T.localeCompare(P)).slice(-12).map(([T,P])=>{const[D,W]=T.split("-");return{label:`${C[parseInt(W)-1]} ${D.slice(2)}`,value:P}})}),_i=Ae(()=>{const t=["personal","family","business"],v={};for(const d of t){const T=e(R).filter(D=>D.entity_type===d).map(D=>{const W=e(J).filter(re=>re.entity_id===D.id).sort((re,Y)=>(e(x)[Y.id]??0)-(e(x)[re.id]??0)),$=W.reduce((re,Y)=>re+(e(x)[Y.id]??0),0);return{entity:D,wallets:W,totalBalance:$}}).sort((D,W)=>W.totalBalance-D.totalBalance),P=T.reduce((D,W)=>D+W.totalBalance,0);v[d]={totalBalance:P,entities:T}}return v});function Ul(t){return t.startsWith("manual-")?"manual":t.startsWith("lnm-futures-")?"lnm-fut":t.startsWith("lnm-options-")?"lnm-opt":t.startsWith("phoenix-")?"phoenix":t.startsWith("bitstack-")?"bitstack":t.startsWith("bull-")?"bull":t.slice(0,8)+"..."}function zl(t){return t.txid.startsWith("manual-")||t.txid.startsWith("lnm-")||t.txid.startsWith("phoenix-")||t.txid.startsWith("bitstack-")||t.txid.startsWith("bull-")?null:`https://mempool.space/tx/${t.txid}`}function pi(t){al[t]=!al[t]}function gi(t){tl[t]=!tl[t]}function Ol(t){return al[t]??!0}function Wl(t){return tl[t]??!0}function fi(t){l(Gs,t,!0),l(_s,!0)}function hi(t){switch(t){case"personal":return"Personal";case"family":return"Family";case"business":return"Business";default:return t}}function U(t,v="info"){l(Fe,t,!0),l(_e,v,!0),setTimeout(()=>{l(Fe,"")},3e3)}function ll(t){const v=e(Me)==="EUR"?"€":"$",d=t.fiat>=0?"+":"",C=d+v+Math.abs(t.fiat).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),T=d+t.percent.toFixed(1)+"%";return`${C} (${T})`}function xt(t,v=!1){const d=t>0&&v?"+":t<0?"-":"",C=Math.abs(t);return e(or)==="btc"?"₿ "+d+(C/1e8).toFixed(8):"丰 "+d+C.toLocaleString()}function mi(t,v=!1){const d=t.currency||"BTC";if(d==="BTC")return xt(t.amount_sats,v);{const C=t.amount_sats/100,T=C>0&&v?"+":C<0?"-":"";return(d==="EUR"?"€":"$")+" "+T+Math.abs(C).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}function Vl(t){return t?new Date(t*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Pending"}function bi(t){return t?new Date(t*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):""}function nl(){return e(te)!==null?e(x)[e(te)]??0:(e(ne)?e(J).filter(v=>v.entity_id===e(ne)):e(J)).reduce((v,d)=>v+(e(x)[d.id]??0),0)}function il(){return e(te)!==null?e(J).filter(t=>t.id===e(te)):e(ne)?e(J).filter(t=>t.entity_id===e(ne)):e(J)}function yi(){return e(R).filter(t=>t.entity_type==="personal"||t.entity_type==="family")}function Or(t){e(B)===t?l(q,e(q)==="asc"?"desc":"asc",!0):(l(B,t,!0),l(q,"asc"))}function Wr(t){return e(B)!==t?"":e(q)==="asc"?" ↑":" ↓"}function ql(){l(fe,null),l(ke,null)}function ol(t){return t.txid.startsWith("manual-")}function wi(t){l(el,t,!0),l(Bt,t.amount_sats>=0?"incoming":"outgoing",!0),l(ga,t.currency||"BTC",!0),e(ga)==="BTC"?l(qt,Math.abs(t.amount_sats).toString(),!0):l(qt,(Math.abs(t.amount_sats)/100).toString(),!0),l(ps,t.wallet_id,!0),l(Qt,t.category||"Uncategorized",!0),l(gs,t.note?`${t.note} (copy)`:"(copy)",!0),l(fs,t.timestamp?new Date(t.timestamp*1e3).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],!0),l(es,t.fiat_value?Math.abs(t.fiat_value).toString():"",!0),l(as,t.fee_sats?t.fee_sats.toString():"",!0),l(ts,t.fee_fiat?t.fee_fiat.toString():"",!0),l(Nr,!0)}async function ki(){await sn(),l(Nr,!1),l(el,null)}function Hl(){l(Nr,!1),l(el,null),l(qt,""),l(gs,""),l(es,""),l(Qt,"Uncategorized"),l(fs,new Date().toISOString().split("T")[0],!0),l(ga,"BTC"),l(as,""),l(ts,"")}function xi(t){return t===null?"—":(e(Me)==="EUR"?"€ ":"$ ")+Math.abs(t).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function Vr(t){if(!e(Xa))return"";const d=t/1e8*e(Xa);return(e(Me)==="EUR"?"€":"$")+d.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function qr(){if(!e(Xa)||!e(hs))return null;const t=e(Xa)-e(hs),v=t/e(hs)*100;return{value:t,percent:v}}function Ci(){const t=qr();if(!t)return"";const v=e(Me)==="EUR"?"€":"$",d=t.value>=0?"+":"";return`${d}${v}${Math.abs(t.value).toFixed(0)} (${d}${t.percent.toFixed(2)}%)`}function Ti(t){return new Date(t*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}async function dr(){try{l(R,await le("get_entities"),!0)}catch(t){U(`${t}`,"error")}}async function Ms(){try{l(J,await le("get_wallets"),!0),await js()}catch(t){U(`${t}`,"error")}}async function js(){try{l(x,await le("get_wallet_balances"),!0)}catch(t){console.error("Failed to load balances:",t)}}async function Gl(){try{const t=await le("get_setting",{key:"currency_format"});t&&l(or,t,!0)}catch(t){console.error("Failed to load settings:",t)}}async function _r(){try{l(g,await le("get_categories"),!0)}catch(t){console.error("Failed to load categories:",t),l(g,[{id:1,name:"Uncategorized",is_system:!0},{id:2,name:"Buy",is_system:!0},{id:3,name:"Sell",is_system:!0},{id:4,name:"Transfer In",is_system:!0},{id:5,name:"Transfer Out",is_system:!0}],!0)}}async function Yl(){if(!e(w).trim()){U("Please enter a category name","error");return}try{await le("add_category",{name:e(w).trim()}),U(`Category "${e(w)}" added`,"success"),l(w,""),l(f,!1),await _r()}catch(t){U(`${t}`,"error")}}function Si(t){if(t.is_system){U("Cannot edit system categories","error");return}l(M,t,!0),l(N,t.name,!0),l(m,!0)}async function jl(){if(!e(M)||!e(N).trim()){U("Please enter a category name","error");return}try{await le("update_category",{id:e(M).id,name:e(N).trim()}),U("Category updated","success"),l(m,!1),l(M,null),await _r(),await Pt()}catch(t){U(`${t}`,"error")}}function Ei(t){if(t.is_system){U("Cannot delete system categories","error");return}l(F,t,!0),l(X,!0)}async function Fi(){if(e(F))try{await le("delete_category",{id:e(F).id}),U("Category deleted","success"),l(X,!1),l(F,null),await _r(),await Pt()}catch(t){U(`${t}`,"error")}}async function Jl(t){l(or,t,!0);try{await le("set_setting",{key:"currency_format",value:t})}catch(v){U(`${v}`,"error")}}async function Kl(){try{const t=await le("get_setting",{key:"fiat_enabled"});l(Ka,t==="true");const v=await le("get_setting",{key:"fiat_currency"});(v==="USD"||v==="EUR")&&l(Me,v,!0);const d=await le("get_setting",{key:"cost_basis_method"});(d==="average"||d==="fifo")&&l(ur,d,!0)}catch(t){console.error("Failed to load fiat settings:",t)}}async function Xl(t){l(ur,t,!0);try{await le("set_setting",{key:"cost_basis_method",value:t}),U(`Cost basis method set to ${t==="average"?"Average Cost":"FIFO"}`,"success")}catch(v){U(`${v}`,"error")}}async function Di(t){l(Ka,t,!0);try{await le("set_setting",{key:"fiat_enabled",value:t?"true":"false"}),t&&!e(Xa)&&await pr()}catch(v){U(`${v}`,"error")}}async function Zl(t){if(t===e(Me))return;e(S).filter(d=>d.fiat_value!==null).length>0?(l(Ss,t,!0),l(Fr,!0)):await vl(t,!1)}async function vl(t,v){const d=e(Me);l(Me,t,!0),l(Xa,null),l(hs,null),l(Fr,!1),l(Ss,null);try{await le("set_setting",{key:"fiat_currency",value:t}),await pr(),v&&(await Ai(),await Pt(),await cl()),U(`Currency changed to ${t}`,"success")}catch(C){l(Me,d,!0),U(`Failed to change currency: ${C}`,"error")}}async function Ai(){for(const t of e(S))if(t.fiat_value!==null)try{await le("update_transaction_fiat",{id:t.id,fiatValue:null,fiatCurrency:null})}catch(v){console.error("Failed to clear fiat value:",v)}}function Ql(){l(Fr,!1),l(Ss,null)}async function pr(){l(Pr,!0);try{const t=await le("fetch_current_price",{currency:e(Me).toLowerCase()});l(Xa,t,!0),l(cr,new Date,!0),await le("cache_price",{currency:e(Me),price:t,date:"current"}),await Ii(),U(`Price updated: ${e(Me)==="EUR"?"€":"$"}${t.toLocaleString()}`,"success")}catch(t){U(`Failed to fetch price: ${t}`,"error")}l(Pr,!1)}async function Ii(){try{const t=new Date,v=`${String(t.getDate()).padStart(2,"0")}-${String(t.getMonth()+1).padStart(2,"0")}-${t.getFullYear()}`,d=`${e(Me)}-dayopen`,C=await le("get_cached_price",{currency:e(Me),date:d});if(C){l(hs,C,!0);return}const T=await le("fetch_historical_price",{currency:e(Me).toLowerCase(),date:v});l(hs,T,!0),await le("cache_price",{currency:e(Me),price:T,date:d})}catch(t){console.error("Failed to fetch day open price:",t),l(hs,null)}}async function en(){try{const t=await le("get_cached_price",{currency:e(Me),date:"current"});t&&l(Xa,t,!0);const v=`${e(Me)}-dayopen`,d=await le("get_cached_price",{currency:e(Me),date:v});d&&l(hs,d,!0)}catch(t){console.error("Failed to load cached price:",t)}}async function Mi(t){const v=new Date(t*1e3),d=`${String(v.getDate()).padStart(2,"0")}-${String(v.getMonth()+1).padStart(2,"0")}-${v.getFullYear()}`;try{const T=await le("get_cached_price",{currency:e(Me),date:d});if(T)return T}catch(T){console.error("Cache check failed:",T)}const C=await le("fetch_historical_price",{currency:e(Me).toLowerCase(),date:d});return await le("cache_price",{currency:e(Me),price:C,date:d}),C}async function cl(){const t=e(S).filter(D=>D.fiat_value===null&&D.timestamp&&(D.currency||"BTC")==="BTC");if(t.length===0){U("All transactions have fiat values","info");return}l($r,!0),U(`Fetching fiat values for ${t.length} transactions...`,"info");const v={};for(const D of t){if(!D.timestamp)continue;const W=new Date(D.timestamp*1e3),$=`${W.getFullYear()}-${W.getMonth()+1}-${W.getDate()}`;v[$]||(v[$]=[]),v[$].push(D)}const d=Object.entries(v);let C=0,T=d.length,P=0;for(const[D,W]of d){const $=W[0];if(!$.timestamp)continue;let re=null,Y=0;const ie=5;for(;re===null&&Y<ie;)try{if(re=await Mi($.timestamp),re===null&&(Y++,Y<ie)){const G=5e3*Math.pow(2,Y-1);U(`Rate limited. Waiting ${G/1e3}s before retry (${Y}/${ie})...`,"info"),await new Promise(oe=>setTimeout(oe,G))}}catch(G){const oe=String(G).toLowerCase();if(oe.includes("429")||oe.includes("rate")||oe.includes("limit")||oe.includes("too many"))if(Y++,Y<ie){const ve=1e4*Math.pow(2,Y-1);U(`Rate limited. Waiting ${ve/1e3}s before retry (${Y}/${ie})...`,"info"),await new Promise(De=>setTimeout(De,ve))}else console.error(`Failed to fetch price after ${ie} retries:`,G);else{console.error("Failed to fetch price:",G);break}}if(re===null){console.warn(`Skipping date ${D} after ${Y} retries`),P++;continue}for(const G of W){const ve=Math.abs(G.amount_sats)/1e8*re;try{await le("update_transaction_fiat",{id:G.id,fiatValue:G.amount_sats>=0?ve:-ve,fiatCurrency:e(Me)}),G.fiat_value=G.amount_sats>=0?ve:-ve,G.fiat_currency=e(Me),C++}catch(De){console.error("Failed to update tx fiat:",De)}}P++,P%5===0&&U(`Progress: ${P}/${T} dates processed (${C} transactions updated)`,"info"),await new Promise(G=>setTimeout(G,3e3))}l($r,!1),C>0?U(`Done! Updated fiat values for ${C} transactions`,"success"):U("No fiat values could be fetched. API may be unavailable.","error")}function Li(){var t;l(Ot,"upload"),l(Vs,null),l(qs,((t=e(J)[0])==null?void 0:t.id)||0,!0),l(Xr,""),l(Wt,[],!0),l(Lt,[],!0),l(Ts,[],!0),l(Vt,null),l(Kr,!0)}async function Bi(t){const v=t.target;if(!v.files||v.files.length===0)return;l(Vs,v.files[0],!0);const d=await e(Vs).text(),{headers:C,rows:T}=Kv(d);if(C.length===0){l(Lt,["Could not parse CSV file"],!0);return}const P=Xv(C);if(!P){l(Lt,["Unknown CSV format. Supported formats: Phoenix, Bitstack, Bull Bitcoin"],!0);return}l(Xr,P.name,!0);const D=P.parse(C,T);l(Wt,D.transactions,!0),l(Lt,D.errors,!0),l(Ts,D.warnings,!0),l(Ot,"preview")}async function Pi(){if(!(!e(qs)||e(Wt).length===0)){l(Ot,"importing");try{const t=e(Wt).map(d=>({id:d.id,timestamp:d.timestamp,amount_sats:d.amount_sats,fee_sats:d.fee_sats,fee_fiat:d.fee_fiat,fee_fiat_currency:d.fee_fiat_currency,category:d.category==="Uncategorized"?null:d.category,note:d.note||null,fiat_value:d.fiat_value,fiat_currency:d.fiat_currency,currency:d.currency})),v=await le("import_transactions",{walletId:e(qs),transactions:t});l(Vt,v,!0),l(Ot,"done"),await Pt(),await js()}catch(t){l(Lt,[`Import failed: ${t}`],!0),l(Ot,"preview")}}}function ul(){l(Kr,!1),l(Ot,"upload"),l(Vs,null),l(Wt,[],!0),l(Lt,[],!0),l(Ts,[],!0),l(Vt,null)}async function Pt(){l(Qr,!0);try{l(S,await le("get_all_transactions",{entityId:e(ne)}),!0)}catch(t){U(`${t}`,"error")}l(Qr,!1)}async function $i(){if(!e(As).trim()){U("Please enter a name","error");return}try{e(zs)==="family"?await le("add_family_member",{name:e(As).trim()}):await le("add_business",{name:e(As).trim(),parentId:e(Mr)}),U(`Added "${e(As)}"`,"success"),l(As,""),l(Mr,null),l(Us,!1),await dr()}catch(t){U(`${t}`,"error")}}function an(t){l(Cs,t,!0),l(Sr,!0)}async function Ni(){if(e(Cs))try{await le("delete_entity",{id:e(Cs).id}),U("Deleted","success"),e(ne)===e(Cs).id&&l(ne,null),l(Sr,!1),l(Cs,null),await dr(),await Ms()}catch(t){U(`${t}`,"error")}}async function Ri(){if(!e(nr)){U("Please enter a wallet name","error");return}if(!e(ee)&&!e(ir)){U("Please enter an extended public key or select Manual","error");return}try{await le("add_wallet",{name:e(nr),xpub:e(ee)?null:e(ir),walletType:e(ee)?"manual":e(Zr),entityId:e(Gs)}),U("Wallet added","success"),l(nr,""),l(ir,""),l(ee,!1),l(_s,!1),await Ms()}catch(t){U(`${t}`,"error")}}function dl(t){l(Os,t,!0),l(Tr,!0)}async function Ui(){if(e(Os))try{await le("delete_wallet",{id:e(Os).id}),U("Wallet deleted","success"),l(Tr,!1),l(Os,null),await Ms(),await Pt()}catch(t){U(`${t}`,"error")}}function _l(t){l(Ws,t,!0),l(Qs,t.name,!0),l(Er,t.entity_id,!0),l(Zs,!0)}async function zi(){if(!e(Ws)||!e(Qs).trim()){U("Please enter a name","error");return}try{await le("update_wallet",{id:e(Ws).id,name:e(Qs).trim(),entityId:e(Er)}),U("Wallet updated","success"),l(Zs,!1),l(Ws,null),await Ms()}catch(t){U(`${t}`,"error")}}async function tn(t){l(Ys,t.id,!0);try{const v=await le("fetch_wallet_transactions",{xpub:t.xpub});await le("save_transactions",{walletId:t.id,transactions:v}),U(`Synced ${v.length} transactions`,"success"),await Pt(),await js(),e(Ka)&&await cl()}catch(v){U(`${v}`,"error")}l(Ys,null)}async function Oi(t,v){try{await le("update_transaction",{id:t.id,category:v==="Uncategorized"?null:v,note:t.note}),t.category=v==="Uncategorized"?null:v}catch(d){U(`${d}`,"error")}}async function Wi(t,v){try{await le("update_transaction",{id:t.id,category:t.category,note:v||null}),t.note=v||null}catch(d){U(`${d}`,"error")}}async function sn(){if(!e(qt)||!e(ps)){U("Please fill in amount and select a wallet","error");return}const t=parseFloat(e(qt));if(isNaN(t)||t<=0){U("Please enter a valid amount","error");return}let v;e(ga)==="BTC"?v=Math.round(t*(e(qt).includes(".")?1e8:1)):v=Math.round(t*100);const d=e(Bt)==="outgoing"?-v:v,C=Math.floor(new Date(e(fs)).getTime()/1e3);let T=null;if(e(es)){const $=parseFloat(e(es));isNaN($)||(T=e(Bt)==="outgoing"?-$:$)}let P=null,D=null,W=null;if(e(as)){const $=parseFloat(e(as));!isNaN($)&&$>0&&(P=Math.round($))}if(e(ts)){const $=parseFloat(e(ts));!isNaN($)&&$>0&&(D=$,W=e(Me))}try{await le("add_manual_transaction",{walletId:e(ps),amountSats:d,timestamp:C,category:e(Qt)==="Uncategorized"?null:e(Qt),note:e(gs)||null,fiatValue:T,fiatCurrency:T?e(Me):null,currency:e(ga),feeSats:P,feeFiat:D,feeFiatCurrency:W}),U("Transaction added","success"),l(er,!1),l(qt,""),l(gs,""),l(es,""),l(Qt,"Uncategorized"),l(fs,new Date().toISOString().split("T")[0],!0),l(ga,"BTC"),l(as,""),l(ts,""),await Pt(),await js()}catch($){U(`${$}`,"error")}}function Vi(t){if(!ol(t)){U("Only manual transactions can be edited","error");return}l(Hs,t,!0),l(Es,t.amount_sats>=0?"incoming":"outgoing",!0),l(kt,t.currency||"BTC",!0),e(kt)==="BTC"?l(Fs,Math.abs(t.amount_sats).toString(),!0):l(Fs,(Math.abs(t.amount_sats)/100).toString(),!0),l(tr,t.category||"Uncategorized",!0),l(Dr,t.note||"",!0),l(Ar,t.timestamp?new Date(t.timestamp*1e3).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],!0),l(sr,t.fiat_value?Math.abs(t.fiat_value).toString():"",!0),l(rr,t.fee_sats?t.fee_sats.toString():"",!0),l(lr,t.fee_fiat?t.fee_fiat.toString():"",!0),l(ar,!0)}async function qi(){if(!e(Hs)||!e(Fs)){U("Please fill in amount","error");return}const t=parseFloat(e(Fs));if(isNaN(t)||t<=0){U("Please enter a valid amount","error");return}let v;e(kt)==="BTC"?v=Math.round(t*(e(Fs).includes(".")?1e8:1)):v=Math.round(t*100);const d=e(Es)==="outgoing"?-v:v,C=Math.floor(new Date(e(Ar)).getTime()/1e3);let T=null;if(e(sr)){const $=parseFloat(e(sr));isNaN($)||(T=e(Es)==="outgoing"?-$:$)}let P=null,D=null,W=null;if(e(rr)){const $=parseFloat(e(rr));!isNaN($)&&$>0&&(P=Math.round($))}if(e(lr)){const $=parseFloat(e(lr));!isNaN($)&&$>0&&(D=$,W=e(Me))}try{await le("update_manual_transaction",{id:e(Hs).id,amountSats:d,timestamp:C,category:e(tr)==="Uncategorized"?null:e(tr),note:e(Dr)||null,fiatValue:T,fiatCurrency:T?e(Me):null,currency:e(kt),feeSats:P,feeFiat:D,feeFiatCurrency:W}),U("Transaction updated","success"),l(ar,!1),l(Hs,null),await Pt(),await js()}catch($){U(`${$}`,"error")}}function Hi(t){if(!ol(t)){U("Only manual transactions can be deleted","error");return}l(Ds,t,!0),l(Ir,!0)}async function Gi(){if(e(Ds))try{await le("delete_transaction",{id:e(Ds).id}),U("Transaction deleted","success"),l(Ir,!1),l(Ds,null),await Pt(),await js()}catch(t){U(`${t}`,"error")}}async function rn(){try{const t=await le("get_setting",{key:"theme"});(t==="light"||t==="dark")&&(l(vr,t,!0),ln(e(vr)))}catch(t){console.error("Failed to load theme:",t)}}function ln(t){document.documentElement.setAttribute("data-theme",t)}async function nn(t){l(vr,t,!0),ln(t);try{await le("set_setting",{key:"theme",value:t})}catch(v){U(`${v}`,"error")}}async function Yi(){l(Lr,!0);try{const t=[["Date","Amount (sats)","Currency","Fiat Value","Fiat Currency","Fee (sats)","Fee (fiat)","Fee Currency","Category","Note","Wallet","Owner","TxID"].join(",")];for(const P of e(S)){const W=[P.timestamp?new Date(P.timestamp*1e3).toISOString():"",P.amount_sats,P.currency||"BTC",P.fiat_value??"",P.fiat_currency??"",P.fee_sats??"",P.fee_fiat??"",P.fee_fiat_currency??"",P.category??"",`"${(P.note||"").replace(/"/g,'""')}"`,P.wallet_name,P.owner_name,P.txid].join(",");t.push(W)}const v=t.join(`
`),d=new Blob([v],{type:"text/csv"}),C=URL.createObjectURL(d),T=document.createElement("a");T.href=C,T.download=`satstone-export-${new Date().toISOString().split("T")[0]}.csv`,T.click(),URL.revokeObjectURL(C),U("Data exported successfully","success")}catch(t){U(`Export failed: ${t}`,"error")}l(Lr,!1)}async function ji(){try{const t=await fetch("https://api.github.com/repos/Sat-Stone/BitCounting/releases/latest");if(!t.ok)return;const d=(await t.json()).tag_name.replace("v","");Ji(d,p)&&(l(_,d,!0),l(c,!0))}catch(t){console.error("Failed to check for updates:",t)}}function Ji(t,v){const d=t.split(".").map(Number),C=v.split(".").map(Number);for(let T=0;T<3;T++){if((d[T]||0)>(C[T]||0))return!0;if((d[T]||0)<(C[T]||0))return!1}return!1}function Ki(){window.open("https://github.com/Sat-Stone/BitCounting/releases/latest","_blank")}function Xi(){l(c,!1)}async function Zi(){l(Ie,!0);try{await le("check_db_exists")?(l(xe,await le("check_db_encrypted"),!0),l(K,e(xe),!0)):(l(xe,!1),l(K,!1))}catch(t){console.error("Failed to check encryption status:",t),l(xe,!1),l(K,!1)}l(Ie,!1)}async function on(){if(!e(aa)){l(Xe,"Please enter your passphrase");return}l(Xe,"");try{await le("unlock_with_passphrase",{passphrase:e(aa)}),l(K,!1),l(aa,""),l(xr,Date.now(),!0)}catch{l(Xe,"Invalid passphrase. Please try again.")}}async function Qi(){if(!e(ft).trim()){l(Xe,"Please enter your recovery phrase");return}l(Xe,"");const t=e(ft).toLowerCase().trim().replace(/[\n\r,]+/g," ").replace(/\s+/g," ").replace(/[0-9]+\.\s*/g,"").trim();console.log("Normalized recovery phrase:",t),console.log("Word count:",t.split(" ").length);try{const v=await le("validate_recovery_phrase",{phrase:t});if(console.log("Validation result:",v),!v){l(Xe,"Invalid recovery phrase format. Please check spelling.");return}await le("unlock_with_recovery",{recoveryPhrase:t}),l(K,!1),l(ft,""),l(xr,Date.now(),!0)}catch(v){console.error("Unlock error:",v),l(Xe,`Failed to unlock: ${v}`)}}async function eo(){l(ks,"passphrase"),l(ht,""),l(mt,""),l(zt,""),l(ws,!1),l(ct,null),l(Qa,!0)}async function ao(){try{l(zt,await le("generate_recovery_phrase"),!0),l(ks,"recovery")}catch(t){U(`Failed to generate recovery phrase: ${t}`,"error")}}async function to(t){if(!t){l(ct,null);return}try{l(ct,await le("check_password_strength",{password:t}),!0)}catch(v){console.error("Failed to check password strength:",v)}}async function so(t){if(!t){l(vt,null);return}try{l(vt,await le("check_password_strength",{password:t}),!0)}catch(v){console.error("Failed to check password strength:",v)}}async function ro(){if(e(ht)!==e(mt)){U("Passphrases do not match","error");return}if(!e(ws)){U("Please confirm you have saved your recovery phrase","error");return}const t=e(zt).toLowerCase().trim().replace(/\s+/g," ");try{await le("encrypt_database",{passphrase:e(ht),recoveryPhrase:t}),U("Database encrypted successfully!","success"),l(xe,!0),l(Qa,!1),l(ht,""),l(mt,""),l(zt,""),l(ws,!1),l(ks,"passphrase")}catch(v){U(`Encryption failed: ${v}`,"error")}}function vn(){l(Qa,!1),l(ht,""),l(mt,""),l(zt,""),l(ws,!1),l(ks,"passphrase"),l(ct,null)}async function lo(){if(!e(us)||!e(Mt)||!e(jt)){U("Please fill in all fields","error");return}if(e(Mt)!==e(jt)){U("New passphrases do not match","error");return}try{await le("change_passphrase",{oldPassphrase:e(us),newPassphrase:e(Mt)}),U("Passphrase changed successfully!","success"),l(Ks,!1),l(us,""),l(Mt,""),l(jt,""),l(vt,null)}catch(t){U(`Failed to change passphrase: ${t}`,"error")}}async function no(){if(!e(ds)){U("Please enter your passphrase","error");return}try{await le("remove_encryption",{passphrase:e(ds)}),U("Encryption removed successfully","success"),l(xe,!1),l(Xs,!1),l(ds,"")}catch(t){U(`Failed to remove encryption: ${t}`,"error")}}function io(){navigator.clipboard.writeText(e(zt)),U("Recovery phrase copied to clipboard","success")}async function cn(){try{const t=await le("get_setting",{key:"auto_lock"});t&&l(xs,t,!0)}catch(t){console.error("Failed to load auto-lock setting:",t)}}async function oo(t){l(xs,t,!0);try{await le("set_setting",{key:"auto_lock",value:t})}catch(v){U(`Failed to save setting: ${v}`,"error")}pl()}function pl(){if(Cr&&(clearInterval(Cr),Cr=null),e(xs)==="never"||!e(xe))return;const t=parseInt(e(xs))*60*1e3;Cr=setInterval(()=>{Date.now()-e(xr)>t&&!e(K)&&(l(K,!0),U("App locked due to inactivity","info"))},1e4)}function vo(){l(xr,Date.now(),!0)}function co(){["mousedown","keydown","scroll","touchstart"].forEach(v=>{document.addEventListener(v,vo,{passive:!0})})}async function uo(){try{await le("reset_all_data"),U("All data has been reset","success"),l(Br,!1),await dr(),await Ms(),await Pt()}catch(t){U(`Reset failed: ${t}`,"error")}}mr(()=>{e(ne),l(te,null),Pt()}),mr(()=>{e(te),Pt()}),mr(()=>{const t=setInterval(()=>{},3e4);return()=>clearInterval(t)}),mr(()=>{!e(K)&&!e(Ie)&&(dr(),Ms(),_r(),Gl(),rn(),cn().then(()=>pl()),Kl().then(()=>{en().then(()=>{e(Ka)&&pr()})}),ji())}),Zi().then(()=>{e(K)||(dr(),Ms(),_r(),Gl(),rn(),cn().then(()=>pl()),Kl().then(()=>{en().then(()=>{e(Ka)&&pr()})}))}),co();var un=Vd(),gl=ue(un),_o=s(gl);{var po=t=>{var v=Zv();i(t,v)},go=t=>{var v=Ra(),d=ue(v);{var C=P=>{var D=rc(),W=s(D),$=r(s(W),6),re=s($);let Y;re.__click=()=>{l(xa,"passphrase"),l(Xe,"")};var ie=r(re,2);let G;ie.__click=()=>{l(xa,"recovery"),l(Xe,"")},a($);var oe=r($,2);{var ve=H=>{var Q=Qv(),be=s(Q);Ke(be),be.__keydown=ta=>ta.key==="Enter"&&on();var He=r(be,2);He.__click=on,a(Q),ea(be,()=>e(aa),ta=>l(aa,ta)),i(H,Q)},De=H=>{var Q=ec(),be=s(Q);Jo(be);var He=r(be,2);He.__click=Qi,a(Q),ea(be,()=>e(ft),ta=>l(ft,ta)),i(H,Q)};k(oe,H=>{e(xa)==="passphrase"?H(ve):H(De,!1)})}var A=r(oe,2);{var z=H=>{var Q=ac(),be=s(Q,!0);a(Q),b(()=>h(be,e(Xe))),i(H,Q)};k(A,H=>{e(Xe)&&H(z)})}var Z=r(A,2),se=s(Z);{var ce=H=>{var Q=tc(),be=r(ue(Q));be.__click=()=>l(xa,"recovery"),i(H,Q)},he=H=>{var Q=sc(),be=r(ue(Q));be.__click=()=>l(xa,"passphrase"),i(H,Q)};k(se,H=>{e(xa)==="passphrase"?H(ce):H(he,!1)})}a(Z),a(W),a(D),b(()=>{Y=ae(re,1,"unlock-tab svelte-1uha8ag",null,Y,{active:e(xa)==="passphrase"}),G=ae(ie,1,"unlock-tab svelte-1uha8ag",null,G,{active:e(xa)==="recovery"})}),i(P,D)},T=P=>{var D=Wu(),W=ue(D);{var $=I=>{var V=lc(),de=s(V),je=s(de);a(de);var la=r(de,2);la.__click=Ki;var _t=r(la,2);_t.__click=Xi,a(V),b(()=>h(je,`🎉 BitCounting v${e(_)??""} is available!`)),i(I,V)};k(W,I=>{e(c)&&I($)})}var re=r(W,2),Y=s(re),ie=s(Y),G=s(ie);On(G),rt(2),a(ie),a(Y);var oe=r(Y,2),ve=s(oe);zn(ve,{get options(){return e(ti)},placeholder:"All accounts",get value(){return e(ne)},set value(I){l(ne,I,!0)}});var De=r(ve,2);zn(De,{get options(){return e(si)},placeholder:"All wallets",get value(){return e(te)},set value(I){l(te,I,!0)}}),a(oe);var A=r(oe,2),z=s(A),Z=r(s(z),2),se=s(Z,!0);a(Z);var ce=r(Z,2);{var he=I=>{var V=nc(),de=s(V,!0);a(V),b(je=>h(de,je),[()=>Vr(nl())]),i(I,V)};k(ce,I=>{e(Ka)&&e(Xa)&&I(he)})}a(z);var H=r(z,2);{var Q=I=>{var V=oc(),de=s(V),je=s(de);a(de);var la=r(de,2),_t=s(la);{var $t=ha=>{var Ze=ot();b(ma=>h(Ze,`${e(Me)==="EUR"?"€":"$"}${ma??""}`),[()=>e(Xa).toLocaleString()]),i(ha,Ze)},pt=ha=>{var Ze=ot("—");i(ha,Ze)};k(_t,ha=>{e(Xa)?ha($t):ha(pt,!1)})}a(la);var et=r(la,2),bt=s(et);{var Ct=ha=>{var Ze=ic();let ma;var tt=s(Ze,!0);a(Ze),b((Je,Ta)=>{ma=ae(Ze,1,"svelte-1uha8ag",null,ma,Je),h(tt,Ta)},[()=>{var Je,Ta;return{positive:((Je=qr())==null?void 0:Je.value)??!0,negative:((Ta=qr())==null?void 0:Ta.value)??!1}},Ci]),i(ha,Ze)},at=ha=>{var Ze=Ra(),ma=ue(Ze);{var tt=Ta=>{var yt=ot();b(St=>h(yt,St),[()=>e(cr).toLocaleTimeString()]),i(Ta,yt)},Je=Ta=>{var yt=ot("—");i(Ta,yt)};k(ma,Ta=>{e(cr)?Ta(tt):Ta(Je,!1)},!0)}i(ha,Ze)};k(bt,ha=>{qr()?ha(Ct):ha(at,!1)})}a(et),a(V),b(()=>h(je,`BTC / ${e(Me)??""}`)),i(I,V)};k(H,I=>{e(Ka)&&I(Q)})}var be=r(H,2);let He;be.__click=pr;var ta=s(be);Tl(ta,{size:16}),a(be),a(A),a(re);var Ma=r(re,2),La=s(Ma);let Ca;La.__click=()=>l(ge,"dashboard");var Wa=r(La,2);let Va;Wa.__click=()=>l(ge,"wallets");var lt=r(Wa,2);let ut;lt.__click=()=>l(ge,"transactions");var ua=r(lt,2);let sa;ua.__click=()=>l(ge,"settings"),a(Ma);var Ge=r(Ma,2);{var ze=I=>{var V=vc(),de=s(V,!0);a(V),b(()=>{ae(V,1,`toast ${e(_e)??""}`,"svelte-1uha8ag"),h(de,e(Fe))}),i(I,V)};k(Ge,I=>{e(Fe)&&I(ze)})}var da=r(Ge,2),nt=s(da);{var dt=I=>{var V=Lc(),de=ue(V),je=r(s(de),2),la=s(je),_t=s(la);_t.value=(_t.__value=null)??"";var $t=r(_t);Ee($t,17,()=>e(Ll),Se,(E,O)=>{var pe=cc(),Be=s(pe,!0);a(pe);var ka={};b(()=>{h(Be,e(O)),ka!==(ka=e(O))&&(pe.value=(pe.__value=e(O))??"")}),i(E,pe)}),a(la);var pt=r(la,2),et=s(pt);et.value=(et.__value=null)??"";var bt=r(et);Ee(bt,17,()=>L,Se,(E,O)=>{var pe=uc(),Be=s(pe,!0);a(pe);var ka={};b(()=>{h(Be,e(O).label),ka!==(ka=e(O).value)&&(pe.value=(pe.__value=e(O).value)??"")}),i(E,pe)}),a(pt);var Ct=r(pt,2);{var at=E=>{var O=dc();O.__click=ql,i(E,O)};k(Ct,E=>{(e(fe)!==null||e(ke)!==null)&&E(at)})}a(je),a(de);var ha=r(de,2),Ze=s(ha),ma=s(Ze),tt=s(ma,!0);a(ma);var Je=r(ma,2),Ta=s(Je,!0);a(Je);var yt=r(Je,2);{var St=E=>{var O=pc();Ee(O,21,()=>Object.entries(e($l)),Se,(pe,Be)=>{var ka=Ae(()=>$n(e(Be),2));let Yt=()=>e(ka)[0],is=()=>e(ka)[1];var Zt=_c();let Bs;var gr=s(Zt);a(Zt),b(fr=>{Bs=ae(Zt,1,"fiat-holding svelte-1uha8ag",null,Bs,{positive:is()>=0,negative:is()<0}),h(gr,`${Yt()==="EUR"?"€":"$"}${fr??""}`)},[()=>is().toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]),i(pe,Zt)}),a(O),i(E,O)};k(yt,E=>{Object.keys(e($l)).length>0&&E(St)})}a(Ze);var Ht=r(Ze,2),qe=r(s(Ht),2),ba=s(qe,!0);a(qe);var na=r(qe,2);{var qa=E=>{var O=gc(),pe=s(O,!0);a(O),b(Be=>h(pe,Be),[()=>Vr(e(sl))]),i(E,O)};k(na,E=>{e(Ka)&&e(Xa)&&E(qa)})}a(Ht);var Ha=r(Ht,2),Sa=r(s(Ha),2),Ua=s(Sa,!0);a(Sa);var ya=r(Sa,2);{var Ga=E=>{var O=fc(),pe=s(O,!0);a(O),b(Be=>h(pe,Be),[()=>Vr(e(rl))]),i(E,O)};k(ya,E=>{e(Ka)&&e(Xa)&&E(Ga)})}a(Ha);var za=r(Ha,2),wa=r(s(za),2);let Ea;var Fa=s(wa,!0);a(wa);var Ya=r(wa,2);{var it=E=>{var O=hc(),pe=s(O,!0);a(O),b(Be=>h(pe,Be),[()=>Vr(e(Ur))]),i(E,O)};k(Ya,E=>{e(Ka)&&e(Xa)&&E(it)})}a(za),a(ha);var ra=r(ha,2),va=s(ra),$a=r(s(va),2);{var Na=E=>{var O=mc();let pe;var Be=s(O,!0);a(O),b(ka=>{pe=ae(O,1,"stat-value svelte-1uha8ag",null,pe,{positive:e(ss).realized.fiat>=0,negative:e(ss).realized.fiat<0}),h(Be,ka)},[()=>ll(e(ss).realized)]),i(E,O)},Oe=E=>{var O=bc();i(E,O)};k($a,E=>{e(Ka)&&e(Xa)?E(Na):E(Oe,!1)})}a(va);var Pe=r(va,2),j=r(s(Pe),2);{var Te=E=>{var O=yc();let pe;var Be=s(O,!0);a(O),b(ka=>{pe=ae(O,1,"stat-value svelte-1uha8ag",null,pe,{positive:e(ss).unrealized.fiat>=0,negative:e(ss).unrealized.fiat<0}),h(Be,ka)},[()=>ll(e(ss).unrealized)]),i(E,O)},Qe=E=>{var O=wc();i(E,O)};k(j,E=>{e(Ka)&&e(Xa)?E(Te):E(Qe,!1)})}a(Pe);var $e=r(Pe,2),we=r(s($e),2),Ne=s(we);{var We=E=>{var O=ot();b(pe=>h(O,pe),[()=>xt(e(zr).btcFees)]),i(E,O)},_a=E=>{var O=ot("—");i(E,O)};k(Ne,E=>{e(zr).btcFees>0?E(We):E(_a,!1)})}a(we);var Re=r(we,2);{var ia=E=>{var O=xc();Ee(O,21,()=>Object.entries(e(zr).fiatFees),Se,(pe,Be)=>{var ka=Ae(()=>$n(e(Be),2));let Yt=()=>e(ka)[0],is=()=>e(ka)[1];var Zt=kc(),Bs=s(Zt);a(Zt),b(gr=>h(Bs,`${Yt()==="EUR"?"€":"$"}${gr??""}`),[()=>is().toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]),i(pe,Zt)}),a(O),i(E,O)};k(Re,E=>{Object.keys(e(zr).fiatFees).length>0&&E(ia)})}a($e);var oa=r($e,2),pa=r(s(oa),2);{var Ye=E=>{var O=Cc();let pe;var Be=s(O,!0);a(O),b(ka=>{pe=ae(O,1,"stat-value svelte-1uha8ag",null,pe,{positive:e(ss).total.fiat>=0,negative:e(ss).total.fiat<0}),h(Be,ka)},[()=>ll(e(ss).total)]),i(E,O)},st=E=>{var O=Tc();i(E,O)};k(pa,E=>{e(Ka)&&e(Xa)?E(Ye):E(st,!1)})}a(oa),a(ra);var Za=r(ra,2),gt=s(Za),Jt=r(s(gt),2);{var Nt=E=>{var O=Sc();i(E,O)},Aa=E=>{Iv(E,{get data(){return e(Pl)},height:200})};k(Jt,E=>{e(Pl).length===0?E(Nt):E(Aa,!1)})}a(gt);var ca=r(gt,2),Ia=r(s(ca),2);{var Gt=E=>{var O=Ec();i(E,O)},wt=E=>{Vn(E,{get data(){return e(Bl)},size:160})};k(Ia,E=>{e(Bl).length===0?E(Gt):E(wt,!1)})}a(ca),a(Za);var Et=r(Za,2),Dt=s(Et),Kt=r(s(Dt),2);{var rs=E=>{var O=Fc();i(E,O)},Xt=E=>{Vv(E,{get data(){return e(Rl)},height:200})};k(Kt,E=>{e(Rl).length===0?E(rs):E(Xt,!1)})}a(Dt);var Rt=r(Dt,2),ls=r(s(Rt),2);{var ns=E=>{var O=Dc();i(E,O)},Ls=E=>{Vn(E,{get data(){return e(Nl)},size:160})};k(ls,E=>{e(Nl).length===0?E(ns):E(Ls,!1)})}a(Rt),a(Et);var Le=r(Et,2),Ve=r(s(Le),2);{var Ue=E=>{var O=Ac();i(E,O)},Oa=E=>{var O=Mc();Ee(O,21,()=>e(Is).slice(0,5),Se,(pe,Be)=>{var ka=Ic(),Yt=s(ka),is=s(Yt),Zt=s(is,!0);a(is);var Bs=r(is,2),gr=s(Bs,!0);a(Bs),a(Yt);var fr=r(Yt,2);let Dn;var ho=s(fr,!0);a(fr),a(ka),b((mo,bo)=>{h(Zt,e(Be).category||"Uncategorized"),h(gr,mo),Dn=ae(fr,1,"recent-amount svelte-1uha8ag",null,Dn,{positive:e(Be).amount_sats>=0,negative:e(Be).amount_sats<0}),h(ho,bo)},[()=>Vl(e(Be).timestamp),()=>xt(e(Be).amount_sats,!0)]),i(pe,ka)}),a(O),i(E,O)};k(Ve,E=>{e(Is).length===0?E(Ue):E(Oa,!1)})}a(Le),b((E,O,pe,Be)=>{h(tt,e(fe)||e(ke)?"Period Balance":"Total Balance"),h(Ta,E),h(ba,O),h(Ua,pe),Ea=ae(wa,1,"stat-value svelte-1uha8ag",null,Ea,{positive:e(Ur)>=0,negative:e(Ur)<0}),h(Fa,Be)},[()=>xt(e(fe)||e(ke)?e(vi):nl()),()=>xt(e(sl)),()=>xt(e(rl)),()=>xt(e(Ur),!0)]),Tt(la,()=>e(fe),E=>l(fe,E)),Tt(pt,()=>e(ke),E=>l(ke,E)),i(I,V)};k(nt,I=>{e(ge)==="dashboard"&&I(dt)})}var fa=r(nt,2);{var Da=I=>{var V=Kc(),de=ue(V),je=r(s(de),2);je.__click=()=>l(_s,!0);var la=s(je);Ps(la,{size:18}),rt(),a(je),a(de);var _t=r(de,2);{var $t=et=>{var bt=Ra(),Ct=ue(bt);{var at=Ze=>{var ma=Bc(),tt=s(ma);Cl(tt,{size:48,color:"#333"});var Je=r(tt,4);Je.__click=()=>l(_s,!0),a(ma),i(Ze,ma)},ha=Ze=>{var ma=Rc();Ee(ma,21,il,Se,(tt,Je)=>{var Ta=Nc(),yt=s(Ta),St=s(yt),Ht=s(St);{var qe=Oe=>{Wn(Oe,{size:20,color:"#f7931a"})},ba=Oe=>{Cl(Oe,{size:20,color:"#f7931a"})};k(Ht,Oe=>{e(Je).owner_type==="business"?Oe(qe):Oe(ba,!1)})}a(St);var na=r(St,2),qa=s(na),Ha=s(qa,!0);a(qa);var Sa=r(qa,2),Ua=s(Sa,!0);a(Sa),a(na);var ya=r(na,2),Ga=s(ya);{var za=Oe=>{var Pe=Pc();Pe.__click=()=>tn(e(Je));var j=s(Pe);Tl(j,{size:16}),a(Pe),b(()=>Pe.disabled=e(Ys)===e(Je).id),i(Oe,Pe)};k(Ga,Oe=>{e(Je).wallet_type!=="manual"&&Oe(za)})}var wa=r(Ga,2);wa.__click=()=>_l(e(Je));var Ea=r(wa,2);Ea.__click=()=>dl(e(Je)),a(ya),a(yt);var Fa=r(yt,2),Ya=s(Fa),it=s(Ya,!0);a(Ya);var ra=r(Ya,2),va=s(ra,!0);a(ra),a(Fa);var $a=r(Fa,2);{var Na=Oe=>{var Pe=$c();i(Oe,Pe)};k($a,Oe=>{e(Ys)===e(Je).id&&Oe(Na)})}a(Ta),b(Oe=>{h(Ha,e(Je).name),h(Ua,e(Je).owner_name),h(it,Oe),h(va,e(Je).wallet_type==="manual"?"Manual":e(Je).wallet_type)},[()=>xt(e(x)[e(Je).id]??0)]),i(tt,Ta)}),a(ma),i(Ze,ma)};k(Ct,Ze=>{il().length===0?Ze(at):Ze(ha,!1)})}i(et,bt)},pt=et=>{var bt=Jc();Ee(bt,20,()=>["personal","family","business"],Se,(Ct,at)=>{const ha=Ae(()=>e(_i)[at]);var Ze=jc(),ma=s(Ze);ma.__click=()=>pi(at);var tt=s(ma),Je=s(tt,!0);a(tt);var Ta=r(tt,2),yt=s(Ta,!0);a(Ta);var St=r(Ta,2),Ht=s(St,!0);a(St),a(ma);var qe=r(ma,2);{var ba=na=>{var qa=Yc(),Ha=s(qa);{var Sa=ya=>{var Ga=Uc(),za=s(Ga),wa=s(za);a(za),a(Ga),b(()=>h(wa,`No ${at??""} accounts`)),i(ya,Ga)},Ua=ya=>{var Ga=Ra(),za=ue(Ga);Ee(za,17,()=>e(ha).entities,Se,(wa,Ea)=>{let Fa=()=>e(Ea).entity,Ya=()=>e(Ea).wallets,it=()=>e(Ea).totalBalance;var ra=Gc(),va=s(ra);va.__click=()=>gi(Fa().id);var $a=s(va),Na=s($a,!0);a($a);var Oe=r($a,2),Pe=s(Oe,!0);a(Oe);var j=r(Oe,2),Te=s(j,!0);a(j),a(va);var Qe=r(va,2);{var $e=we=>{var Ne=Hc(),We=s(Ne);{var _a=ia=>{var oa=zc(),pa=r(s(oa),2);pa.__click=()=>fi(Fa().id);var Ye=s(pa);Ps(Ye,{size:14}),rt(),a(pa),a(oa),i(ia,oa)},Re=ia=>{var oa=qc();Ee(oa,21,Ya,Se,(pa,Ye)=>{var st=Vc(),Za=s(st),gt=s(Za),Jt=s(gt);{var Nt=Ue=>{Wn(Ue,{size:20,color:"#f7931a"})},Aa=Ue=>{Cl(Ue,{size:20,color:"#f7931a"})};k(Jt,Ue=>{e(Ye).owner_type==="business"?Ue(Nt):Ue(Aa,!1)})}a(gt);var ca=r(gt,2),Ia=s(ca),Gt=s(Ia,!0);a(Ia),a(ca);var wt=r(ca,2),Et=s(wt);{var Dt=Ue=>{var Oa=Oc();Oa.__click=()=>tn(e(Ye));var E=s(Oa);Tl(E,{size:16}),a(Oa),b(()=>Oa.disabled=e(Ys)===e(Ye).id),i(Ue,Oa)};k(Et,Ue=>{e(Ye).wallet_type!=="manual"&&Ue(Dt)})}var Kt=r(Et,2);Kt.__click=()=>_l(e(Ye));var rs=r(Kt,2);rs.__click=()=>dl(e(Ye)),a(wt),a(Za);var Xt=r(Za,2),Rt=s(Xt),ls=s(Rt,!0);a(Rt);var ns=r(Rt,2),Ls=s(ns,!0);a(ns),a(Xt);var Le=r(Xt,2);{var Ve=Ue=>{var Oa=Wc();i(Ue,Oa)};k(Le,Ue=>{e(Ys)===e(Ye).id&&Ue(Ve)})}a(st),b(Ue=>{h(Gt,e(Ye).name),h(ls,Ue),h(Ls,e(Ye).wallet_type==="manual"?"Manual":e(Ye).wallet_type)},[()=>xt(e(x)[e(Ye).id]??0)]),i(pa,st)}),a(oa),i(ia,oa)};k(We,ia=>{Ya().length===0?ia(_a):ia(Re,!1)})}a(Ne),i(we,Ne)};k(Qe,we=>{Wl(Fa().id)||we($e)})}a(ra),b((we,Ne)=>{h(Na,we),h(Pe,Fa().name),h(Te,Ne)},[()=>Wl(Fa().id)?"▶":"▼",()=>xt(it())]),i(wa,ra)}),i(ya,Ga)};k(Ha,ya=>{e(ha).entities.length===0?ya(Sa):ya(Ua,!1)})}a(qa),i(na,qa)};k(qe,na=>{Ol(at)||na(ba)})}a(Ze),b((na,qa,Ha)=>{h(Je,na),h(yt,qa),h(Ht,Ha)},[()=>Ol(at)?"▶":"▼",()=>hi(at),()=>xt(e(ha).totalBalance)]),i(Ct,Ze)}),a(bt),i(et,bt)};k(_t,et=>{e(ne)!==null?et($t):et(pt,!1)})}i(I,V)};k(fa,I=>{e(ge)==="wallets"&&I(Da)})}var Ba=r(fa,2);{var Ce=I=>{var V=pu(),de=ue(V),je=r(s(de),2),la=s(je),_t=s(la);a(la);var $t=r(la,2),pt=s($t),et=s(pt);et.value=(et.__value=null)??"";var bt=r(et);Ee(bt,17,()=>e(Ll),Se,(qe,ba)=>{var na=Xc(),qa=s(na,!0);a(na);var Ha={};b(()=>{h(qa,e(ba)),Ha!==(Ha=e(ba))&&(na.value=(na.__value=e(ba))??"")}),i(qe,na)}),a(pt);var Ct=r(pt,2),at=s(Ct);at.value=(at.__value=null)??"";var ha=r(at);Ee(ha,17,()=>L,Se,(qe,ba)=>{var na=Zc(),qa=s(na,!0);a(na);var Ha={};b(()=>{h(qa,e(ba).label),Ha!==(Ha=e(ba).value)&&(na.value=(na.__value=e(ba).value)??"")}),i(qe,na)}),a(Ct);var Ze=r(Ct,2);{var ma=qe=>{var ba=Qc();ba.__click=ql,i(qe,ba)};k(Ze,qe=>{(e(fe)!==null||e(ke)!==null)&&qe(ma)})}a($t);var tt=r($t,2);tt.__click=Li;var Je=r(tt,2);Je.__click=()=>{var qe;l(ps,((qe=e(J)[0])==null?void 0:qe.id)||0,!0),l(er,!0)};var Ta=s(Je);Ps(Ta,{size:18}),rt(),a(Je),a(je),a(de);var yt=r(de,2);{var St=qe=>{var ba=eu();i(qe,ba)},Ht=qe=>{var ba=Ra(),na=ue(ba);{var qa=Sa=>{var Ua=au(),ya=s(Ua);On(ya),rt(4),a(Ua),i(Sa,Ua)},Ha=Sa=>{var Ua=_u(),ya=s(Ua);let Ga;var za=s(ya);za.__click=()=>Or("timestamp");var wa=s(za);a(za);var Ea=r(za,2);Ea.__click=()=>Or("amount_sats");var Fa=s(Ea);a(Ea);var Ya=r(Ea,2);{var it=Pe=>{var j=tu();i(Pe,j)};k(Ya,Pe=>{e(Ka)&&Pe(it)})}var ra=r(Ya,4);ra.__click=()=>Or("wallet_name");var va=s(ra);a(ra);var $a=r(ra,2);$a.__click=()=>Or("category");var Na=s($a);a($a),rt(6),a(ya);var Oe=r(ya,2);Ee(Oe,21,()=>e(ri),Se,(Pe,j)=>{var Te=du();let Qe;var $e=s(Te),we=s($e),Ne=s(we,!0);a(we);var We=r(we,2);{var _a=Le=>{var Ve=su(),Ue=s(Ve,!0);a(Ve),b(Oa=>h(Ue,Oa),[()=>bi(e(j).timestamp)]),i(Le,Ve)};k(We,Le=>{e(j).timestamp&&Le(_a)})}a($e);var Re=r($e,2);let ia;var oa=s(Re,!0);a(Re);var pa=r(Re,2);{var Ye=Le=>{var Ve=ru();let Ue;var Oa=s(Ve);{var E=pe=>{var Be=ot();b(ka=>h(Be,ka),[()=>e(j).fiat_value!==null?xi(e(j).fiat_value):"—"]),i(pe,Be)},O=pe=>{var Be=ot("—");i(pe,Be)};k(Oa,pe=>{(e(j).currency||"BTC")==="BTC"?pe(E):pe(O,!1)})}a(Ve),b(()=>Ue=ae(Ve,1,"tx-cell tx-fiat svelte-1uha8ag",null,Ue,{positive:e(j).amount_sats>=0,negative:e(j).amount_sats<0})),i(Le,Ve)};k(pa,Le=>{e(Ka)&&Le(Ye)})}var st=r(pa,2),Za=s(st);{var gt=Le=>{var Ve=iu(),Ue=ue(Ve);{var Oa=pe=>{var Be=lu(),ka=s(Be);a(Be),b(Yt=>h(ka,`${Yt??""} sats`),[()=>e(j).fee_sats.toLocaleString()]),i(pe,Be)};k(Ue,pe=>{e(j).fee_sats>0&&pe(Oa)})}var E=r(Ue,2);{var O=pe=>{var Be=nu(),ka=s(Be);a(Be),b(Yt=>h(ka,`${e(j).fee_fiat_currency==="EUR"?"€":"$"}${Yt??""}`),[()=>e(j).fee_fiat.toFixed(2)]),i(pe,Be)};k(E,pe=>{e(j).fee_fiat&&e(j).fee_fiat>0&&pe(O)})}i(Le,Ve)},Jt=Le=>{var Ve=ot("—");i(Le,Ve)};k(Za,Le=>{e(j).fee_sats>0||e(j).fee_fiat&&e(j).fee_fiat>0?Le(gt):Le(Jt,!1)})}a(st);var Nt=r(st,2),Aa=s(Nt,!0);a(Nt);var ca=r(Nt,2),Ia=s(ca);Ia.__change=Le=>Oi(e(j),Le.currentTarget.value),Ee(Ia,21,()=>e(Rr),Se,(Le,Ve)=>{var Ue=ou(),Oa=s(Ue,!0);a(Ue);var E={};b(()=>{h(Oa,e(Ve)),E!==(E=e(Ve))&&(Ue.value=(Ue.__value=e(Ve))??"")}),i(Le,Ue)}),a(Ia);var Gt;Fl(Ia),a(ca);var wt=r(ca,2),Et=s(wt);Ke(Et),a(wt);var Dt=r(wt,2),Kt=s(Dt);{var rs=Le=>{var Ve=vu(),Ue=s(Ve,!0);a(Ve),b((Oa,E)=>{ye(Ve,"href",Oa),ye(Ve,"title",e(j).txid),h(Ue,E)},[()=>zl(e(j)),()=>Ul(e(j).txid)]),i(Le,Ve)},Xt=Le=>{var Ve=cu(),Ue=s(Ve,!0);a(Ve),b(Oa=>{ye(Ve,"title",e(j).txid),h(Ue,Oa)},[()=>Ul(e(j).txid)]),i(Le,Ve)};k(Kt,Le=>{zl(e(j))?Le(rs):Le(Xt,!1)})}a(Dt);var Rt=r(Dt,2),ls=s(Rt);ls.__click=()=>wi(e(j));var ns=r(ls,2);{var Ls=Le=>{var Ve=uu(),Ue=ue(Ve);Ue.__click=()=>Vi(e(j));var Oa=r(Ue,2);Oa.__click=()=>Hi(e(j)),i(Le,Ve)};k(ns,Le=>{ol(e(j))&&Le(Ls)})}a(Rt),a(Te),b((Le,Ve)=>{Qe=ae(Te,1,"tx-row svelte-1uha8ag",null,Qe,{"has-fiat":e(Ka)}),h(Ne,Le),ia=ae(Re,1,"tx-cell tx-amount svelte-1uha8ag",null,ia,{positive:e(j).amount_sats>=0,negative:e(j).amount_sats<0}),h(oa,Ve),h(Aa,e(j).wallet_name),Gt!==(Gt=e(j).category||"Uncategorized")&&(Ia.value=(Ia.__value=e(j).category||"Uncategorized")??"",Yr(Ia,e(j).category||"Uncategorized")),lv(Et,e(j).note||"")},[()=>Vl(e(j).timestamp),()=>mi(e(j),!0)]),Zn("blur",Et,Le=>Wi(e(j),Le.currentTarget.value)),i(Pe,Te)}),a(Oe),a(Ua),b((Pe,j,Te,Qe)=>{Ga=ae(ya,1,"tx-header svelte-1uha8ag",null,Ga,{"has-fiat":e(Ka)}),h(wa,`Date${Pe??""}`),h(Fa,`Amount${j??""}`),h(va,`Wallet${Te??""}`),h(Na,`Category${Qe??""}`)},[()=>Wr("timestamp"),()=>Wr("amount_sats"),()=>Wr("wallet_name"),()=>Wr("category")]),i(Sa,Ua)};k(na,Sa=>{e(S).length===0?Sa(qa):Sa(Ha,!1)},!0)}i(qe,ba)};k(yt,qe=>{e(Qr)?qe(St):qe(Ht,!1)})}b(()=>h(_t,`${e(Is).length??""} transactions`)),Tt(pt,()=>e(fe),qe=>l(fe,qe)),Tt(Ct,()=>e(ke),qe=>l(ke,qe)),i(I,V)};k(Ba,I=>{e(ge)==="transactions"&&I(Ce)})}var Pa=r(Ba,2);{var me=I=>{var V=Ou(),de=s(V),je=s(de);let la;je.__click=()=>l(Ja,"display");var _t=r(je,2);let $t;_t.__click=()=>l(Ja,"pnl");var pt=r(_t,2);let et;pt.__click=()=>l(Ja,"categories");var bt=r(pt,2);let Ct;bt.__click=()=>l(Ja,"accounts");var at=r(bt,2);let ha;at.__click=()=>l(Ja,"wallets");var Ze=r(at,2);let ma;Ze.__click=()=>l(Ja,"security");var tt=r(Ze,2);let Je;tt.__click=()=>l(Ja,"data"),a(de);var Ta=r(de,2),yt=s(Ta);{var St=qe=>{var ba=fu(),na=r(s(ba),2),qa=r(s(na),2),Ha=s(qa),Sa=s(Ha);let Ua;Sa.__click=()=>nn("dark");var ya=r(Sa,2);let Ga;ya.__click=()=>nn("light"),a(Ha),a(qa),a(na);var za=r(na,2),wa=r(s(za),2),Ea=s(wa),Fa=s(Ea);let Ya;Fa.__click=()=>Jl("sats");var it=r(Fa,2);let ra;it.__click=()=>Jl("btc"),a(Ea),a(wa),a(za);var va=r(za,2),$a=r(s(va),2),Na=s($a);let Oe;Na.__click=()=>Di(!e(Ka)),a($a),a(va);var Pe=r(va,2);{var j=Te=>{var Qe=gu(),$e=r(s(Qe),2),we=s($e),Ne=s(we);let We;Ne.__click=()=>Zl("EUR");var _a=r(Ne,2);let Re;_a.__click=()=>Zl("USD"),a(we),a($e),a(Qe),b(()=>{We=ae(Ne,1,"toggle-option svelte-1uha8ag",null,We,{active:e(Me)==="EUR"}),Re=ae(_a,1,"toggle-option svelte-1uha8ag",null,Re,{active:e(Me)==="USD"})}),i(Te,Qe)};k(Pe,Te=>{e(Ka)&&Te(j)})}a(ba),b(()=>{Ua=ae(Sa,1,"toggle-option svelte-1uha8ag",null,Ua,{active:e(vr)==="dark"}),Ga=ae(ya,1,"toggle-option svelte-1uha8ag",null,Ga,{active:e(vr)==="light"}),Ya=ae(Fa,1,"toggle-option svelte-1uha8ag",null,Ya,{active:e(or)==="sats"}),ra=ae(it,1,"toggle-option svelte-1uha8ag",null,ra,{active:e(or)==="btc"}),Oe=ae(Na,1,"toggle-btn svelte-1uha8ag",null,Oe,{active:e(Ka)})}),i(qe,ba)},Ht=qe=>{var ba=Ra(),na=ue(ba);{var qa=Sa=>{var Ua=yu(),ya=r(s(Ua),2),Ga=r(s(ya),2),za=s(Ga),wa=s(za);let Ea;wa.__click=()=>Xl("average");var Fa=r(wa,2);let Ya;Fa.__click=()=>Xl("fifo"),a(za),a(Ga),a(ya);var it=r(ya,2),ra=r(s(it),2),va=s(ra);{var $a=Te=>{var Qe=mu(),$e=s(Qe),we=r($e);{var Ne=We=>{var _a=hu(),Re=s(_a);a(_a),b(ia=>h(Re,`(${ia??""})`),[()=>e(cr).toLocaleTimeString()]),i(We,_a)};k(we,We=>{e(cr)&&We(Ne)})}a(Qe),b(We=>h($e,`Current: ${e(Me)==="EUR"?"€":"$"}${We??""} `),[()=>e(Xa).toLocaleString()]),i(Te,Qe)};k(va,Te=>{e(Xa)&&Te($a)})}var Na=r(va,2);Na.__click=cl;var Oe=s(Na);{var Pe=Te=>{var Qe=bu();rt(),i(Te,Qe)},j=Te=>{var Qe=ot("Fetch Missing Fiat Values");i(Te,Qe)};k(Oe,Te=>{e($r)?Te(Pe):Te(j,!1)})}a(Na),a(ra),a(it),a(Ua),b(()=>{Ea=ae(wa,1,"toggle-option svelte-1uha8ag",null,Ea,{active:e(ur)==="average"}),Ya=ae(Fa,1,"toggle-option svelte-1uha8ag",null,Ya,{active:e(ur)==="fifo"}),Na.disabled=e($r)||!e(Ka)}),i(Sa,Ua)},Ha=Sa=>{var Ua=Ra(),ya=ue(Ua);{var Ga=wa=>{var Ea=Eu(),Fa=r(s(Ea),4),Ya=r(s(Fa),2);Ee(Ya,21,()=>e(R).filter($e=>$e.entity_type==="personal"),Se,($e,we)=>{var Ne=wu(),We=s(Ne),_a=s(We,!0);a(We),rt(2),a(Ne),b(()=>h(_a,e(we).name)),i($e,Ne)}),a(Ya),a(Fa);var it=r(Fa,2),ra=s(it),va=r(s(ra),2);va.__click=()=>{l(zs,"family"),l(Us,!0)};var $a=s(va);Ps($a,{size:14}),rt(),a(va),a(ra);var Na=r(ra,2);Ee(Na,21,()=>e(R).filter($e=>$e.entity_type==="family"),Se,($e,we)=>{var Ne=ku(),We=s(Ne),_a=s(We,!0);a(We);var Re=r(We,2);Re.__click=()=>an(e(we)),a(Ne),b(()=>h(_a,e(we).name)),i($e,Ne)},$e=>{var we=xu();i($e,we)}),a(Na),a(it);var Oe=r(it,2),Pe=s(Oe),j=r(s(Pe),2);j.__click=()=>{l(zs,"business"),l(Us,!0)};var Te=s(j);Ps(Te,{size:14}),rt(),a(j),a(Pe);var Qe=r(Pe,2);Ee(Qe,21,()=>e(R).filter($e=>$e.entity_type==="business"),Se,($e,we)=>{var Ne=Tu(),We=s(Ne),_a=s(We,!0);a(We);var Re=r(We,2);{var ia=pa=>{var Ye=Cu(),st=s(Ye,!0);a(Ye),b(Za=>h(st,Za),[()=>{var Za;return(Za=e(R).find(gt=>gt.id===e(we).parent_id))==null?void 0:Za.name}]),i(pa,Ye)};k(Re,pa=>{e(we).parent_id&&pa(ia)})}var oa=r(Re,2);oa.__click=()=>an(e(we)),a(Ne),b(()=>h(_a,e(we).name)),i($e,Ne)},$e=>{var we=Su();i($e,we)}),a(Qe),a(Oe),a(Ea),i(wa,Ea)},za=wa=>{var Ea=Ra(),Fa=ue(Ea);{var Ya=ra=>{var va=Au(),$a=s(va),Na=r(s($a),2);Na.__click=()=>l(_s,!0);var Oe=s(Na);Ps(Oe,{size:16}),rt(),a(Na),a($a);var Pe=r($a,2);Ee(Pe,21,()=>e(J),Se,(j,Te)=>{var Qe=Fu(),$e=s(Qe),we=s($e),Ne=s(we,!0);a(we);var We=r(we,2),_a=s(We);a(We),a($e);var Re=r($e,2),ia=s(Re,!0);a(Re);var oa=r(Re,2),pa=s(oa);pa.__click=()=>_l(e(Te));var Ye=r(pa,2);Ye.__click=()=>dl(e(Te)),a(oa),a(Qe),b(st=>{h(Ne,e(Te).name),h(_a,`${e(Te).owner_name??""} · ${(e(Te).wallet_type==="manual"?"Manual":e(Te).wallet_type)??""}`),h(ia,st)},[()=>xt(e(x)[e(Te).id]??0)]),i(j,Qe)},j=>{var Te=Du();i(j,Te)}),a(Pe),a(va),i(ra,va)},it=ra=>{var va=Ra(),$a=ue(va);{var Na=Pe=>{var j=Bu(),Te=s(j),Qe=r(s(Te),2);Qe.__click=()=>l(f,!0);var $e=s(Qe);Ps($e,{size:16}),rt(),a(Qe),a(Te);var we=r(Te,2),Ne=r(s(we),2);Ee(Ne,21,()=>e(g).filter(Re=>Re.is_system),Se,(Re,ia)=>{var oa=Iu(),pa=s(oa),Ye=s(pa,!0);a(pa),rt(2),a(oa),b(()=>h(Ye,e(ia).name)),i(Re,oa)}),a(Ne),a(we);var We=r(we,2),_a=r(s(We),2);Ee(_a,21,()=>e(g).filter(Re=>!Re.is_system),Se,(Re,ia)=>{var oa=Mu(),pa=s(oa),Ye=s(pa,!0);a(pa);var st=r(pa,2),Za=s(st);Za.__click=()=>Si(e(ia));var gt=r(Za,2);gt.__click=()=>Ei(e(ia)),a(st),a(oa),b(()=>h(Ye,e(ia).name)),i(Re,oa)},Re=>{var ia=Lu();i(Re,ia)}),a(_a),a(We),a(j),i(Pe,j)},Oe=Pe=>{var j=Ra(),Te=ue(j);{var Qe=we=>{var Ne=Ru(),We=r(s(Ne),4),_a=s(We),Re=r(s(_a),2),ia=s(Re);{var oa=Aa=>{var ca=ot("Your database is encrypted with AES-256. Only you can access your data.");i(Aa,ca)},pa=Aa=>{var ca=ot("Your database is not encrypted. Enable encryption to protect your data.");i(Aa,ca)};k(ia,Aa=>{e(xe)?Aa(oa):Aa(pa,!1)})}a(Re),a(_a);var Ye=r(_a,2),st=s(Ye);{var Za=Aa=>{var ca=Pu(),Ia=r(ue(ca),2);Ia.__click=()=>l(Ks,!0);var Gt=r(Ia,2);Gt.__click=()=>l(Xs,!0),i(Aa,ca)},gt=Aa=>{var ca=$u(),Ia=r(ue(ca),2);Ia.__click=eo,i(Aa,ca)};k(st,Aa=>{e(xe)?Aa(Za):Aa(gt,!1)})}a(Ye),a(We);var Jt=r(We,2);{var Nt=Aa=>{var ca=Nu(),Ia=ue(ca),Gt=r(s(Ia),2),wt=s(Gt);wt.__change=Le=>oo(Le.currentTarget.value);var Et=s(wt);Et.value=Et.__value="never";var Dt=r(Et);Dt.value=Dt.__value="5";var Kt=r(Dt);Kt.value=Kt.__value="15";var rs=r(Kt);rs.value=rs.__value="30";var Xt=r(rs);Xt.value=Xt.__value="60",a(wt);var Rt;Fl(wt),a(Gt),a(Ia);var ls=r(Ia,2),ns=r(s(ls),2),Ls=s(ns);Ls.__click=()=>l(K,!0),a(ns),a(ls),b(()=>{Rt!==(Rt=e(xs))&&(wt.value=(wt.__value=e(xs))??"",Yr(wt,e(xs)))}),i(Aa,ca)};k(Jt,Aa=>{e(xe)&&Aa(Nt)})}a(Ne),i(we,Ne)},$e=we=>{var Ne=Ra(),We=ue(Ne);{var _a=Re=>{var ia=zu(),oa=r(s(ia),2),pa=r(s(oa),2),Ye=s(pa);Ye.__click=Yi;var st=s(Ye);{var Za=ca=>{var Ia=Uu();rt(),i(ca,Ia)},gt=ca=>{var Ia=ot("Export to CSV");i(ca,Ia)};k(st,ca=>{e(Lr)?ca(Za):ca(gt,!1)})}a(Ye),a(pa),a(oa);var Jt=r(oa,2),Nt=r(s(Jt),2),Aa=s(Nt);Aa.__click=()=>l(Br,!0),a(Nt),a(Jt),a(ia),b(()=>Ye.disabled=e(Lr)),i(Re,ia)};k(We,Re=>{e(Ja)==="data"&&Re(_a)},!0)}i(we,Ne)};k(Te,we=>{e(Ja)==="security"?we(Qe):we($e,!1)},!0)}i(Pe,j)};k($a,Pe=>{e(Ja)==="categories"?Pe(Na):Pe(Oe,!1)},!0)}i(ra,va)};k(Fa,ra=>{e(Ja)==="wallets"?ra(Ya):ra(it,!1)},!0)}i(wa,Ea)};k(ya,wa=>{e(Ja)==="accounts"?wa(Ga):wa(za,!1)},!0)}i(Sa,Ua)};k(na,Sa=>{e(Ja)==="pnl"?Sa(qa):Sa(Ha,!1)},!0)}i(qe,ba)};k(yt,qe=>{e(Ja)==="display"?qe(St):qe(Ht,!1)})}a(Ta),a(V),b(()=>{la=ae(je,1,"settings-nav-item svelte-1uha8ag",null,la,{active:e(Ja)==="display"}),$t=ae(_t,1,"settings-nav-item svelte-1uha8ag",null,$t,{active:e(Ja)==="pnl"}),et=ae(pt,1,"settings-nav-item svelte-1uha8ag",null,et,{active:e(Ja)==="categories"}),Ct=ae(bt,1,"settings-nav-item svelte-1uha8ag",null,Ct,{active:e(Ja)==="accounts"}),ha=ae(at,1,"settings-nav-item svelte-1uha8ag",null,ha,{active:e(Ja)==="wallets"}),ma=ae(Ze,1,"settings-nav-item svelte-1uha8ag",null,ma,{active:e(Ja)==="security"}),Je=ae(tt,1,"settings-nav-item svelte-1uha8ag",null,Je,{active:e(Ja)==="data"})}),i(I,V)};k(Pa,I=>{e(ge)==="settings"&&I(me)})}a(da),b(I=>{h(se,I),He=ae(be,1,"icon-btn refresh-price svelte-1uha8ag",null,He,{spinning:e(Pr)}),be.disabled=e(Pr),Ca=ae(La,1,"tab svelte-1uha8ag",null,Ca,{active:e(ge)==="dashboard"}),Va=ae(Wa,1,"tab svelte-1uha8ag",null,Va,{active:e(ge)==="wallets"}),ut=ae(lt,1,"tab svelte-1uha8ag",null,ut,{active:e(ge)==="transactions"}),sa=ae(ua,1,"tab svelte-1uha8ag",null,sa,{active:e(ge)==="settings"})},[()=>xt(nl())]),i(P,D)};k(d,P=>{e(K)?P(C):P(T,!1)},!0)}i(t,v)};k(_o,t=>{e(Ie)?t(po):t(go,!1)})}a(gl);var dn=r(gl,2);At(dn,{title:"Add Wallet",get open(){return e(_s)},onclose:()=>l(_s,!1),children:(t,v)=>{var d=Yu(),C=ue(d),T=r(s(C),2);Ke(T),a(C);var P=r(C,2),D=r(s(P),2),W=s(D);let $;W.__click=()=>l(ee,!1);var re=r(W,2);let Y;re.__click=()=>l(ee,!0),a(D),a(P);var ie=r(P,2);{var G=z=>{var Z=qu(),se=ue(Z),ce=r(s(se),2);Ke(ce),a(se);var he=r(se,2),H=s(he),Q=r(s(H),2),be=s(Q);be.value=be.__value="zpub";var He=r(be);He.value=He.__value="ypub";var ta=r(He);ta.value=ta.__value="xpub",a(Q),a(H);var Ma=r(H,2),La=r(s(Ma),2);Ee(La,21,()=>e(R),Se,(Ca,Wa)=>{var Va=Vu(),lt=s(Va,!0);a(Va);var ut={};b(()=>{h(lt,e(Wa).name),ut!==(ut=e(Wa).id)&&(Va.value=(Va.__value=e(Wa).id)??"")}),i(Ca,Va)}),a(La),a(Ma),a(he),ea(ce,()=>e(ir),Ca=>l(ir,Ca)),Tt(Q,()=>e(Zr),Ca=>l(Zr,Ca)),Tt(La,()=>e(Gs),Ca=>l(Gs,Ca)),i(z,Z)},oe=z=>{var Z=Gu(),se=r(ue(Z),2),ce=r(s(se),2);Ee(ce,21,()=>e(R),Se,(he,H)=>{var Q=Hu(),be=s(Q,!0);a(Q);var He={};b(()=>{h(be,e(H).name),He!==(He=e(H).id)&&(Q.value=(Q.__value=e(H).id)??"")}),i(he,Q)}),a(ce),a(se),Tt(ce,()=>e(Gs),he=>l(Gs,he)),i(z,Z)};k(ie,z=>{e(ee)?z(oe,!1):z(G)})}var ve=r(ie,2),De=s(ve);De.__click=()=>l(_s,!1);var A=r(De,2);A.__click=Ri,a(ve),b(()=>{$=ae(W,1,"type-btn svelte-1uha8ag",null,$,{active:!e(ee)}),Y=ae(re,1,"type-btn svelte-1uha8ag",null,Y,{active:e(ee)})}),ea(T,()=>e(nr),z=>l(nr,z)),i(t,d)},$$slots:{default:!0}});var _n=r(dn,2);{let t=Ae(()=>e(zs)==="family"?"Add Family Member":"Add Business");At(_n,{get title(){return e(t)},get open(){return e(Us)},onclose:()=>l(Us,!1),children:(v,d)=>{var C=Ku(),T=ue(C),P=r(s(T),2);Ke(P),a(T);var D=r(T,2);{var W=ie=>{var G=Ju(),oe=r(s(G),2),ve=s(oe);ve.value=(ve.__value=null)??"";var De=r(ve);Ee(De,17,yi,Se,(A,z)=>{var Z=ju(),se=s(Z,!0);a(Z);var ce={};b(()=>{h(se,e(z).name),ce!==(ce=e(z).id)&&(Z.value=(Z.__value=e(z).id)??"")}),i(A,Z)}),a(oe),a(G),Tt(oe,()=>e(Mr),A=>l(Mr,A)),i(ie,G)};k(D,ie=>{e(zs)==="business"&&ie(W)})}var $=r(D,2),re=s($);re.__click=()=>l(Us,!1);var Y=r(re,2);Y.__click=$i,a($),b(()=>ye(P,"placeholder",e(zs)==="family"?"e.g. Partner":"e.g. My Company")),ea(P,()=>e(As),ie=>l(As,ie)),i(v,C)},$$slots:{default:!0}})}var pn=r(_n,2);{let t=Ae(()=>{var v;return((v=e(Os))==null?void 0:v.name)??""});yv(pn,{get open(){return e(Tr)},get name(){return e(t)},onconfirm:Ui,onclose:()=>{l(Tr,!1),l(Os,null)}})}var gn=r(pn,2);{let t=Ae(()=>{var v;return`Delete "${(v=e(Cs))==null?void 0:v.name}"? Associated wallets will also be deleted.`});Gr(gn,{get open(){return e(Sr)},title:"Delete",get message(){return e(t)},confirmText:"Delete",danger:!0,onconfirm:Ni,onclose:()=>{l(Sr,!1),l(Cs,null)}})}var fn=r(gn,2);At(fn,{title:"Edit Wallet",get open(){return e(Zs)},onclose:()=>{l(Zs,!1),l(Ws,null)},children:(t,v)=>{var d=Zu(),C=ue(d),T=r(s(C),2);Ke(T),a(C);var P=r(C,2),D=r(s(P),2);Ee(D,21,()=>e(R),Se,(Y,ie)=>{var G=Xu(),oe=s(G,!0);a(G);var ve={};b(()=>{h(oe,e(ie).name),ve!==(ve=e(ie).id)&&(G.value=(G.__value=e(ie).id)??"")}),i(Y,G)}),a(D),a(P);var W=r(P,2),$=s(W);$.__click=()=>{l(Zs,!1),l(Ws,null)};var re=r($,2);re.__click=zi,a(W),ea(T,()=>e(Qs),Y=>l(Qs,Y)),Tt(D,()=>e(Er),Y=>l(Er,Y)),i(t,d)},$$slots:{default:!0}});var hn=r(fn,2);At(hn,{title:"Add Transaction",get open(){return e(er)},onclose:()=>l(er,!1),children:(t,v)=>{var d=sd(),C=ue(d),T=s(C);let P;T.__click=()=>l(Bt,"incoming");var D=r(T,2);let W;D.__click=()=>l(Bt,"outgoing"),a(C);var $=r(C,2),re=r(s($),2),Y=s(re);let ie;Y.__click=()=>l(ga,"BTC");var G=r(Y,2);let oe;G.__click=()=>l(ga,"EUR");var ve=r(G,2);let De;ve.__click=()=>l(ga,"USD"),a(re),a($);var A=r($,2),z=s(A),Z=r(s(z));{var se=I=>{var V=ot("(sats or BTC)");i(I,V)},ce=I=>{var V=ot();b(()=>h(V,`(${e(ga)??""})`)),i(I,V)};k(Z,I=>{e(ga)==="BTC"?I(se):I(ce,!1)})}a(z);var he=r(z,2);Ke(he);var H=r(he,2);{var Q=I=>{var V=Qu();i(I,V)};k(H,I=>{e(ga)==="BTC"&&I(Q)})}a(A);var be=r(A,2),He=s(be),ta=r(s(He),2);Ee(ta,21,()=>e(J),Se,(I,V)=>{var de=ed(),je=s(de,!0);a(de);var la={};b(()=>{h(je,e(V).name),la!==(la=e(V).id)&&(de.value=(de.__value=e(V).id)??"")}),i(I,de)}),a(ta),a(He);var Ma=r(He,2),La=r(s(Ma),2);Ke(La),a(Ma),a(be);var Ca=r(be,2),Wa=s(Ca),Va=r(s(Wa),2);Ee(Va,21,()=>e(Rr),Se,(I,V)=>{var de=ad(),je=s(de,!0);a(de);var la={};b(()=>{h(je,e(V)),la!==(la=e(V))&&(de.value=(de.__value=e(V))??"")}),i(I,de)}),a(Va),a(Wa);var lt=r(Wa,2);{var ut=I=>{var V=td(),de=s(V),je=s(de);a(de);var la=r(de,2);Ke(la),a(V),b(()=>h(je,`Fiat Value (${e(Me)??""}, optional)`)),ea(la,()=>e(es),_t=>l(es,_t)),i(I,V)};k(lt,I=>{e(ga)==="BTC"&&I(ut)})}a(Ca);var ua=r(Ca,2),sa=s(ua),Ge=r(s(sa),2);Ke(Ge),a(sa);var ze=r(sa,2),da=s(ze),nt=s(da);a(da);var dt=r(da,2);Ke(dt),a(ze),a(ua);var fa=r(ua,2),Da=r(s(fa),2);Ke(Da),a(fa);var Ba=r(fa,2),Ce=s(Ba);Ce.__click=()=>l(er,!1);var Pa=r(Ce,2);Pa.__click=sn;var me=s(Pa);a(Pa),a(Ba),b(()=>{P=ae(T,1,"type-btn svelte-1uha8ag",null,P,{active:e(Bt)==="incoming"}),W=ae(D,1,"type-btn svelte-1uha8ag",null,W,{active:e(Bt)==="outgoing"}),ie=ae(Y,1,"type-btn small svelte-1uha8ag",null,ie,{active:e(ga)==="BTC"}),oe=ae(G,1,"type-btn small svelte-1uha8ag",null,oe,{active:e(ga)==="EUR"}),De=ae(ve,1,"type-btn small svelte-1uha8ag",null,De,{active:e(ga)==="USD"}),ye(he,"placeholder",e(ga)==="BTC"?"e.g. 100000 or 0.001":"e.g. 100.00"),h(nt,`Fee (${e(Me)??""}, optional)`),h(me,`Add ${e(Bt)==="incoming"?"Incoming":"Outgoing"} Transaction`)}),ea(he,()=>e(qt),I=>l(qt,I)),Tt(ta,()=>e(ps),I=>l(ps,I)),ea(La,()=>e(fs),I=>l(fs,I)),Tt(Va,()=>e(Qt),I=>l(Qt,I)),ea(Ge,()=>e(as),I=>l(as,I)),ea(dt,()=>e(ts),I=>l(ts,I)),ea(Da,()=>e(gs),I=>l(gs,I)),i(t,d)},$$slots:{default:!0}});var mn=r(hn,2);At(mn,{title:"Add Category",get open(){return e(f)},onclose:()=>{l(f,!1),l(w,"")},children:(t,v)=>{var d=rd(),C=ue(d),T=r(s(C),2);Ke(T),T.__keydown=$=>$.key==="Enter"&&Yl(),a(C);var P=r(C,2),D=s(P);D.__click=()=>{l(f,!1),l(w,"")};var W=r(D,2);W.__click=Yl,a(P),ea(T,()=>e(w),$=>l(w,$)),i(t,d)},$$slots:{default:!0}});var bn=r(mn,2);At(bn,{title:"Edit Category",get open(){return e(m)},onclose:()=>{l(m,!1),l(M,null)},children:(t,v)=>{var d=ld(),C=ue(d),T=r(s(C),2);Ke(T),T.__keydown=$=>$.key==="Enter"&&jl(),a(C);var P=r(C,2),D=s(P);D.__click=()=>{l(m,!1),l(M,null)};var W=r(D,2);W.__click=jl,a(P),ea(T,()=>e(N),$=>l(N,$)),i(t,d)},$$slots:{default:!0}});var yn=r(bn,2);{let t=Ae(()=>{var v;return`Delete "${(v=e(F))==null?void 0:v.name}"? All transactions with this category will be set to "Uncategorized".`});Gr(yn,{get open(){return e(X)},title:"Delete Category",get message(){return e(t)},confirmText:"Delete",danger:!0,onconfirm:Fi,onclose:()=>{l(X,!1),l(F,null)}})}var wn=r(yn,2);At(wn,{title:"Edit Transaction",get open(){return e(ar)},onclose:()=>{l(ar,!1),l(Hs,null)},children:(t,v)=>{var d=vd(),C=ue(d),T=s(C);let P;T.__click=()=>l(Es,"incoming");var D=r(T,2);let W;D.__click=()=>l(Es,"outgoing"),a(C);var $=r(C,2),re=r(s($),2),Y=s(re);let ie;Y.__click=()=>l(kt,"BTC");var G=r(Y,2);let oe;G.__click=()=>l(kt,"EUR");var ve=r(G,2);let De;ve.__click=()=>l(kt,"USD"),a(re),a($);var A=r($,2),z=s(A),Z=r(s(z));{var se=Ce=>{var Pa=ot("(sats or BTC)");i(Ce,Pa)},ce=Ce=>{var Pa=ot();b(()=>h(Pa,`(${e(kt)??""})`)),i(Ce,Pa)};k(Z,Ce=>{e(kt)==="BTC"?Ce(se):Ce(ce,!1)})}a(z);var he=r(z,2);Ke(he);var H=r(he,2);{var Q=Ce=>{var Pa=nd();i(Ce,Pa)};k(H,Ce=>{e(kt)==="BTC"&&Ce(Q)})}a(A);var be=r(A,2),He=s(be),ta=r(s(He),2);Ke(ta),a(He);var Ma=r(He,2),La=r(s(Ma),2);Ee(La,21,()=>e(Rr),Se,(Ce,Pa)=>{var me=id(),I=s(me,!0);a(me);var V={};b(()=>{h(I,e(Pa)),V!==(V=e(Pa))&&(me.value=(me.__value=e(Pa))??"")}),i(Ce,me)}),a(La),a(Ma),a(be);var Ca=r(be,2),Wa=s(Ca);{var Va=Ce=>{var Pa=od(),me=s(Pa),I=s(me);a(me);var V=r(me,2);Ke(V),a(Pa),b(()=>h(I,`Fiat Value (${e(Me)??""}, optional)`)),ea(V,()=>e(sr),de=>l(sr,de)),i(Ce,Pa)};k(Wa,Ce=>{e(kt)==="BTC"&&Ce(Va)})}var lt=r(Wa,2),ut=r(s(lt),2);Ke(ut),a(lt),a(Ca);var ua=r(Ca,2),sa=s(ua),Ge=r(s(sa),2);Ke(Ge),a(sa);var ze=r(sa,2),da=s(ze),nt=s(da);a(da);var dt=r(da,2);Ke(dt),a(ze),a(ua);var fa=r(ua,2),Da=s(fa);Da.__click=()=>{l(ar,!1),l(Hs,null)};var Ba=r(Da,2);Ba.__click=qi,a(fa),b(()=>{P=ae(T,1,"type-btn svelte-1uha8ag",null,P,{active:e(Es)==="incoming"}),W=ae(D,1,"type-btn svelte-1uha8ag",null,W,{active:e(Es)==="outgoing"}),ie=ae(Y,1,"type-btn small svelte-1uha8ag",null,ie,{active:e(kt)==="BTC"}),oe=ae(G,1,"type-btn small svelte-1uha8ag",null,oe,{active:e(kt)==="EUR"}),De=ae(ve,1,"type-btn small svelte-1uha8ag",null,De,{active:e(kt)==="USD"}),ye(he,"placeholder",e(kt)==="BTC"?"e.g. 100000 or 0.001":"e.g. 100.00"),h(nt,`Fee (${e(Me)??""}, optional)`)}),ea(he,()=>e(Fs),Ce=>l(Fs,Ce)),ea(ta,()=>e(Ar),Ce=>l(Ar,Ce)),Tt(La,()=>e(tr),Ce=>l(tr,Ce)),ea(ut,()=>e(Dr),Ce=>l(Dr,Ce)),ea(Ge,()=>e(rr),Ce=>l(rr,Ce)),ea(dt,()=>e(lr),Ce=>l(lr,Ce)),i(t,d)},$$slots:{default:!0}});var kn=r(wn,2);At(kn,{title:"Duplicate Transaction",get open(){return e(Nr)},onclose:Hl,children:(t,v)=>{var d=pd(),C=r(ue(d),2),T=s(C);let P;T.__click=()=>l(Bt,"incoming");var D=r(T,2);let W;D.__click=()=>l(Bt,"outgoing"),a(C);var $=r(C,2),re=r(s($),2),Y=s(re);let ie;Y.__click=()=>l(ga,"BTC");var G=r(Y,2);let oe;G.__click=()=>l(ga,"EUR");var ve=r(G,2);let De;ve.__click=()=>l(ga,"USD"),a(re),a($);var A=r($,2),z=r(s(A),2);Ee(z,21,()=>e(J),Se,(me,I)=>{var V=cd(),de=s(V);a(V);var je={};b(()=>{h(de,`${e(I).name??""} (${e(I).owner_name??""})`),je!==(je=e(I).id)&&(V.value=(V.__value=e(I).id)??"")}),i(me,V)}),a(z),a(A);var Z=r(A,2),se=s(Z),ce=r(s(se));{var he=me=>{var I=ot("(sats or BTC)");i(me,I)},H=me=>{var I=ot();b(()=>h(I,`(${e(ga)??""})`)),i(me,I)};k(ce,me=>{e(ga)==="BTC"?me(he):me(H,!1)})}a(se);var Q=r(se,2);Ke(Q);var be=r(Q,2);{var He=me=>{var I=ud();i(me,I)};k(be,me=>{e(ga)==="BTC"&&me(He)})}a(Z);var ta=r(Z,2),Ma=s(ta),La=r(s(Ma),2);Ke(La),a(Ma);var Ca=r(Ma,2),Wa=r(s(Ca),2);Ee(Wa,21,()=>e(Rr),Se,(me,I)=>{var V=dd(),de=s(V,!0);a(V);var je={};b(()=>{h(de,e(I)),je!==(je=e(I))&&(V.value=(V.__value=e(I))??"")}),i(me,V)}),a(Wa),a(Ca),a(ta);var Va=r(ta,2),lt=s(Va);{var ut=me=>{var I=_d(),V=s(I),de=s(V);a(V);var je=r(V,2);Ke(je),a(I),b(()=>h(de,`Fiat Value (${e(Me)??""}, optional)`)),ea(je,()=>e(es),la=>l(es,la)),i(me,I)};k(lt,me=>{e(ga)==="BTC"&&me(ut)})}var ua=r(lt,2),sa=r(s(ua),2);Ke(sa),a(ua),a(Va);var Ge=r(Va,2),ze=s(Ge),da=r(s(ze),2);Ke(da),a(ze);var nt=r(ze,2),dt=s(nt),fa=s(dt);a(dt);var Da=r(dt,2);Ke(Da),a(nt),a(Ge);var Ba=r(Ge,2),Ce=s(Ba);Ce.__click=Hl;var Pa=r(Ce,2);Pa.__click=ki,a(Ba),b(()=>{P=ae(T,1,"type-btn svelte-1uha8ag",null,P,{active:e(Bt)==="incoming"}),W=ae(D,1,"type-btn svelte-1uha8ag",null,W,{active:e(Bt)==="outgoing"}),ie=ae(Y,1,"type-btn small svelte-1uha8ag",null,ie,{active:e(ga)==="BTC"}),oe=ae(G,1,"type-btn small svelte-1uha8ag",null,oe,{active:e(ga)==="EUR"}),De=ae(ve,1,"type-btn small svelte-1uha8ag",null,De,{active:e(ga)==="USD"}),ye(Q,"placeholder",e(ga)==="BTC"?"e.g. 100000 or 0.001":"e.g. 100.00"),h(fa,`Fee (${e(Me)??""}, optional)`)}),Tt(z,()=>e(ps),me=>l(ps,me)),ea(Q,()=>e(qt),me=>l(qt,me)),ea(La,()=>e(fs),me=>l(fs,me)),Tt(Wa,()=>e(Qt),me=>l(Qt,me)),ea(sa,()=>e(gs),me=>l(gs,me)),ea(da,()=>e(as),me=>l(as,me)),ea(Da,()=>e(ts),me=>l(ts,me)),i(t,d)},$$slots:{default:!0}});var xn=r(kn,2);{let t=Ae(()=>{var v;return`Delete this ${(v=e(Ds))!=null&&v.amount_sats?xt(e(Ds).amount_sats):""} transaction? This cannot be undone.`});Gr(xn,{get open(){return e(Ir)},title:"Delete Transaction",get message(){return e(t)},confirmText:"Delete",danger:!0,onconfirm:Gi,onclose:()=>{l(Ir,!1),l(Ds,null)}})}var Cn=r(xn,2);At(Cn,{title:"Change Fiat Currency",get open(){return e(Fr)},onclose:Ql,children:(t,v)=>{var d=gd(),C=ue(d),T=s(C),P=r(s(T)),D=s(P,!0);a(P);var W=r(P,2),$=s(W,!0);a(W),rt(),a(T);var re=r(T,2),Y=r(s(re)),ie=s(Y,!0);a(Y),rt(),a(re);var G=r(re,2),oe=s(G);a(G),rt(2),a(C);var ve=r(C,2),De=s(ve);De.__click=Ql;var A=r(De,2);A.__click=()=>vl(e(Ss),!1);var z=r(A,2);z.__click=()=>vl(e(Ss),!0),a(ve),b(Z=>{h(D,e(Me)),h($,e(Ss)),h(ie,Z),h(oe,`Would you like to update all historical transaction values to ${e(Ss)??""}?`)},[()=>e(S).filter(Z=>Z.fiat_value!==null).length]),i(t,d)},$$slots:{default:!0}});var Tn=r(Cn,2);At(Tn,{title:"Import CSV",get open(){return e(Kr)},onclose:ul,children:(t,v)=>{var d=Ra(),C=ue(d);{var T=D=>{var W=bd(),$=ue(W),re=s($),Y=r(s(re),2);Ee(Y,21,()=>e(J),Se,(Z,se)=>{var ce=fd(),he=s(ce,!0);a(ce);var H={};b(()=>{h(he,e(se).name),H!==(H=e(se).id)&&(ce.value=(ce.__value=e(se).id)??"")}),i(Z,ce)}),a(Y),a(re);var ie=r(re,2),G=s(ie),oe=s(G);oe.__change=Bi,rt(4),a(G),a(ie);var ve=r(ie,2);{var De=Z=>{var se=md();Ee(se,21,()=>e(Lt),Se,(ce,he)=>{var H=hd(),Q=s(H,!0);a(H),b(()=>h(Q,e(he))),i(ce,H)}),a(se),i(Z,se)};k(ve,Z=>{e(Lt).length>0&&Z(De)})}a($);var A=r($,2),z=s(A);z.__click=ul,a(A),Tt(Y,()=>e(qs),Z=>l(qs,Z)),i(D,W)},P=D=>{var W=Ra(),$=ue(W);{var re=ie=>{var G=Fd(),oe=ue(G),ve=s(oe),De=s(ve),A=r(s(De));a(De);var z=r(De,2),Z=r(s(z));a(z);var se=r(z,2),ce=r(s(se));a(se);var he=r(se,2),H=r(s(he));a(he),a(ve);var Q=r(ve,2);{var be=Ge=>{var ze=kd(),da=r(s(ze),2);Ee(da,17,()=>e(Ts).slice(0,5),Se,(fa,Da)=>{var Ba=yd(),Ce=s(Ba,!0);a(Ba),b(()=>h(Ce,e(Da))),i(fa,Ba)});var nt=r(da,2);{var dt=fa=>{var Da=wd(),Ba=s(Da);a(Da),b(()=>h(Ba,`...and ${e(Ts).length-5} more`)),i(fa,Da)};k(nt,fa=>{e(Ts).length>5&&fa(dt)})}a(ze),i(Ge,ze)};k(Q,Ge=>{e(Ts).length>0&&Ge(be)})}var He=r(Q,2);{var ta=Ge=>{var ze=Td(),da=r(s(ze),2);Ee(da,17,()=>e(Lt).slice(0,5),Se,(fa,Da)=>{var Ba=xd(),Ce=s(Ba,!0);a(Ba),b(()=>h(Ce,e(Da))),i(fa,Ba)});var nt=r(da,2);{var dt=fa=>{var Da=Cd(),Ba=s(Da);a(Da),b(()=>h(Ba,`...and ${e(Lt).length-5} more`)),i(fa,Da)};k(nt,fa=>{e(Lt).length>5&&fa(dt)})}a(ze),i(Ge,ze)};k(He,Ge=>{e(Lt).length>0&&Ge(ta)})}var Ma=r(He,2),La=r(s(Ma),2),Ca=s(La);Ee(Ca,17,()=>e(Wt).slice(0,10),Se,(Ge,ze)=>{var da=Sd(),nt=s(da),dt=s(nt,!0);a(nt);var fa=r(nt,2);let Da;var Ba=s(fa,!0);a(fa);var Ce=r(fa,2),Pa=s(Ce,!0);a(Ce);var me=r(Ce,2),I=s(me,!0);a(me),a(da),b((V,de)=>{h(dt,V),Da=ae(fa,1,"svelte-1uha8ag",null,Da,{positive:e(ze).amount_sats>=0,negative:e(ze).amount_sats<0}),h(Ba,de),h(Pa,e(ze).category),h(I,e(ze).note||"—")},[()=>Ti(e(ze).timestamp),()=>xt(e(ze).amount_sats,!0)]),i(Ge,da)});var Wa=r(Ca,2);{var Va=Ge=>{var ze=Ed(),da=s(ze);a(ze),b(()=>h(da,`...and ${e(Wt).length-10} more transactions`)),i(Ge,ze)};k(Wa,Ge=>{e(Wt).length>10&&Ge(Va)})}a(La),a(Ma),a(oe);var lt=r(oe,2),ut=s(lt);ut.__click=()=>{l(Ot,"upload"),l(Vs,null)};var ua=r(ut,2);ua.__click=Pi;var sa=s(ua);a(ua),a(lt),b(Ge=>{var ze;h(A,` ${e(Xr)??""}`),h(Z,` ${((ze=e(Vs))==null?void 0:ze.name)??""}`),h(ce,` ${e(Wt).length??""}`),h(H,` ${Ge??""}`),ua.disabled=e(Wt).length===0,h(sa,`Import ${e(Wt).length??""} Transactions`)},[()=>{var Ge;return(Ge=e(J).find(ze=>ze.id===e(qs)))==null?void 0:Ge.name}]),i(ie,G)},Y=ie=>{var G=Ra(),oe=ue(G);{var ve=A=>{var z=Dd();i(A,z)},De=A=>{var z=Ra(),Z=ue(z);{var se=ce=>{var he=Ld(),H=ue(he),Q=s(H),be=s(Q),He=s(be);a(be);var ta=r(be,2),Ma=s(ta);a(ta);var La=r(ta,2);{var Ca=ua=>{var sa=Ad(),Ge=s(sa);a(sa),b(()=>h(Ge,`✕ Errors: ${e(Vt).errors.length??""}`)),i(ua,sa)};k(La,ua=>{var sa;(sa=e(Vt))!=null&&sa.errors&&e(Vt).errors.length>0&&ua(Ca)})}a(Q);var Wa=r(Q,2);{var Va=ua=>{var sa=Md();Ee(sa,21,()=>e(Vt).errors.slice(0,5),Se,(Ge,ze)=>{var da=Id(),nt=s(da,!0);a(da),b(()=>h(nt,e(ze))),i(Ge,da)}),a(sa),i(ua,sa)};k(Wa,ua=>{var sa;(sa=e(Vt))!=null&&sa.errors&&e(Vt).errors.length>0&&ua(Va)})}a(H);var lt=r(H,2),ut=s(lt);ut.__click=ul,a(lt),b(()=>{var ua,sa;h(He,`✓ Imported: ${((ua=e(Vt))==null?void 0:ua.imported)??""}`),h(Ma,`⊘ Skipped (duplicates): ${((sa=e(Vt))==null?void 0:sa.skipped)??""}`)}),i(ce,he)};k(Z,ce=>{e(Ot)==="done"&&ce(se)},!0)}i(A,z)};k(oe,A=>{e(Ot)==="importing"?A(ve):A(De,!1)},!0)}i(ie,G)};k($,ie=>{e(Ot)==="preview"?ie(re):ie(Y,!1)},!0)}i(D,W)};k(C,D=>{e(Ot)==="upload"?D(T):D(P,!1)})}i(t,d)},$$slots:{default:!0}});var Sn=r(Tn,2);At(Sn,{title:"Enable Database Encryption",get open(){return e(Qa)},onclose:vn,children:(t,v)=>{var d=Ra(),C=ue(d);{var T=D=>{var W=$d(),$=r(ue(W),2),re=r(s($),2);Ke(re),re.__input=()=>to(e(ht));var Y=r(re,2);{var ie=se=>{var ce=Bd(),he=s(ce),H=s(he);let Q;a(he);var be=r(he,2);let He;var ta=s(be,!0);a(be),a(ce),b(()=>{Q=ae(H,1,"strength-fill svelte-1uha8ag",null,Q,{"very-weak":e(ct).level==="very_weak",weak:e(ct).level==="weak",fair:e(ct).level==="fair",strong:e(ct).level==="strong","very-strong":e(ct).level==="very_strong"}),$s(H,`width: ${e(ct).score??""}%`),He=ae(be,1,"strength-label svelte-1uha8ag",null,He,{"very-weak":e(ct).level==="very_weak",weak:e(ct).level==="weak",fair:e(ct).level==="fair",strong:e(ct).level==="strong","very-strong":e(ct).level==="very_strong"}),h(ta,e(ct).label)}),i(se,ce)};k(Y,se=>{e(ct)&&se(ie)})}a($);var G=r($,2),oe=r(s(G),2);Ke(oe);var ve=r(oe,2);{var De=se=>{var ce=Pd();i(se,ce)};k(ve,se=>{e(mt)&&e(ht)!==e(mt)&&se(De)})}a(G);var A=r(G,2),z=s(A);z.__click=vn;var Z=r(z,2);Z.__click=ao,a(A),b(()=>Z.disabled=!e(ht)||e(ht)!==e(mt)),ea(re,()=>e(ht),se=>l(ht,se)),ea(oe,()=>e(mt),se=>l(mt,se)),i(D,W)},P=D=>{var W=Ra(),$=ue(W);{var re=Y=>{var ie=Rd(),G=ue(ie),oe=r(s(G),2),ve=s(oe);Ee(ve,21,()=>e(zt).split(" "),Se,(H,Q,be)=>{var He=Nd(),ta=s(He);ta.textContent=`${be+1}.`;var Ma=r(ta,2),La=s(Ma,!0);a(Ma),a(He),b(()=>h(La,e(Q))),i(H,He)}),a(ve);var De=r(ve,2);De.__click=io,a(oe);var A=r(oe,2),z=s(A),Z=s(z);Ke(Z),rt(2),a(z),a(A),a(G);var se=r(G,2),ce=s(se);ce.__click=()=>l(ks,"passphrase");var he=r(ce,2);he.__click=ro,a(se),b(()=>he.disabled=!e(ws)),iv(Z,()=>e(ws),H=>l(ws,H)),i(Y,ie)};k($,Y=>{e(ks)==="recovery"&&Y(re)},!0)}i(D,W)};k(C,D=>{e(ks)==="passphrase"?D(T):D(P,!1)})}i(t,d)},$$slots:{default:!0}});var En=r(Sn,2);At(En,{title:"Change Passphrase",get open(){return e(Ks)},onclose:()=>{l(Ks,!1),l(us,""),l(Mt,""),l(jt,""),l(vt,null)},children:(t,v)=>{var d=Od(),C=ue(d),T=r(s(C),2);Ke(T),a(C);var P=r(C,2),D=r(s(P),2);Ke(D),D.__input=()=>so(e(Mt));var W=r(D,2);{var $=A=>{var z=Ud(),Z=s(z),se=s(Z);let ce;a(Z);var he=r(Z,2);let H;var Q=s(he,!0);a(he),a(z),b(()=>{ce=ae(se,1,"strength-fill svelte-1uha8ag",null,ce,{"very-weak":e(vt).level==="very_weak",weak:e(vt).level==="weak",fair:e(vt).level==="fair",strong:e(vt).level==="strong","very-strong":e(vt).level==="very_strong"}),$s(se,`width: ${e(vt).score??""}%`),H=ae(he,1,"strength-label svelte-1uha8ag",null,H,{"very-weak":e(vt).level==="very_weak",weak:e(vt).level==="weak",fair:e(vt).level==="fair",strong:e(vt).level==="strong","very-strong":e(vt).level==="very_strong"}),h(Q,e(vt).label)}),i(A,z)};k(W,A=>{e(vt)&&A($)})}a(P);var re=r(P,2),Y=r(s(re),2);Ke(Y);var ie=r(Y,2);{var G=A=>{var z=zd();i(A,z)};k(ie,A=>{e(jt)&&e(Mt)!==e(jt)&&A(G)})}a(re);var oe=r(re,2),ve=s(oe);ve.__click=()=>{l(Ks,!1),l(us,""),l(Mt,""),l(jt,""),l(vt,null)};var De=r(ve,2);De.__click=lo,a(oe),b(()=>De.disabled=!e(us)||!e(Mt)||e(Mt)!==e(jt)),ea(T,()=>e(us),A=>l(us,A)),ea(D,()=>e(Mt),A=>l(Mt,A)),ea(Y,()=>e(jt),A=>l(jt,A)),i(t,d)},$$slots:{default:!0}});var Fn=r(En,2);At(Fn,{title:"Remove Encryption",get open(){return e(Xs)},onclose:()=>{l(Xs,!1),l(ds,"")},children:(t,v)=>{var d=Wd(),C=r(ue(d),2),T=r(s(C),2);Ke(T),a(C);var P=r(C,2),D=s(P);D.__click=()=>{l(Xs,!1),l(ds,"")};var W=r(D,2);W.__click=no,a(P),b(()=>W.disabled=!e(ds)),ea(T,()=>e(ds),$=>l(ds,$)),i(t,d)},$$slots:{default:!0}});var fo=r(Fn,2);Gr(fo,{get open(){return e(Br)},title:"Reset All Data",message:"Are you sure you want to delete ALL your data? This includes all wallets, transactions, accounts, and settings. This action cannot be undone.",confirmText:"Yes, Reset Everything",danger:!0,onconfirm:uo,onclose:()=>l(Br,!1)}),i(n,un),Rs()}kr(["click","keydown","change","input"]);export{Xd as component};
