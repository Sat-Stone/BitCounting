var co=Object.defineProperty;var Tn=n=>{throw TypeError(n)};var uo=(n,i,c)=>i in n?co(n,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[i]=c;var Sn=(n,i,c)=>uo(n,typeof i!="symbol"?i+"":i,c),ul=(n,i,c)=>i.has(n)||Tn("Cannot "+c);var ls=(n,i,c)=>(ul(n,i,"read from private field"),c?c.call(n):i.get(n)),dr=(n,i,c)=>i.has(n)?Tn("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(n):i.set(n,c),dl=(n,i,c,d)=>(ul(n,i,"write to private field"),d?d.call(n,c):i.set(n,c),c),En=(n,i,c)=>(ul(n,i,"access private method"),c);import{c as Pa,a as o,f as u,d as Dt,t as ct}from"../chunks/CRIM0Y84.js";import{q as _l,h as St,Q as _o,a as gl,k as go,b as po,A as e,C as fo,n as ho,H as mo,o as Fn,t as pl,f as zr,a9 as bo,ay as yo,ag as Dn,c as ns,e as wl,s as wo,aF as Un,aw as Tl,aG as zn,a7 as An,aB as xo,aH as ko,aI as Co,aJ as To,aK as is,r as On,p as Wn,aL as fl,x as Vn,as as So,aM as Eo,av as Fo,d as Do,aN as Sl,v as qn,an as Ao,aO as Io,aP as Mo,aQ as Hn,aR as Lo,aS as Bo,aT as Po,aU as $o,aV as No,aD as Ro,j as El,w as Gn,a0 as Ms,g as _e,a2 as Ls,aW as Uo,a3 as t,a4 as a,a5 as r,a1 as b,u as _r,aC as y,F as l,ah as nt,aE as Me,D as Nt,aX as zo,aY as In}from"../chunks/3dYk9t86.js";import{d as hr,e as Yn,s as h}from"../chunks/RFUBN4CG.js";import{i as k,p as $a,b as Oo}from"../chunks/Qi2aA18Y.js";import{s as Wo}from"../chunks/DxVck5LP.js";function Ae(n,i){return i}function Vo(n,i,c){for(var d=[],g=i.length,p,f=i.length,w=0;w<g;w++){let H=i[w];Wn(H,()=>{if(p){if(p.pending.delete(H),p.done.add(H),p.pending.size===0){var x=n.outrogroups;xl(Tl(p.done)),x.delete(p),x.size===0&&(n.outrogroups=null)}}else f-=1},!1)}if(f===0){var m=d.length===0&&c!==null;if(m){var B=c,$=B.parentNode;Fo($),$.append(B),n.items.clear()}xl(i,!m)}else p={pending:new Set(i),done:new Set},(n.outrogroups??(n.outrogroups=new Set)).add(p)}function xl(n,i=!0){for(var c=0;c<n.length;c++)Do(n[c],i)}var Mn;function Ie(n,i,c,d,g,p=null){var f=n,w=new Map,m=(i&Un)!==0;if(m){var B=n;f=St?_l(_o(B)):B.appendChild(gl())}St&&go();var $=null,H=fo(()=>{var F=c();return zn(F)?F:F==null?[]:Tl(F)}),x,D=!0;function R(){S.fallback=$,qo(S,x,f,i,d),$!==null&&(x.length===0?($.f&is)===0?On($):($.f^=is,gr($,null,f)):Wn($,()=>{$=null}))}var ae=po(()=>{x=e(H);var F=x.length;let J=!1;if(St){var he=ho(f)===mo;he!==(F===0)&&(f=Fn(),_l(f),pl(!1),J=!0)}for(var te=new Set,me=ns,ue=wo(),oe=0;oe<F;oe+=1){St&&zr.nodeType===bo&&zr.data===yo&&(f=zr,J=!0,pl(!1));var ke=x[oe],xe=d(ke,oe),A=D?null:w.get(xe);A?(A.v&&Dn(A.v,ke),A.i&&Dn(A.i,oe),ue&&me.skipped_effects.delete(A.e)):(A=Ho(w,D?f:Mn??(Mn=gl()),ke,xe,oe,g,i,c),D||(A.e.f|=is),w.set(xe,A)),te.add(xe)}if(F===0&&p&&!$&&(D?$=wl(()=>p(f)):($=wl(()=>p(Mn??(Mn=gl()))),$.f|=is)),St&&F>0&&_l(Fn()),!D)if(ue){for(const[Y,se]of w)te.has(Y)||me.skipped_effects.add(se.e);me.oncommit(R),me.ondiscard(()=>{})}else R();J&&pl(!0),e(H)}),S={effect:ae,items:w,outrogroups:null,fallback:$};D=!1,St&&(f=zr)}function qo(n,i,c,d,g){var A,Y,se,we,Ce,aa,ka,va,at;var p=(d&Eo)!==0,f=i.length,w=n.items,m=n.effect.first,B,$=null,H,x=[],D=[],R,ae,S,F;if(p)for(F=0;F<f;F+=1)R=i[F],ae=g(R,F),S=w.get(ae).e,(S.f&is)===0&&((Y=(A=S.nodes)==null?void 0:A.a)==null||Y.measure(),(H??(H=new Set)).add(S));for(F=0;F<f;F+=1){if(R=i[F],ae=g(R,F),S=w.get(ae).e,n.outrogroups!==null)for(const Na of n.outrogroups)Na.pending.delete(S),Na.done.delete(S);if((S.f&is)!==0)if(S.f^=is,S===m)gr(S,null,c);else{var J=$?$.next:m;S===n.effect.last&&(n.effect.last=S.prev),S.prev&&(S.prev.next=S.next),S.next&&(S.next.prev=S.prev),fs(n,$,S),fs(n,S,J),gr(S,J,c),$=S,x=[],D=[],m=$.next;continue}if((S.f&fl)!==0&&(On(S),p&&((we=(se=S.nodes)==null?void 0:se.a)==null||we.unfix(),(H??(H=new Set)).delete(S))),S!==m){if(B!==void 0&&B.has(S)){if(x.length<D.length){var he=D[0],te;$=he.prev;var me=x[0],ue=x[x.length-1];for(te=0;te<x.length;te+=1)gr(x[te],he,c);for(te=0;te<D.length;te+=1)B.delete(D[te]);fs(n,me.prev,ue.next),fs(n,$,me),fs(n,ue,he),m=he,$=ue,F-=1,x=[],D=[]}else B.delete(S),gr(S,m,c),fs(n,S.prev,S.next),fs(n,S,$===null?n.effect.first:$.next),fs(n,$,S),$=S;continue}for(x=[],D=[];m!==null&&m!==S;)(B??(B=new Set)).add(m),D.push(m),m=m.next;if(m===null)continue}(S.f&is)===0&&x.push(S),$=S,m=S.next}if(n.outrogroups!==null){for(const Na of n.outrogroups)Na.pending.size===0&&(xl(Tl(Na.done)),(Ce=n.outrogroups)==null||Ce.delete(Na));n.outrogroups.size===0&&(n.outrogroups=null)}if(m!==null||B!==void 0){var oe=[];if(B!==void 0)for(S of B)(S.f&fl)===0&&oe.push(S);for(;m!==null;)(m.f&fl)===0&&m!==n.fallback&&oe.push(m),m=m.next;var ke=oe.length;if(ke>0){var xe=(d&Un)!==0&&f===0?c:null;if(p){for(F=0;F<ke;F+=1)(ka=(aa=oe[F].nodes)==null?void 0:aa.a)==null||ka.measure();for(F=0;F<ke;F+=1)(at=(va=oe[F].nodes)==null?void 0:va.a)==null||at.fix()}Vo(n,oe,xe)}}p&&Vn(()=>{var Na,At;if(H!==void 0)for(S of H)(At=(Na=S.nodes)==null?void 0:Na.a)==null||At.apply()})}function Ho(n,i,c,d,g,p,f,w){var m=(f&Co)!==0?(f&To)===0?xo(c,!1,!1):An(c):null,B=(f&ko)!==0?An(g):null;return{v:m,i:B,e:wl(()=>(p(i,m??c,B??g,w),()=>{n.delete(d)}))}}function gr(n,i,c){if(n.nodes)for(var d=n.nodes.start,g=n.nodes.end,p=i&&(i.f&is)===0?i.nodes.start:c;d!==null;){var f=So(d);if(p.before(d),d===g)return;d=f}}function fs(n,i,c){i===null?n.effect.first=c:i.next=c,c===null?n.effect.last=i:c.prev=i}const Ln=[...` 	
\r\f \v\uFEFF`];function Go(n,i,c){var d=n==null?"":""+n;if(i&&(d=d?d+" "+i:i),c){for(var g in c)if(c[g])d=d?d+" "+g:g;else if(d.length)for(var p=g.length,f=0;(f=d.indexOf(g,f))>=0;){var w=f+p;(f===0||Ln.includes(d[f-1]))&&(w===d.length||Ln.includes(d[w]))?d=(f===0?"":d.substring(0,f))+d.substring(w+1):f=w}}return d===""?null:d}function Yo(n,i){return n==null?null:String(n)}function Q(n,i,c,d,g,p){var f=n.__className;if(St||f!==c||f===void 0){var w=Go(c,d,p);(!St||w!==n.getAttribute("class"))&&(w==null?n.removeAttribute("class"):i?n.className=w:n.setAttribute("class",w)),n.__className=c}else if(p&&g!==p)for(var m in p){var B=!!p[m];(g==null||B!==!!g[m])&&n.classList.toggle(m,B)}return p}function Is(n,i,c,d){var g=n.__style;if(St||g!==i){var p=Yo(i);(!St||p!==n.getAttribute("style"))&&(p==null?n.removeAttribute("style"):n.style.cssText=p),n.__style=i}return d}function Wr(n,i,c=!1){if(n.multiple){if(i==null)return;if(!zn(i))return Io();for(var d of n.options)d.selected=i.includes(pr(d));return}for(d of n.options){var g=pr(d);if(Mo(g,i)){d.selected=!0;return}}(!c||i!==void 0)&&(n.selectedIndex=-1)}function kl(n){var i=new MutationObserver(()=>{Wr(n,n.__value)});i.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ao(()=>{i.disconnect()})}function xt(n,i,c=i){var d=new WeakSet,g=!0;Sl(n,"change",p=>{var f=p?"[selected]":":checked",w;if(n.multiple)w=[].map.call(n.querySelectorAll(f),pr);else{var m=n.querySelector(f)??n.querySelector("option:not([disabled])");w=m&&pr(m)}c(w),ns!==null&&d.add(ns)}),qn(()=>{var p=i();if(n===document.activeElement){var f=Hn??ns;if(d.has(f))return}if(Wr(n,p,g),g&&p===void 0){var w=n.querySelector(":checked");w!==null&&(p=pr(w),c(p))}n.__value=p,g=!1}),kl(n)}function pr(n){return"__value"in n?n.__value:n.value}const jo=Symbol("is custom element"),Jo=Symbol("is html");function Xe(n){if(St){var i=!1,c=()=>{if(!i){if(i=!0,n.hasAttribute("value")){var d=n.value;fe(n,"value",null),n.value=d}if(n.hasAttribute("checked")){var g=n.checked;fe(n,"checked",null),n.checked=g}}};n.__on_r=c,Vn(c),Lo()}}function Ko(n,i){var c=jn(n);c.value===(c.value=i??void 0)||n.value===i&&(i!==0||n.nodeName!=="PROGRESS")||(n.value=i??"")}function fe(n,i,c,d){var g=jn(n);St&&(g[i]=n.getAttribute(i),i==="src"||i==="srcset"||i==="href"&&n.nodeName==="LINK")||g[i]!==(g[i]=c)&&(i==="loading"&&(n[$o]=c),c==null?n.removeAttribute(i):typeof c!="string"&&Xo(n).includes(i)?n[i]=c:n.setAttribute(i,c))}function jn(n){return n.__attributes??(n.__attributes={[jo]:n.nodeName.includes("-"),[Jo]:n.namespaceURI===Bo})}var Bn=new Map;function Xo(n){var i=n.getAttribute("is")||n.nodeName,c=Bn.get(i);if(c)return c;Bn.set(i,c=[]);for(var d,g=n,p=Element.prototype;p!==g;){d=No(g);for(var f in d)d[f].set&&c.push(f);g=Po(g)}return c}function ea(n,i,c=i){var d=new WeakSet;Sl(n,"input",async g=>{var p=g?n.defaultValue:n.value;if(p=hl(n)?ml(p):p,c(p),ns!==null&&d.add(ns),await Ro(),p!==(p=i())){var f=n.selectionStart,w=n.selectionEnd,m=n.value.length;if(n.value=p??"",w!==null){var B=n.value.length;f===w&&w===m&&B>m?(n.selectionStart=B,n.selectionEnd=B):(n.selectionStart=f,n.selectionEnd=Math.min(w,B))}}}),(St&&n.defaultValue!==n.value||El(i)==null&&n.value)&&(c(hl(n)?ml(n.value):n.value),ns!==null&&d.add(ns)),Gn(()=>{var g=i();if(n===document.activeElement){var p=Hn??ns;if(d.has(p))return}hl(n)&&g===ml(n.value)||n.type==="date"&&!g&&!n.value||g!==n.value&&(n.value=g??"")})}function Zo(n,i,c=i){Sl(n,"change",d=>{var g=d?n.defaultChecked:n.checked;c(g)}),(St&&n.defaultChecked!==n.checked||El(i)==null)&&c(n.checked),Gn(()=>{var d=i();n.checked=!!d})}function hl(n){var i=n.type;return i==="number"||i==="range"}function ml(n){return n===""?null:+n}var hs,qs,fr,Vr,Jn;const qr=class qr{constructor(i){dr(this,Vr);dr(this,hs,new WeakMap);dr(this,qs);dr(this,fr);dl(this,fr,i)}observe(i,c){var d=ls(this,hs).get(i)||new Set;return d.add(c),ls(this,hs).set(i,d),En(this,Vr,Jn).call(this).observe(i,ls(this,fr)),()=>{var g=ls(this,hs).get(i);g.delete(c),g.size===0&&(ls(this,hs).delete(i),ls(this,qs).unobserve(i))}}};hs=new WeakMap,qs=new WeakMap,fr=new WeakMap,Vr=new WeakSet,Jn=function(){return ls(this,qs)??dl(this,qs,new ResizeObserver(i=>{for(var c of i){qr.entries.set(c.target,c);for(var d of ls(this,hs).get(c.target)||[])d(c)}}))},Sn(qr,"entries",new WeakMap);let Cl=qr;var Qo=new Cl({box:"border-box"});function ev(n,i,c){var d=Qo.observe(n,()=>c(n[i]));qn(()=>(El(()=>c(n[i])),d))}async function le(n,i={},c){return window.__TAURI_INTERNALS__.invoke(n,i,c)}var av=u('<div class="modal-overlay svelte-ta60gp" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="modal svelte-ta60gp"><div class="modal-header svelte-ta60gp"><h2 id="modal-title" class="svelte-ta60gp"> </h2> <button class="close-btn svelte-ta60gp" aria-label="Close modal">×</button></div> <div class="modal-content svelte-ta60gp"><!></div></div></div>');function Ft(n,i){Ms(i,!0);function c(w){w.key==="Escape"&&i.onclose()}function d(w){w.target===w.currentTarget&&i.onclose()}var g=Pa();Yn("keydown",Uo,c);var p=_e(g);{var f=w=>{var m=av();m.__click=d;var B=t(m);B.__click=S=>S.stopPropagation();var $=t(B),H=t($),x=t(H,!0);a(H);var D=r(H,2);D.__click=function(...S){var F;(F=i.onclose)==null||F.apply(this,S)},a($);var R=r($,2),ae=t(R);Wo(ae,()=>i.children),a(R),a(B),a(m),b(()=>h(x,i.title)),o(w,m)};k(p,w=>{i.open&&w(f)})}o(n,g),Ls()}hr(["click"]);var tv=u('<span class="item-dot personal svelte-1fd3ybn"></span>'),sv=u('<span class="item-dot family svelte-1fd3ybn"></span>'),rv=u('<span class="item-dot business svelte-1fd3ybn"></span>'),lv=u('<span class="item-dot all svelte-1fd3ybn"></span>'),nv=u("<button><!> </button>"),iv=u('<div class="dropdown-menu svelte-1fd3ybn"></div>'),ov=u('<div class="dropdown svelte-1fd3ybn"><button class="dropdown-trigger svelte-1fd3ybn"><span class="dropdown-value svelte-1fd3ybn"> </span> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg></button> <!></div>');function Pn(n,i){Ms(i,!0);let c=$a(i,"value",15),d=$a(i,"placeholder",3,"Select..."),g=y(!1),p;function f(){const F=i.options.find(J=>J.value===c());return(F==null?void 0:F.label)||d()}function w(F){c(F.value),l(g,!1)}function m(F){p&&!p.contains(F.target)&&l(g,!1)}_r(()=>(e(g)?document.addEventListener("click",m):document.removeEventListener("click",m),()=>document.removeEventListener("click",m)));var B=ov(),$=t(B);$.__click=()=>l(g,!e(g));var H=t($),x=t(H,!0);a(H);var D=r(H,2);let R;a($);var ae=r($,2);{var S=F=>{var J=iv();Ie(J,21,()=>i.options,Ae,(he,te)=>{var me=nv();let ue;me.__click=()=>w(e(te));var oe=t(me);{var ke=Y=>{var se=tv();o(Y,se)},xe=Y=>{var se=Pa(),we=_e(se);{var Ce=ka=>{var va=sv();o(ka,va)},aa=ka=>{var va=Pa(),at=_e(va);{var Na=kt=>{var Ka=rv();o(kt,Ka)},At=kt=>{var Ka=lv();o(kt,Ka)};k(at,kt=>{e(te).type==="business"?kt(Na):kt(At,!1)},!0)}o(ka,va)};k(we,ka=>{e(te).type==="family"?ka(Ce):ka(aa,!1)},!0)}o(Y,se)};k(oe,Y=>{e(te).type==="personal"?Y(ke):Y(xe,!1)})}var A=r(oe);a(me),b(()=>{ue=Q(me,1,"dropdown-item svelte-1fd3ybn",null,ue,{selected:e(te).value===c()}),h(A,` ${e(te).label??""}`)}),o(he,me)}),a(J),o(F,J)};k(ae,F=>{e(g)&&F(S)})}a(B),Oo(B,F=>p=F,()=>p),b(F=>{h(x,F),R=Q(D,0,"dropdown-arrow svelte-1fd3ybn",null,R,{open:e(g)})},[f]),o(n,B),Ls()}hr(["click"]);var vv=Dt('<svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>');function Kn(n,i){let c=$a(i,"size",3,20),d=$a(i,"color",3,"currentColor");var g=vv();b(()=>{fe(g,"width",c()),fe(g,"height",c()),fe(g,"stroke",d())}),o(n,g)}var cv=u('<div class="overlay svelte-a254c7"><div class="modal svelte-a254c7"><div class="modal-header svelte-a254c7"><h2 class="svelte-a254c7">Delete Wallet</h2> <button class="close-btn svelte-a254c7"><!></button></div> <div class="modal-body svelte-a254c7"><p class="warning svelte-a254c7">This action cannot be undone. All transaction data for this wallet will be permanently deleted.</p> <div class="confirm-input svelte-a254c7"><label class="svelte-a254c7">Type <span class="confirm-text svelte-a254c7"> </span> to confirm:</label> <input type="text" class="svelte-a254c7"/></div> <div class="form-actions svelte-a254c7"><button class="btn secondary svelte-a254c7">Cancel</button> <button class="btn danger svelte-a254c7">Delete Wallet</button></div></div></div></div>');function uv(n,i){Ms(i,!0);let c=$a(i,"open",3,!1),d=y("");const g=Me(()=>`delete ${i.name}`),p=Me(()=>e(d).toLowerCase()===e(g).toLowerCase());function f(){e(p)&&(l(d,""),i.onconfirm())}function w(){l(d,""),i.onclose()}var m=Pa(),B=_e(m);{var $=H=>{var x=cv();x.__click=w;var D=t(x);D.__click=A=>A.stopPropagation();var R=t(D),ae=r(t(R),2);ae.__click=w;var S=t(ae);Kn(S,{size:20}),a(ae),a(R);var F=r(R,2),J=r(t(F),2),he=t(J),te=r(t(he)),me=t(te);a(te),nt(),a(he);var ue=r(he,2);Xe(ue),ue.__keydown=A=>A.key==="Enter"&&f(),a(J);var oe=r(J,2),ke=t(oe);ke.__click=w;var xe=r(ke,2);xe.__click=f,a(oe),a(F),a(D),a(x),b(()=>{h(me,`delete ${i.name??""}`),fe(ue,"placeholder",`delete ${i.name??""}`),xe.disabled=!e(p)}),ea(ue,()=>e(d),A=>l(d,A)),o(H,x)};k(B,H=>{c()&&H($)})}o(n,m),Ls()}hr(["click","keydown"]);var dv=Dt('<svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="6" width="20" height="14" rx="2"></rect><path d="M2 10h20"></path><circle cx="16" cy="14" r="1.5" stroke="none"></circle></svg>');function bl(n,i){let c=$a(i,"size",3,20),d=$a(i,"color",3,"currentColor");var g=dv(),p=r(t(g),2);a(g),b(()=>{fe(g,"width",c()),fe(g,"height",c()),fe(g,"stroke",d()),fe(p,"fill",d())}),o(n,g)}var _v=Dt('<svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-3-6.7"></path><path d="M21 4v5h-5"></path></svg>');function yl(n,i){let c=$a(i,"size",3,20),d=$a(i,"color",3,"currentColor");var g=_v();b(()=>{fe(g,"width",c()),fe(g,"height",c()),fe(g,"stroke",d())}),o(n,g)}var gv=Dt('<svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 5v14"></path><path d="M12 5v14"></path><path d="M9 5h4.5a3 3 0 0 1 0 6H9"></path><path d="M9 11h5a3.5 3.5 0 0 1 0 7H9"></path><path d="M9 8h6"></path><path d="M9 16h6"></path></svg>');function $n(n,i){let c=$a(i,"size",3,20),d=$a(i,"color",3,"currentColor");var g=gv();b(()=>{fe(g,"width",c()),fe(g,"height",c()),fe(g,"stroke",d())}),o(n,g)}var pv=Dt('<svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>');function As(n,i){let c=$a(i,"size",3,20),d=$a(i,"color",3,"currentColor");var g=pv();b(()=>{fe(g,"width",c()),fe(g,"height",c()),fe(g,"stroke",d())}),o(n,g)}var fv=Dt('<svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>');function Nn(n,i){let c=$a(i,"size",3,24),d=$a(i,"color",3,"currentColor");var g=fv();b(()=>{fe(g,"width",c()),fe(g,"height",c()),fe(g,"stroke",d())}),o(n,g)}var hv=u('<div class="overlay svelte-7e0w24"><div class="modal svelte-7e0w24"><div class="modal-header svelte-7e0w24"><h2> </h2> <button class="close-btn svelte-7e0w24"><!></button></div> <div class="modal-body svelte-7e0w24"><p class="svelte-7e0w24"> </p> <div class="form-actions svelte-7e0w24"><button class="btn secondary svelte-7e0w24">Cancel</button> <button> </button></div></div></div></div>');function Or(n,i){let c=$a(i,"open",3,!1),d=$a(i,"title",3,"Confirm"),g=$a(i,"message",3,"Are you sure?"),p=$a(i,"confirmText",3,"Confirm"),f=$a(i,"danger",3,!1);var w=Pa(),m=_e(w);{var B=$=>{var H=hv();H.__click=function(...Y){var se;(se=i.onclose)==null||se.apply(this,Y)};var x=t(H);x.__click=Y=>Y.stopPropagation();var D=t(x),R=t(D);let ae;var S=t(R,!0);a(R);var F=r(R,2);F.__click=function(...Y){var se;(se=i.onclose)==null||se.apply(this,Y)};var J=t(F);Kn(J,{size:20}),a(F),a(D);var he=r(D,2),te=t(he),me=t(te,!0);a(te);var ue=r(te,2),oe=t(ue);oe.__click=function(...Y){var se;(se=i.onclose)==null||se.apply(this,Y)};var ke=r(oe,2);let xe;ke.__click=function(...Y){var se;(se=i.onconfirm)==null||se.apply(this,Y)};var A=t(ke,!0);a(ke),a(ue),a(he),a(x),a(H),b(()=>{ae=Q(R,1,"svelte-7e0w24",null,ae,{danger:f()}),h(S,d()),h(me,g()),xe=Q(ke,1,"btn svelte-7e0w24",null,xe,{danger:f()}),h(A,p())}),o($,H)};k(m,$=>{c()&&$(B)})}o(n,w)}hr(["click"]);var mv=u('<div class="empty svelte-9fnibp">No data</div>'),bv=u('<div class="bar-container svelte-9fnibp"><div class="bar-wrapper svelte-9fnibp"><div class="bar svelte-9fnibp"></div></div> <span class="bar-label svelte-9fnibp"> </span></div>'),yv=u('<div class="bars svelte-9fnibp"></div>'),wv=u('<div class="chart svelte-9fnibp"><!></div>');function xv(n,i){Ms(i,!0);let c=$a(i,"height",3,200);const d=Me(()=>Math.max(...i.data.map(B=>B.value),1)),g=Me(()=>i.data.length>0?Math.min(40,100/i.data.length-2):40);var p=wv(),f=t(p);{var w=B=>{var $=mv();o(B,$)},m=B=>{var $=yv();Ie($,21,()=>i.data,Ae,(H,x)=>{var D=bv(),R=t(D),ae=t(R);a(R);var S=r(R,2),F=t(S,!0);a(S),a(D),b(()=>{Is(D,`width: ${e(g)??""}%`),Is(ae,`height: ${e(x).value/e(d)*100}%; background: ${(e(x).color||"#f7931a")??""}`),h(F,e(x).label)}),o(H,D)}),a($),o(B,$)};k(f,B=>{i.data.length===0?B(w):B(m,!1)})}a(p),b(()=>Is(p,`height: ${c()??""}px`)),o(n,p),Ls()}var kv=u('<div class="empty svelte-6s3h9y">No data</div>'),Cv=Dt("<path></path>"),Tv=Dt('<svg class="svelte-6s3h9y"><!><circle fill="#111"></circle></svg>'),Sv=u('<div class="legend-item svelte-6s3h9y"><span class="legend-dot svelte-6s3h9y"></span> <span class="legend-label svelte-6s3h9y"> </span> <span class="legend-value svelte-6s3h9y"> </span></div>'),Ev=u('<div class="pie-chart svelte-6s3h9y"><!> <div class="legend svelte-6s3h9y"></div></div>');function Rn(n,i){Ms(i,!0);let c=$a(i,"size",3,180);const d=Me(()=>i.data.reduce((x,D)=>x+D.value,0)),g=Me(()=>{let x=0;return i.data.map(D=>{const R=e(d)>0?D.value/e(d)*360:0,ae={...D,startAngle:x,endAngle:x+R,percentage:e(d)>0?D.value/e(d)*100:0};return x+=R,ae})});function p(x,D,R){const ae=f(R,D),S=f(R,x),F=D-x<=180?"0":"1";return["M",R,R,"L",ae.x,ae.y,"A",R,R,0,F,0,S.x,S.y,"Z"].join(" ")}function f(x,D){const R=(D-90)*Math.PI/180;return{x:x+x*Math.cos(R),y:x+x*Math.sin(R)}}var w=Ev(),m=t(w);{var B=x=>{var D=kv();b(()=>Is(D,`width: ${c()??""}px; height: ${c()??""}px`)),o(x,D)},$=x=>{var D=Tv(),R=t(D);Ie(R,17,()=>e(g),Ae,(S,F)=>{var J=Pa(),he=_e(J);{var te=me=>{var ue=Cv();b(oe=>{fe(ue,"d",oe),fe(ue,"fill",e(F).color)},[()=>p(e(F).startAngle,e(F).endAngle,c()/2)]),o(me,ue)};k(he,me=>{e(F).percentage>0&&me(te)})}o(S,J)});var ae=r(R);a(D),b(()=>{fe(D,"width",c()),fe(D,"height",c()),fe(D,"viewBox",`0 0 ${c()??""} ${c()??""}`),fe(ae,"cx",c()/2),fe(ae,"cy",c()/2),fe(ae,"r",c()/4)}),o(x,D)};k(m,x=>{i.data.length===0||e(d)===0?x(B):x($,!1)})}var H=r(m,2);Ie(H,21,()=>e(g).filter(x=>x.percentage>0),Ae,(x,D)=>{var R=Sv(),ae=t(R),S=r(ae,2),F=t(S,!0);a(S);var J=r(S,2),he=t(J);a(J),a(R),b(te=>{Is(ae,`background: ${e(D).color??""}`),h(F,e(D).label),h(he,`${te??""}%`)},[()=>e(D).percentage.toFixed(0)]),o(x,R)}),a(H),a(w),o(n,w),Ls()}var Fv=Dt('<line stroke="#1a1a1a" stroke-dasharray="2,2"></line><text text-anchor="end" dominant-baseline="middle" fill="#555" font-size="10"> </text>',1),Dv=Dt('<path fill="url(#areaGradient)"></path>'),Av=Dt('<path fill="none" stroke="#f7931a" stroke-width="2"></path>'),Iv=Dt('<circle r="3" fill="#f7931a"></circle>'),Mv=Dt('<text text-anchor="middle" fill="#555" font-size="10"> </text>'),Lv=u('<div class="line-chart svelte-1srghcq"><svg class="svelte-1srghcq"><defs><linearGradient id="areaGradient" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#f7931a;stop-opacity:0.3"></stop><stop offset="100%" style="stop-color:#f7931a;stop-opacity:0.05"></stop></linearGradient></defs><!><!><!><!><!></svg></div>');function Bv(n,i){Ms(i,!0);let c=$a(i,"data",19,()=>[]),d=$a(i,"height",3,200);const g={top:20,right:20,bottom:30,left:60};let p=y(400),f=Me(()=>e(p)-g.left-g.right),w=Me(()=>d()-g.top-g.bottom),m=Me(()=>Math.min(...c().map(A=>A.value),0)),B=Me(()=>Math.max(...c().map(A=>A.value))),$=Me(()=>e(B)-e(m)||1);function H(A){return c().length<=1?g.left+e(f)/2:g.left+A/(c().length-1)*e(f)}function x(A){return g.top+e(w)-(A-e(m))/e($)*e(w)}let D=Me(()=>c().length===0?"":c().map((A,Y)=>{const se=H(Y),we=x(A.value);return`${Y===0?"M":"L"} ${se} ${we}`}).join(" ")),R=Me(()=>{if(c().length===0)return"";const A=x(e(m));return`${c().map((se,we)=>{const Ce=H(we),aa=x(se.value);return`${we===0?"M":"L"} ${Ce} ${aa}`}).join(" ")} L ${H(c().length-1)} ${A} L ${H(0)} ${A} Z`});function ae(A){return Math.abs(A)>=1e6?(A/1e6).toFixed(1)+"M":Math.abs(A)>=1e3?(A/1e3).toFixed(0)+"k":A.toLocaleString()}let S=Me(()=>{const A=[],Y=e($)/4;for(let se=0;se<=4;se++)A.push(e(m)+Y*se);return A});var F=Lv(),J=t(F),he=r(t(J));Ie(he,17,()=>e(S),Ae,(A,Y)=>{var se=Fv(),we=_e(se),Ce=r(we),aa=t(Ce,!0);a(Ce),b((ka,va,at,Na)=>{fe(we,"x1",g.left),fe(we,"y1",ka),fe(we,"x2",e(p)-g.right),fe(we,"y2",va),fe(Ce,"x",g.left-8),fe(Ce,"y",at),h(aa,Na)},[()=>x(e(Y)),()=>x(e(Y)),()=>x(e(Y)),()=>ae(e(Y))]),o(A,se)});var te=r(he);{var me=A=>{var Y=Dv();b(()=>fe(Y,"d",e(R))),o(A,Y)};k(te,A=>{c().length>0&&A(me)})}var ue=r(te);{var oe=A=>{var Y=Av();b(()=>fe(Y,"d",e(D))),o(A,Y)};k(ue,A=>{c().length>0&&A(oe)})}var ke=r(ue);Ie(ke,17,c,Ae,(A,Y,se)=>{var we=Iv();b((Ce,aa)=>{fe(we,"cx",Ce),fe(we,"cy",aa)},[()=>H(se),()=>x(e(Y).value)]),o(A,we)});var xe=r(ke);Ie(xe,17,c,Ae,(A,Y,se)=>{var we=Pa(),Ce=_e(we);{var aa=ka=>{var va=Mv(),at=t(va,!0);a(va),b(Na=>{fe(va,"x",Na),fe(va,"y",d()-8),h(at,e(Y).label)},[()=>H(se)]),o(ka,va)};k(Ce,ka=>{(se%Math.ceil(c().length/6)===0||se===c().length-1)&&ka(aa)})}o(A,we)}),a(J),a(F),b(()=>{fe(J,"width",e(p)),fe(J,"height",d())}),ev(F,"clientWidth",A=>l(p,A)),o(n,F),Ls()}const Pv={name:"Phoenix Wallet",detect:n=>["date","id","type","amount_msat","payment_hash"].every(c=>n.includes(c)),parse:(n,i)=>{const c=[],d=[],g=[],p={date:n.indexOf("date"),id:n.indexOf("id"),type:n.indexOf("type"),amount_msat:n.indexOf("amount_msat"),amount_fiat:n.indexOf("amount_fiat"),mining_fee_sat:n.indexOf("mining_fee_sat"),mining_fee_fiat:n.indexOf("mining_fee_fiat"),service_fee_msat:n.indexOf("service_fee_msat"),service_fee_fiat:n.indexOf("service_fee_fiat"),payment_hash:n.indexOf("payment_hash"),tx_id:n.indexOf("tx_id"),description:n.indexOf("description")};for(let f=0;f<i.length;f++){const w=i[f];try{if(w.length===0||w.every(A=>!A.trim()))continue;const m=w[p.date];if(!m){d.push(`Row ${f+1}: Missing date`);continue}const B=Math.floor(new Date(m).getTime()/1e3);if(isNaN(B)){d.push(`Row ${f+1}: Invalid date format "${m}"`);continue}const $=parseInt(w[p.amount_msat],10);if(isNaN($)){d.push(`Row ${f+1}: Invalid amount "${w[p.amount_msat]}"`);continue}const H=Math.round($/1e3),x=parseInt(w[p.mining_fee_sat]||"0",10)||0,D=parseInt(w[p.service_fee_msat]||"0",10)||0,R=x+Math.round(D/1e3);let ae=null,S=null;const F=w[p.mining_fee_fiat],J=w[p.service_fee_fiat];if(F||J){let A=0;if(F){const Y=F.match(/^([\d.]+)\s*([A-Z]{3})$/);Y&&(A+=parseFloat(Y[1]),S=Y[2])}if(J){const Y=J.match(/^([\d.]+)\s*([A-Z]{3})$/);Y&&(A+=parseFloat(Y[1]),S=Y[2])}A>0&&(ae=A)}let he=null,te=null;const me=w[p.amount_fiat];if(me){const A=me.match(/^(-?[\d.]+)\s*([A-Z]{3})$/);A&&(he=parseFloat(A[1]),te=A[2],H<0&&he>0&&(he=-he))}const ue=w[p.type];let oe;switch(ue){case"swap_in":oe="Transfer In";break;case"swap_out":oe="Transfer Out";break;case"lightning_sent":oe="Payment";break;case"lightning_received":oe="Income";break;default:oe="Uncategorized",g.push(`Row ${f+1}: Unknown transaction type "${ue}"`)}const ke=w[p.description]||"",xe=w[p.payment_hash]||w[p.tx_id]||w[p.id];c.push({id:`phoenix-${xe}`,timestamp:B,amount_sats:H,fee_sats:R,fee_fiat:ae,fee_fiat_currency:S,category:oe,note:ke.trim(),fiat_value:he,fiat_currency:te,currency:"BTC",source_type:"phoenix",source_id:xe})}catch(m){d.push(`Row ${f+1}: ${m}`)}}return{transactions:c,errors:d,warnings:g}}},$v={name:"Bitstack",detect:n=>{const i=n.map(d=>d.toLowerCase().trim());return["type","date","received amount","sent amount","external id"].every(d=>i.includes(d))},parse:(n,i)=>{var w,m,B,$,H;const c=[],d=[],g=[],p=x=>n.findIndex(D=>D.toLowerCase().trim()===x.toLowerCase()),f={type:p("type"),date:p("date"),receivedAmount:p("received amount"),receivedCurrency:p("currency or token received"),sentAmount:p("sent amount"),sentCurrency:p("currency or token sent"),fee:p("fee"),feeCurrency:p("currency or token fee"),description:p("description"),priceReceived:p("token price of the amount received"),priceSent:p("token price of the amount sent"),address:p("address"),txHash:p("transaction hash"),externalId:p("external id")};for(let x=0;x<i.length;x++){const D=i[x];try{if(D.length===0||D.every(Ce=>!Ce.trim()))continue;const R=D[f.date];if(!R){d.push(`Row ${x+1}: Missing date`);continue}const ae=Math.floor(new Date(R).getTime()/1e3);if(isNaN(ae)){d.push(`Row ${x+1}: Invalid date format "${R}"`);continue}const S=(w=D[f.type])==null?void 0:w.trim(),F=((m=D[f.description])==null?void 0:m.trim())||"",J=(B=D[f.externalId])==null?void 0:B.trim(),he=($=D[f.txHash])==null?void 0:$.trim();if(!J){d.push(`Row ${x+1}: Missing External ID`);continue}let te=0,me=0,ue=null,oe=null,ke=null,xe=null,A="Uncategorized";const Y=parseFloat(D[f.fee]||"0"),se=(H=D[f.feeCurrency])==null?void 0:H.trim();if(Y>0&&se&&(se==="BTC"?me=Math.round(Y*1e8):(ue=Y,oe=se)),S==="Trade"){const Ce=parseFloat(D[f.receivedAmount]||"0"),aa=parseFloat(D[f.sentAmount]||"0");if(isNaN(Ce)||Ce<=0){d.push(`Row ${x+1}: Invalid received amount`);continue}te=Math.round(Ce*1e8),ke=aa+(ue||0),xe="EUR",A="Buy"}else if(S==="Deposit"){const Ce=parseFloat(D[f.receivedAmount]||"0"),aa=parseFloat(D[f.priceReceived]||"0");if(isNaN(Ce)||Ce<=0){d.push(`Row ${x+1}: Invalid received amount`);continue}te=Math.round(Ce*1e8),aa>0&&(ke=Ce*aa,xe="EUR"),F.toLowerCase().includes("referral")?A="Income":F.toLowerCase().includes("gift")?A="Gift":A="Income"}else if(S==="Withdrawal"){const Ce=parseFloat(D[f.sentAmount]||"0"),aa=parseFloat(D[f.priceSent]||"0");if(isNaN(Ce)||Ce<=0){d.push(`Row ${x+1}: Invalid sent amount`);continue}te=-Math.round(Ce*1e8),aa>0&&(ke=-(Ce*aa),xe="EUR"),A="Transfer Out"}else{g.push(`Row ${x+1}: Unknown transaction type "${S}"`);continue}const we=he||J;c.push({id:`bitstack-${J}`,timestamp:ae,amount_sats:te,fee_sats:me,fee_fiat:ue,fee_fiat_currency:oe,category:A,note:F,fiat_value:ke,fiat_currency:xe,currency:"BTC",source_type:"bitstack",source_id:we})}catch(R){d.push(`Row ${x+1}: ${R}`)}}return{transactions:c,errors:d,warnings:g}}},Nv={name:"Bull Bitcoin",detect:n=>{const i=n.map(d=>d.toLowerCase().trim());return["order_number","order_type","order_id","payin_amount","payout_amount"].every(d=>i.includes(d))},parse:(n,i)=>{var w,m,B,$,H,x,D,R,ae;const c=[],d=[],g=[],p=S=>n.findIndex(F=>F.toLowerCase().trim()===S.toLowerCase()),f={orderNumber:p("order_number"),orderType:p("order_type"),orderSubtype:p("order_subtype"),orderId:p("order_id"),payinAmount:p("payin_amount"),payinCurrency:p("payin_currency"),payoutAmount:p("payout_amount"),payoutCurrency:p("payout_currency"),exchangeRate:p("exchange_rate_amount"),orderStatus:p("order_status"),createdAt:p("created_at (utc)"),completedAt:p("completed_at (utc)"),transactionId:p("transaction_id"),address:p("address")};for(let S=0;S<i.length;S++){const F=i[S];try{if(F.length===0||F.every(at=>!at.trim()))continue;const J=(w=F[f.orderType])==null?void 0:w.trim(),he=(m=F[f.orderStatus])==null?void 0:m.trim(),te=(B=F[f.orderId])==null?void 0:B.trim();if(he!=="Completed")continue;if(!te){d.push(`Row ${S+1}: Missing Order ID`);continue}const me=(($=F[f.completedAt])==null?void 0:$.trim())||((H=F[f.createdAt])==null?void 0:H.trim());if(!me){d.push(`Row ${S+1}: Missing date`);continue}const ue=Math.floor(new Date(me).getTime()/1e3);if(isNaN(ue)){d.push(`Row ${S+1}: Invalid date format "${me}"`);continue}const oe=parseFloat(F[f.payinAmount]||"0"),ke=(x=F[f.payinCurrency])==null?void 0:x.trim(),xe=parseFloat(F[f.payoutAmount]||"0"),A=(D=F[f.payoutCurrency])==null?void 0:D.trim(),Y=(R=F[f.transactionId])==null?void 0:R.trim();let se=0,we=null,Ce="EUR",aa="Uncategorized",ka="BTC";if(J==="Buy Bitcoin"){if(A!=="LBTC"&&A!=="BTC"){g.push(`Row ${S+1}: Unexpected payout currency "${A}"`);continue}se=Math.round(xe*1e8),we=oe,aa="Buy",ka="BTC"}else if(J==="Sell Bitcoin"||J==="Fiat Payment"){if(ke!=="LBTC"&&ke!=="BTC"){g.push(`Row ${S+1}: Unexpected payin currency "${ke}"`);continue}se=-Math.round(oe*1e8),we=-xe,aa="Sell",ka="BTC"}else if(J==="Funding")if(A==="EUR")se=Math.round(xe*100),we=xe,Ce="EUR",aa="Transfer In",ka="EUR";else continue;else if(J==="Withdraw")if(ke==="EUR")se=-Math.round(oe*100),we=-oe,Ce="EUR",aa="Transfer Out",ka="EUR";else continue;else continue;if(se===0){g.push(`Row ${S+1}: Zero amount, skipping`);continue}const va=Y||te;c.push({id:`bullbitcoin-${te}`,timestamp:ue,amount_sats:se,fee_sats:0,fee_fiat:null,fee_fiat_currency:null,category:aa,note:((ae=F[f.orderSubtype])==null?void 0:ae.trim())||"",fiat_value:we,fiat_currency:Ce,currency:ka,source_type:"bullbitcoin",source_id:va})}catch(J){d.push(`Row ${S+1}: ${J}`)}}return{transactions:c,errors:d,warnings:g}}},Rv={name:"LN Markets Futures",detect:(n,i)=>{const c=["leverage","sumFundingFees","exitPrice","entryPrice","pl","closedAt"],d=n.map(g=>g.toLowerCase().trim());return c.every(g=>d.includes(g.toLowerCase()))},parse:(n,i)=>{const c=[],d=[],g=[],p={};n.forEach((w,m)=>p[w.toLowerCase().trim()]=m);const f=(w,m)=>{const B=p[m.toLowerCase()];return B===void 0?"":(w[B]||"").replace(/^"|"$/g,"").trim()};for(let w=0;w<i.length;w++){const m=i[w];try{if(m.length===0||m.every(we=>!we.trim()))continue;const B=f(m,"id"),$=f(m,"side"),H=f(m,"canceled")==="true",x=f(m,"closed")==="true",D=parseInt(f(m,"pl")||"0",10),R=parseInt(f(m,"openingFee")||"0",10),ae=parseInt(f(m,"closingFee")||"0",10),S=parseInt(f(m,"sumFundingFees")||"0",10),F=R+ae+S,J=D-R-ae-S;if((H||!x)&&J===0&&F===0)continue;const he=f(m,"quantity")||"0",te=f(m,"leverage")||"1",me=f(m,"entryPrice")||f(m,"price")||"0",ue=f(m,"exitPrice"),oe=f(m,"closedAt");if(!oe){g.push(`Row ${w+1}: Missing closedAt date, skipping`);continue}const ke=Math.floor(new Date(oe).getTime()/1e3);if(isNaN(ke)){d.push(`Row ${w+1}: Invalid date format "${oe}"`);continue}const xe=J>=0?"Trading Gain":"Trading Loss",A=$==="buy"?"Long":"Short",Y=ue&&ue!=="null"?"$"+parseFloat(ue).toLocaleString():"N/A",se=`Futures ${A} ${he}USD @${te}x | Entry: $${parseFloat(me).toLocaleString()} Exit: ${Y}`;c.push({id:`lnm-futures-${B}`,timestamp:ke,amount_sats:J,fee_sats:F>0?F:0,fee_fiat:null,fee_fiat_currency:null,category:xe,note:se,fiat_value:null,fiat_currency:null,currency:"BTC",source_type:"lnmarkets-futures",source_id:B})}catch(B){d.push(`Row ${w+1}: ${B}`)}}return{transactions:c,errors:d,warnings:g}}},Uv={name:"LN Markets Options",detect:(n,i)=>{const c=["strike","expiry","exercised","volatility","pl","closedAt"],d=n.map(g=>g.toLowerCase().trim());return c.every(g=>d.includes(g.toLowerCase()))},parse:(n,i)=>{const c=[],d=[],g=[],p={};n.forEach((w,m)=>p[w.toLowerCase().trim()]=m);const f=(w,m)=>{const B=p[m.toLowerCase()];return B===void 0?"":(w[B]||"").replace(/^"|"$/g,"").trim()};for(let w=0;w<i.length;w++){const m=i[w];try{if(m.length===0||m.every(we=>!we.trim()))continue;const B=f(m,"id"),$=f(m,"side"),H=f(m,"type"),x=f(m,"closed")==="true",D=f(m,"expired")==="true",R=f(m,"exercised")==="true",ae=parseInt(f(m,"pl")||"0",10),S=parseInt(f(m,"openingFee")||"0",10),F=parseInt(f(m,"closingFee")||"0",10),J=S+F;if(ae===0&&J===0)continue;const he=f(m,"quantity")||"0",te=f(m,"strike")||"0",me=f(m,"margin")||"0",ue=f(m,"closedAt");if(!ue){g.push(`Row ${w+1}: Missing closedAt date, skipping`);continue}const oe=Math.floor(new Date(ue).getTime()/1e3);if(isNaN(oe)){d.push(`Row ${w+1}: Invalid date format "${ue}"`);continue}const ke=ae>=0?"Trading Gain":"Trading Loss",xe=H==="c"?"Call":"Put",A=$==="b"?"Buy":"Sell";let Y="Closed";D?Y="Expired":R?Y="Exercised":x&&(Y="Closed");const se=`Option ${A} ${xe} $${parseFloat(te).toLocaleString()} ${he}USD | Premium: ${parseInt(me).toLocaleString()} sats | ${Y}`;c.push({id:`lnm-options-${B}`,timestamp:oe,amount_sats:ae,fee_sats:J,fee_fiat:null,fee_fiat_currency:null,category:ke,note:se,fiat_value:null,fiat_currency:null,currency:"BTC",source_type:"lnmarkets-options",source_id:B})}catch(B){d.push(`Row ${w+1}: ${B}`)}}return{transactions:c,errors:d,warnings:g}}},zv=[Pv,$v,Nv,Rv,Uv];function Ov(n){const i=[];let c="",d=!1;for(let B=0;B<n.length;B++){const $=n[B];$==='"'?(d=!d,c+=$):($===`
`||$==="\r")&&!d?(c.trim()&&i.push(c),c="",$==="\r"&&n[B+1]===`
`&&B++):c+=$}if(c.trim()&&i.push(c),i.length===0)return{headers:[],rows:[]};const g=i[0],p=g.includes("	")?"	":g.includes(";")?";":",",f=B=>{const $=[];let H="",x=!1;for(let D=0;D<B.length;D++){const R=B[D];R==='"'?x&&B[D+1]==='"'?(H+='"',D++):x=!x:R===p&&!x?($.push(H.trim()),H=""):H+=R}return $.push(H.trim()),$},w=f(i[0]).map(B=>B.toLowerCase().trim()),m=i.slice(1).map(f);return{headers:w,rows:m}}function Wv(n){for(const i of zv)if(i.detect(n,[]))return i;return null}var Vv=u('<div class="unlock-screen svelte-1uha8ag"><div class="unlock-container svelte-1uha8ag"><div class="unlock-logo svelte-1uha8ag"><span class="logo-sat svelte-1uha8ag">Sat</span><span class="logo-stone svelte-1uha8ag">Stone</span></div> <div class="loading-spinner svelte-1uha8ag"></div> <p class="unlock-loading svelte-1uha8ag">Loading...</p></div></div>'),qv=u('<div class="unlock-form svelte-1uha8ag"><input type="password" placeholder="Enter passphrase..." class="unlock-input svelte-1uha8ag"/> <button class="btn primary unlock-btn svelte-1uha8ag">Unlock</button></div>'),Hv=u('<div class="unlock-form svelte-1uha8ag"><textarea placeholder="Enter your 12-word recovery phrase..." class="unlock-textarea svelte-1uha8ag" rows="3"></textarea> <button class="btn primary unlock-btn svelte-1uha8ag">Unlock with Recovery</button></div>'),Gv=u('<p class="unlock-error svelte-1uha8ag"> </p>'),Yv=u('Forgot your passphrase? Use your <button class="link-btn svelte-1uha8ag">recovery phrase</button>',1),jv=u('Remember your passphrase? <button class="link-btn svelte-1uha8ag">Enter it here</button>',1),Jv=u('<div class="unlock-screen svelte-1uha8ag"><div class="unlock-container svelte-1uha8ag"><div class="unlock-logo svelte-1uha8ag"><span class="logo-sat svelte-1uha8ag">Sat</span><span class="logo-stone svelte-1uha8ag">Stone</span></div> <h1 class="unlock-title svelte-1uha8ag">Welcome Back</h1> <p class="unlock-subtitle svelte-1uha8ag">Enter your passphrase to unlock</p> <div class="unlock-tabs svelte-1uha8ag"><button>Passphrase</button> <button>Recovery Phrase</button></div> <!> <!> <p class="unlock-hint svelte-1uha8ag"><!></p></div></div>'),Kv=u('<span class="stat-sub svelte-1uha8ag"> </span>'),Xv=u("<span> </span>"),Zv=u('<div class="header-stat svelte-1uha8ag"><span class="stat-label svelte-1uha8ag"> </span> <span class="stat-main btc-price-value svelte-1uha8ag"><!></span> <span class="stat-sub svelte-1uha8ag"><!></span></div>'),Qv=u("<div> </div>"),ec=u("<option> </option>"),ac=u("<option> </option>"),tc=u('<button class="btn-clear svelte-1uha8ag">Clear</button>'),sc=u("<span> </span>"),rc=u('<div class="stat-sub-holdings svelte-1uha8ag"></div>'),lc=u('<span class="stat-sub svelte-1uha8ag"> </span>'),nc=u('<span class="stat-sub svelte-1uha8ag"> </span>'),ic=u('<span class="stat-sub svelte-1uha8ag"> </span>'),oc=u("<span> </span>"),vc=u('<span class="stat-value muted svelte-1uha8ag">Enable fiat</span>'),cc=u("<span> </span>"),uc=u('<span class="stat-value muted svelte-1uha8ag">Enable fiat</span>'),dc=u('<span class="fiat-holding negative svelte-1uha8ag"> </span>'),_c=u('<div class="stat-sub-holdings svelte-1uha8ag"></div>'),gc=u("<span> </span>"),pc=u('<span class="stat-value muted svelte-1uha8ag">Enable fiat</span>'),fc=u('<div class="chart-empty svelte-1uha8ag">No transaction data yet</div>'),hc=u('<div class="chart-empty svelte-1uha8ag">No spending data yet</div>'),mc=u('<div class="chart-empty svelte-1uha8ag">No transaction data yet</div>'),bc=u('<div class="chart-empty svelte-1uha8ag">No wallet data yet</div>'),yc=u('<div class="chart-empty svelte-1uha8ag">No transactions yet</div>'),wc=u('<div class="recent-item svelte-1uha8ag"><div class="recent-info svelte-1uha8ag"><span class="recent-category svelte-1uha8ag"> </span> <span class="recent-date svelte-1uha8ag"> </span></div> <span> </span></div>'),xc=u('<div class="recent-list svelte-1uha8ag"></div>'),kc=u('<div class="page-header svelte-1uha8ag"><h1 class="svelte-1uha8ag">Dashboard</h1> <div class="filters svelte-1uha8ag"><select class="filter-select svelte-1uha8ag"><option>Years</option><!></select> <select class="filter-select svelte-1uha8ag"><option>Months</option><!></select> <!></div></div> <div class="stats-grid svelte-1uha8ag"><div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag"> </span> <span class="stat-value primary svelte-1uha8ag"> </span> <!></div> <div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Total Income</span> <span class="stat-value positive svelte-1uha8ag"> </span> <!></div> <div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Total Spent</span> <span class="stat-value negative svelte-1uha8ag"> </span> <!></div> <div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Flow</span> <span> </span> <!></div></div> <div class="stats-grid svelte-1uha8ag"><div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Realized P&L</span> <!></div> <div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Unrealized P&L</span> <!></div> <div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Fees Paid</span> <span class="stat-value negative svelte-1uha8ag"><!></span> <!></div> <div class="stat-card svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Total P&L</span> <!></div></div> <div class="charts-grid svelte-1uha8ag"><div class="chart-card svelte-1uha8ag"><h2 class="svelte-1uha8ag">Monthly Flow</h2> <!></div> <div class="chart-card svelte-1uha8ag"><h2 class="svelte-1uha8ag">Spending by Category</h2> <!></div></div> <div class="charts-grid svelte-1uha8ag"><div class="chart-card svelte-1uha8ag"><h2 class="svelte-1uha8ag">Balance History</h2> <!></div> <div class="chart-card svelte-1uha8ag"><h2 class="svelte-1uha8ag">Holdings by Wallet</h2> <!></div></div> <div class="chart-card full-width svelte-1uha8ag"><h2 class="svelte-1uha8ag">Recent Activity</h2> <!></div>',1),Cc=u('<div class="empty-state svelte-1uha8ag"><!> <p class="svelte-1uha8ag">No wallets yet</p> <button class="btn primary svelte-1uha8ag">Add your first wallet</button></div>'),Tc=u('<button class="icon-btn svelte-1uha8ag" title="Sync"><!></button>'),Sc=u('<div class="wallet-syncing svelte-1uha8ag">Syncing...</div>'),Ec=u('<div class="wallet-card svelte-1uha8ag"><div class="wallet-card-header svelte-1uha8ag"><div class="wallet-icon svelte-1uha8ag"><!></div> <div class="wallet-meta svelte-1uha8ag"><span class="wallet-name svelte-1uha8ag"> </span> <span class="wallet-owner svelte-1uha8ag"> </span></div> <div class="wallet-actions svelte-1uha8ag"><!> <button class="icon-btn svelte-1uha8ag" title="Edit">✎</button> <button class="icon-btn svelte-1uha8ag" title="Delete">✕</button></div></div> <div class="wallet-card-body svelte-1uha8ag"><span class="wallet-balance svelte-1uha8ag"> </span> <span class="wallet-type svelte-1uha8ag"> </span></div> <!></div>'),Fc=u('<div class="wallet-grid svelte-1uha8ag"></div>'),Dc=u('<div class="empty-type svelte-1uha8ag"><span> </span></div>'),Ac=u('<div class="empty-entity svelte-1uha8ag"><span>No wallets</span> <button class="btn-add-small svelte-1uha8ag"><!> Add Wallet</button></div>'),Ic=u('<button class="icon-btn svelte-1uha8ag" title="Sync"><!></button>'),Mc=u('<div class="wallet-syncing svelte-1uha8ag">Syncing...</div>'),Lc=u('<div class="wallet-card svelte-1uha8ag"><div class="wallet-card-header svelte-1uha8ag"><div class="wallet-icon svelte-1uha8ag"><!></div> <div class="wallet-meta svelte-1uha8ag"><span class="wallet-name svelte-1uha8ag"> </span></div> <div class="wallet-actions svelte-1uha8ag"><!> <button class="icon-btn svelte-1uha8ag" title="Edit">✎</button> <button class="icon-btn svelte-1uha8ag" title="Delete">✕</button></div></div> <div class="wallet-card-body svelte-1uha8ag"><span class="wallet-balance svelte-1uha8ag"> </span> <span class="wallet-type svelte-1uha8ag"> </span></div> <!></div>'),Bc=u('<div class="wallet-grid svelte-1uha8ag"></div>'),Pc=u('<div class="entity-content svelte-1uha8ag"><!></div>'),$c=u('<div class="entity-section svelte-1uha8ag"><button class="entity-header svelte-1uha8ag"><span class="collapse-icon small svelte-1uha8ag"> </span> <span class="entity-name svelte-1uha8ag"> </span> <span class="entity-balance svelte-1uha8ag"> </span></button> <!></div>'),Nc=u('<div class="type-content svelte-1uha8ag"><!></div>'),Rc=u('<div class="wallet-type-section svelte-1uha8ag"><button class="type-header svelte-1uha8ag"><span class="collapse-icon svelte-1uha8ag"> </span> <span class="type-name svelte-1uha8ag"> </span> <span class="type-balance svelte-1uha8ag"> </span></button> <!></div>'),Uc=u('<div class="wallet-groups svelte-1uha8ag"></div>'),zc=u('<div class="page-header svelte-1uha8ag"><h1 class="svelte-1uha8ag">Wallets</h1> <button class="btn primary svelte-1uha8ag"><!> Add Wallet</button></div> <!>',1),Oc=u("<option> </option>"),Wc=u("<option> </option>"),Vc=u('<button class="btn-clear svelte-1uha8ag">Clear</button>'),qc=u('<div class="loading svelte-1uha8ag">Loading transactions...</div>'),Hc=u('<div class="empty-state svelte-1uha8ag"><!> <p class="svelte-1uha8ag">No transactions yet</p> <span class="empty-hint svelte-1uha8ag">Sync a wallet to fetch transactions</span></div>'),Gc=u('<div class="tx-th svelte-1uha8ag">Fiat</div>'),Yc=u('<span class="date-time svelte-1uha8ag"> </span>'),jc=u("<div><!></div>"),Jc=u('<span class="fee-btc svelte-1uha8ag"> </span>'),Kc=u('<span class="fee-fiat svelte-1uha8ag"> </span>'),Xc=u("<!> <!>",1),Zc=u("<option> </option>"),Qc=u('<a target="_blank" rel="noopener" class="svelte-1uha8ag"> </a>'),eu=u('<span class="svelte-1uha8ag"> </span>'),au=u('<button class="tx-action-btn svelte-1uha8ag" title="Edit">✎</button> <button class="tx-action-btn danger svelte-1uha8ag" title="Delete">✕</button>',1),tu=u('<div><div class="tx-cell tx-date svelte-1uha8ag"><span class="date-main svelte-1uha8ag"> </span> <!></div> <div> </div> <!> <div class="tx-cell tx-fee svelte-1uha8ag"><!></div> <div class="tx-cell tx-wallet svelte-1uha8ag"> </div> <div class="tx-cell tx-category svelte-1uha8ag"><select class="svelte-1uha8ag"></select></div> <div class="tx-cell tx-note svelte-1uha8ag"><input type="text" placeholder="Add note..." class="svelte-1uha8ag"/></div> <div class="tx-cell tx-id svelte-1uha8ag"><!></div> <div class="tx-cell tx-actions svelte-1uha8ag"><button class="tx-action-btn svelte-1uha8ag" title="Duplicate">⧉</button> <!></div></div>'),su=u('<div class="tx-table svelte-1uha8ag"><div><button class="tx-th sortable svelte-1uha8ag"> </button> <button class="tx-th sortable svelte-1uha8ag"> </button> <!> <div class="tx-th svelte-1uha8ag">Fee</div> <button class="tx-th sortable svelte-1uha8ag"> </button> <button class="tx-th sortable svelte-1uha8ag"> </button> <div class="tx-th svelte-1uha8ag">Note</div> <div class="tx-th svelte-1uha8ag">ID</div> <div class="tx-th svelte-1uha8ag">Actions</div></div> <div class="tx-body svelte-1uha8ag"></div></div>'),ru=u('<div class="page-header svelte-1uha8ag"><h1 class="svelte-1uha8ag">Transactions</h1> <div class="page-actions svelte-1uha8ag"><span class="tx-count svelte-1uha8ag"> </span> <div class="filters svelte-1uha8ag"><select class="filter-select svelte-1uha8ag"><option>Years</option><!></select> <select class="filter-select svelte-1uha8ag"><option>Months</option><!></select> <!></div> <button class="btn secondary svelte-1uha8ag">Import CSV</button> <button class="btn primary svelte-1uha8ag"><!> Add</button></div></div> <!>',1),lu=u('<div class="setting-row svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Fiat Currency</span> <span class="setting-description svelte-1uha8ag">Select your preferred fiat currency</span></div> <div class="setting-control svelte-1uha8ag"><div class="toggle-group svelte-1uha8ag"><button>€ EUR</button> <button>$ USD</button></div></div></div>'),nu=u('<div class="settings-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">Display Preferences</h2> <div class="setting-row svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Theme</span> <span class="setting-description svelte-1uha8ag">Choose your preferred color theme</span></div> <div class="setting-control svelte-1uha8ag"><div class="toggle-group svelte-1uha8ag"><button>Dark</button> <button>Light</button></div></div></div> <div class="setting-row svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Bitcoin Unit</span> <span class="setting-description svelte-1uha8ag">Display amounts in sats or BTC</span></div> <div class="setting-control svelte-1uha8ag"><div class="toggle-group svelte-1uha8ag"><button>Sats</button> <button>BTC</button></div></div></div> <div class="setting-row svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Show Fiat Values</span> <span class="setting-description svelte-1uha8ag">Display fiat equivalents alongside BTC</span></div> <div class="setting-control svelte-1uha8ag"><button><span class="toggle-knob svelte-1uha8ag"></span></button></div></div> <!></div>'),iu=u('<span class="price-time svelte-1uha8ag"> </span>'),ou=u('<div class="price-badge svelte-1uha8ag"> <!></div>'),vu=u('<span class="spinner svelte-1uha8ag"></span> Fetching...',1),cu=u(`<div class="settings-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">P&L Settings</h2> <div class="setting-row svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Cost Basis Method</span> <span class="setting-description svelte-1uha8ag">Method used to calculate realized gains/losses</span></div> <div class="setting-control svelte-1uha8ag"><div class="toggle-group svelte-1uha8ag"><button>Average</button> <button>FIFO</button></div></div></div> <div class="setting-row column svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Historical Fiat Values</span> <span class="setting-description svelte-1uha8ag">Fetch historical prices for transactions without fiat values. 
                    This uses the Coingecko API and may take several minutes.</span></div> <div class="setting-action svelte-1uha8ag"><!> <button class="btn secondary svelte-1uha8ag"><!></button></div></div></div>`),uu=u('<div class="account-item svelte-1uha8ag"><span class="account-name svelte-1uha8ag"> </span> <span class="account-badge primary svelte-1uha8ag">You</span></div>'),du=u('<div class="account-item svelte-1uha8ag"><span class="account-name svelte-1uha8ag"> </span> <button class="btn-icon-small danger svelte-1uha8ag" title="Delete">✕</button></div>'),_u=u('<div class="empty-list svelte-1uha8ag">No family members added</div>'),gu=u('<span class="account-badge svelte-1uha8ag"> </span>'),pu=u('<div class="account-item svelte-1uha8ag"><span class="account-name svelte-1uha8ag"> </span> <!> <button class="btn-icon-small danger svelte-1uha8ag" title="Delete">✕</button></div>'),fu=u('<div class="empty-list svelte-1uha8ag">No businesses added</div>'),hu=u('<div class="settings-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">Accounts</h2> <p class="section-description svelte-1uha8ag">Manage your personal, family, and business accounts.</p> <div class="account-group svelte-1uha8ag"><div class="account-group-header svelte-1uha8ag"><h3 class="svelte-1uha8ag">Personal</h3></div> <div class="account-list svelte-1uha8ag"></div></div> <div class="account-group svelte-1uha8ag"><div class="account-group-header svelte-1uha8ag"><h3 class="svelte-1uha8ag">Family</h3> <button class="btn-add-inline svelte-1uha8ag"><!> Add</button></div> <div class="account-list svelte-1uha8ag"></div></div> <div class="account-group svelte-1uha8ag"><div class="account-group-header svelte-1uha8ag"><h3 class="svelte-1uha8ag">Business</h3> <button class="btn-add-inline svelte-1uha8ag"><!> Add</button></div> <div class="account-list svelte-1uha8ag"></div></div></div>'),mu=u('<div class="wallet-list-item svelte-1uha8ag"><div class="wallet-list-info svelte-1uha8ag"><span class="wallet-list-name svelte-1uha8ag"> </span> <span class="wallet-list-meta svelte-1uha8ag"> </span></div> <span class="wallet-list-balance svelte-1uha8ag"> </span> <div class="wallet-list-actions svelte-1uha8ag"><button class="btn-icon-small svelte-1uha8ag" title="Edit">✎</button> <button class="btn-icon-small danger svelte-1uha8ag" title="Delete">✕</button></div></div>'),bu=u('<div class="empty-list svelte-1uha8ag">No wallets added</div>'),yu=u('<div class="settings-section svelte-1uha8ag"><div class="section-header svelte-1uha8ag"><div><h2 class="svelte-1uha8ag">Wallets</h2> <p class="section-description svelte-1uha8ag">Manage your Bitcoin wallets.</p></div> <button class="btn primary svelte-1uha8ag"><!> Add Wallet</button></div> <div class="wallet-list svelte-1uha8ag"></div></div>'),wu=u('<div class="category-item system svelte-1uha8ag"><span class="category-name svelte-1uha8ag"> </span> <span class="category-badge svelte-1uha8ag">System</span></div>'),xu=u('<div class="category-item svelte-1uha8ag"><span class="category-name svelte-1uha8ag"> </span> <div class="category-actions svelte-1uha8ag"><button class="btn-icon-small svelte-1uha8ag" title="Edit">✎</button> <button class="btn-icon-small danger svelte-1uha8ag" title="Delete">✕</button></div></div>'),ku=u('<div class="empty-list svelte-1uha8ag">No custom categories. Click "Add Category" to create one.</div>'),Cu=u('<div class="settings-section svelte-1uha8ag"><div class="section-header svelte-1uha8ag"><div><h2 class="svelte-1uha8ag">Categories</h2> <p class="section-description svelte-1uha8ag">Manage transaction categories. System categories cannot be edited or deleted.</p></div> <button class="btn primary svelte-1uha8ag"><!> Add Category</button></div> <div class="category-group svelte-1uha8ag"><h3 class="svelte-1uha8ag">System Categories</h3> <div class="category-list svelte-1uha8ag"></div></div> <div class="category-group svelte-1uha8ag"><h3 class="svelte-1uha8ag">Custom Categories</h3> <div class="category-list svelte-1uha8ag"></div></div></div>'),Tu=u('<span class="encryption-badge active svelte-1uha8ag"><span class="badge-icon">🔒</span> Encrypted</span> <button class="btn secondary svelte-1uha8ag">Change Passphrase</button> <button class="btn secondary svelte-1uha8ag">Remove Encryption</button>',1),Su=u('<span class="encryption-badge inactive svelte-1uha8ag"><span class="badge-icon">🔓</span> Not Encrypted</span> <button class="btn primary svelte-1uha8ag">Enable Encryption</button>',1),Eu=u('<div class="setting-row svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Auto-Lock</span> <span class="setting-description svelte-1uha8ag">Automatically lock the app after a period of inactivity</span></div> <div class="setting-control svelte-1uha8ag"><select class="settings-select svelte-1uha8ag"><option>Never</option><option>5 minutes</option><option>15 minutes</option><option>30 minutes</option><option>1 hour</option></select></div></div> <div class="setting-row svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Lock Now</span> <span class="setting-description svelte-1uha8ag">Manually lock the app immediately</span></div> <div class="setting-control svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Lock App</button></div></div>',1),Fu=u('<div class="settings-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">Security</h2> <p class="section-description svelte-1uha8ag">Protect your data with AES-256 encryption.</p> <div class="setting-row column svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Database Encryption</span> <span class="setting-description svelte-1uha8ag"><!></span></div> <div class="setting-action svelte-1uha8ag"><!></div></div> <!></div>'),Du=u('<span class="spinner svelte-1uha8ag"></span> Exporting...',1),Au=u('<div class="settings-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">Data Management</h2> <div class="setting-row column svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Export Data</span> <span class="setting-description svelte-1uha8ag">Download all your transactions as a CSV file for backup or analysis.</span></div> <div class="setting-action svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag"><!></button></div></div> <div class="setting-row column danger-zone svelte-1uha8ag"><div class="setting-info svelte-1uha8ag"><span class="setting-label svelte-1uha8ag">Reset All Data</span> <span class="setting-description svelte-1uha8ag">Permanently delete all wallets, transactions, and settings. This action cannot be undone.</span></div> <div class="setting-action svelte-1uha8ag"><button class="btn danger svelte-1uha8ag">Reset All Data</button></div></div></div>'),Iu=u('<div class="settings-layout svelte-1uha8ag"><nav class="settings-sidebar svelte-1uha8ag"><button>Display</button> <button>P&L Settings</button> <button>Categories</button> <button>Accounts</button> <button>Wallets</button> <button>Security</button> <button>Data</button></nav> <div class="settings-content svelte-1uha8ag"><!></div></div>'),Mu=u('<header class="svelte-1uha8ag"><div class="header-left svelte-1uha8ag"><div class="logo svelte-1uha8ag"><!> <span>SatStone | BitFinances</span></div></div> <div class="header-center svelte-1uha8ag"><!> <!></div> <div class="header-right svelte-1uha8ag"><div class="header-stat svelte-1uha8ag"><span class="stat-label svelte-1uha8ag">Total Balance</span> <span class="stat-main svelte-1uha8ag"> </span> <!></div> <!> <button title="Refresh price"><!></button></div></header> <nav class="tabs svelte-1uha8ag"><button>Dashboard</button> <button>Wallets</button> <button>Transactions</button> <button>Settings</button></nav> <!> <main class="svelte-1uha8ag"><!> <!> <!> <!></main>',1),Lu=u("<option> </option>"),Bu=u('<div class="form-group svelte-1uha8ag"><label for="wallet-xpub" class="svelte-1uha8ag">Extended Public Key</label> <input id="wallet-xpub" placeholder="xpub / ypub / zpub" class="svelte-1uha8ag"/></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="wallet-type" class="svelte-1uha8ag">Address Type</label> <select id="wallet-type" class="svelte-1uha8ag"><option>zpub (Native SegWit)</option><option>ypub (SegWit)</option><option>xpub (Legacy)</option></select></div> <div class="form-group svelte-1uha8ag"><label for="wallet-owner" class="svelte-1uha8ag">Owner</label> <select id="wallet-owner" class="svelte-1uha8ag"></select></div></div>',1),Pu=u("<option> </option>"),$u=u(`<div class="manual-wallet-info svelte-1uha8ag"><p class="svelte-1uha8ag">Manual wallets don't sync from the blockchain.</p> <p class="svelte-1uha8ag">Use this for Lightning wallets, exchange accounts, or any wallet where you'll import transactions via CSV or add them manually.</p></div> <div class="form-group svelte-1uha8ag"><label for="wallet-owner-manual" class="svelte-1uha8ag">Owner</label> <select id="wallet-owner-manual" class="svelte-1uha8ag"></select></div>`,1),Nu=u('<div class="form-group svelte-1uha8ag"><label for="wallet-name" class="svelte-1uha8ag">Name</label> <input id="wallet-name" placeholder="My Bitcoin Wallet" class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label class="svelte-1uha8ag">Wallet Type</label> <div class="wallet-type-toggle svelte-1uha8ag"><button>Watch-only (xpub)</button> <button>Manual</button></div></div> <!> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Add Wallet</button></div>',1),Ru=u("<option> </option>"),Uu=u('<div class="form-group svelte-1uha8ag"><label for="entity-owner" class="svelte-1uha8ag">Owner (optional)</label> <select id="entity-owner" class="svelte-1uha8ag"><option>No owner</option><!></select></div>'),zu=u('<div class="form-group svelte-1uha8ag"><label for="entity-name" class="svelte-1uha8ag">Name</label> <input id="entity-name" class="svelte-1uha8ag"/></div> <!> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Add</button></div>',1),Ou=u("<option> </option>"),Wu=u('<div class="form-group svelte-1uha8ag"><label for="edit-wallet-name" class="svelte-1uha8ag">Name</label> <input id="edit-wallet-name" placeholder="Wallet name" class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label for="edit-wallet-owner" class="svelte-1uha8ag">Owner</label> <select id="edit-wallet-owner" class="svelte-1uha8ag"></select></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Save</button></div>',1),Vu=u('<span class="form-hint svelte-1uha8ag">Enter sats (whole number) or BTC (with decimal)</span>'),qu=u("<option> </option>"),Hu=u("<option> </option>"),Gu=u('<div class="form-group svelte-1uha8ag"><label for="tx-fiat" class="svelte-1uha8ag"> </label> <input id="tx-fiat" type="text" placeholder="e.g. 85.50" class="svelte-1uha8ag"/></div>'),Yu=u('<div class="tx-type-toggle svelte-1uha8ag"><button>Incoming</button> <button>Outgoing</button></div> <div class="form-group svelte-1uha8ag"><label class="svelte-1uha8ag">Currency</label> <div class="currency-toggle svelte-1uha8ag"><button>BTC</button> <button>EUR</button> <button>USD</button></div></div> <div class="form-group svelte-1uha8ag"><label for="tx-amount" class="svelte-1uha8ag">Amount <!></label> <input id="tx-amount" type="text" class="svelte-1uha8ag"/> <!></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="tx-wallet" class="svelte-1uha8ag">Wallet</label> <select id="tx-wallet" class="svelte-1uha8ag"></select></div> <div class="form-group svelte-1uha8ag"><label for="tx-date" class="svelte-1uha8ag">Date</label> <input id="tx-date" type="date" class="svelte-1uha8ag"/></div></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="tx-category" class="svelte-1uha8ag">Category</label> <select id="tx-category" class="svelte-1uha8ag"></select></div> <!></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="tx-fee-sats" class="svelte-1uha8ag">Fee (sats, optional)</label> <input id="tx-fee-sats" type="text" placeholder="e.g. 150" class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label for="tx-fee-fiat" class="svelte-1uha8ag"> </label> <input id="tx-fee-fiat" type="text" placeholder="e.g. 0.50" class="svelte-1uha8ag"/></div></div> <div class="form-group svelte-1uha8ag"><label for="tx-note" class="svelte-1uha8ag">Note (optional)</label> <input id="tx-note" type="text" placeholder="Description..." class="svelte-1uha8ag"/></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag"> </button></div>',1),ju=u('<div class="form-group svelte-1uha8ag"><label for="new-category-name" class="svelte-1uha8ag">Category Name</label> <input id="new-category-name" type="text" placeholder="e.g. Subscriptions, Donations..." class="svelte-1uha8ag"/></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Add Category</button></div>',1),Ju=u('<div class="form-group svelte-1uha8ag"><label for="edit-category-name" class="svelte-1uha8ag">Category Name</label> <input id="edit-category-name" type="text" placeholder="Category name" class="svelte-1uha8ag"/></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Save</button></div>',1),Ku=u('<span class="form-hint svelte-1uha8ag">Enter sats (whole number) or BTC (with decimal)</span>'),Xu=u("<option> </option>"),Zu=u('<div class="form-group svelte-1uha8ag"><label for="edit-tx-fiat" class="svelte-1uha8ag"> </label> <input id="edit-tx-fiat" type="text" placeholder="e.g. 85.50" class="svelte-1uha8ag"/></div>'),Qu=u('<div class="tx-type-toggle svelte-1uha8ag"><button>Incoming</button> <button>Outgoing</button></div> <div class="form-group svelte-1uha8ag"><label class="svelte-1uha8ag">Currency</label> <div class="currency-toggle svelte-1uha8ag"><button>BTC</button> <button>EUR</button> <button>USD</button></div></div> <div class="form-group svelte-1uha8ag"><label for="edit-tx-amount" class="svelte-1uha8ag">Amount <!></label> <input id="edit-tx-amount" type="text" class="svelte-1uha8ag"/> <!></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="edit-tx-date" class="svelte-1uha8ag">Date</label> <input id="edit-tx-date" type="date" class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label for="edit-tx-category" class="svelte-1uha8ag">Category</label> <select id="edit-tx-category" class="svelte-1uha8ag"></select></div></div> <div class="form-row-modal svelte-1uha8ag"><!> <div class="form-group svelte-1uha8ag"><label for="edit-tx-note" class="svelte-1uha8ag">Note (optional)</label> <input id="edit-tx-note" type="text" placeholder="Description..." class="svelte-1uha8ag"/></div></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="edit-tx-fee-sats" class="svelte-1uha8ag">Fee (sats, optional)</label> <input id="edit-tx-fee-sats" type="text" placeholder="e.g. 150" class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label for="edit-tx-fee-fiat" class="svelte-1uha8ag"> </label> <input id="edit-tx-fee-fiat" type="text" placeholder="e.g. 0.50" class="svelte-1uha8ag"/></div></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Save Changes</button></div>',1),ed=u("<option> </option>"),ad=u('<span class="form-hint svelte-1uha8ag">Enter sats (whole number) or BTC (with decimal)</span>'),td=u("<option> </option>"),sd=u('<div class="form-group svelte-1uha8ag"><label for="dup-tx-fiat" class="svelte-1uha8ag"> </label> <input id="dup-tx-fiat" type="text" placeholder="e.g. 85.50" class="svelte-1uha8ag"/></div>'),rd=u('<div class="duplicate-info svelte-1uha8ag"><p class="svelte-1uha8ag">Creating a copy of this transaction. Edit the values as needed.</p></div> <div class="tx-type-toggle svelte-1uha8ag"><button>Incoming</button> <button>Outgoing</button></div> <div class="form-group svelte-1uha8ag"><label class="svelte-1uha8ag">Currency</label> <div class="currency-toggle svelte-1uha8ag"><button>BTC</button> <button>EUR</button> <button>USD</button></div></div> <div class="form-group svelte-1uha8ag"><label for="dup-tx-wallet" class="svelte-1uha8ag">Wallet</label> <select id="dup-tx-wallet" class="svelte-1uha8ag"></select></div> <div class="form-group svelte-1uha8ag"><label for="dup-tx-amount" class="svelte-1uha8ag">Amount <!></label> <input id="dup-tx-amount" type="text" class="svelte-1uha8ag"/> <!></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="dup-tx-date" class="svelte-1uha8ag">Date</label> <input id="dup-tx-date" type="date" class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label for="dup-tx-category" class="svelte-1uha8ag">Category</label> <select id="dup-tx-category" class="svelte-1uha8ag"></select></div></div> <div class="form-row-modal svelte-1uha8ag"><!> <div class="form-group svelte-1uha8ag"><label for="dup-tx-note" class="svelte-1uha8ag">Note (optional)</label> <input id="dup-tx-note" type="text" placeholder="Description..." class="svelte-1uha8ag"/></div></div> <div class="form-row-modal svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="dup-tx-fee-sats" class="svelte-1uha8ag">Fee (sats, optional)</label> <input id="dup-tx-fee-sats" type="text" placeholder="e.g. 150" class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label for="dup-tx-fee-fiat" class="svelte-1uha8ag"> </label> <input id="dup-tx-fee-fiat" type="text" placeholder="e.g. 0.50" class="svelte-1uha8ag"/></div></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Create Duplicate</button></div>',1),ld=u(`<div class="confirm-content svelte-1uha8ag"><p class="confirm-message svelte-1uha8ag">You're changing from <strong> </strong> to <strong> </strong>.</p> <p class="confirm-detail svelte-1uha8ag">You have <strong> </strong> transactions with historical fiat values.</p> <p class="confirm-question svelte-1uha8ag"> </p> <p class="confirm-warning svelte-1uha8ag">This will fetch new prices from Coingecko and may take a few minutes depending on the number of unique dates.</p></div> <div class="form-actions three-buttons svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn secondary svelte-1uha8ag">Keep Old Values</button> <button class="btn primary svelte-1uha8ag">Update All</button></div>`,1),nd=u("<option> </option>"),id=u('<p class="error-text svelte-1uha8ag"> </p>'),od=u('<div class="import-errors svelte-1uha8ag"></div>'),vd=u('<div class="import-upload svelte-1uha8ag"><div class="form-group svelte-1uha8ag"><label for="import-wallet" class="svelte-1uha8ag">Import to Wallet</label> <select id="import-wallet" class="svelte-1uha8ag"></select></div> <div class="file-upload svelte-1uha8ag"><label class="file-upload-label svelte-1uha8ag"><input type="file" accept=".csv" class="svelte-1uha8ag"/> <span class="file-upload-btn svelte-1uha8ag">Choose CSV File</span> <span class="file-upload-hint svelte-1uha8ag">Supported: Phoenix, Bitstack, Bull Bitcoin, LN Markets</span></label></div> <!></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button></div>',1),cd=u('<p class="warning-text svelte-1uha8ag"> </p>'),ud=u('<p class="warning-text svelte-1uha8ag"> </p>'),dd=u('<div class="import-warnings svelte-1uha8ag"><p class="warning-title svelte-1uha8ag">Warnings:</p> <!> <!></div>'),_d=u('<p class="error-text svelte-1uha8ag"> </p>'),gd=u('<p class="error-text svelte-1uha8ag"> </p>'),pd=u('<div class="import-errors svelte-1uha8ag"><p class="error-title svelte-1uha8ag">Errors:</p> <!> <!></div>'),fd=u('<div class="import-table-row svelte-1uha8ag"><span> </span> <span> </span> <span> </span> <span class="truncate svelte-1uha8ag"> </span></div>'),hd=u('<div class="import-table-more svelte-1uha8ag"> </div>'),md=u('<div class="import-preview"><div class="import-summary svelte-1uha8ag"><p class="svelte-1uha8ag"><strong class="svelte-1uha8ag">Source:</strong> </p> <p class="svelte-1uha8ag"><strong class="svelte-1uha8ag">File:</strong> </p> <p class="svelte-1uha8ag"><strong class="svelte-1uha8ag">Transactions:</strong> </p> <p class="svelte-1uha8ag"><strong class="svelte-1uha8ag">Target Wallet:</strong> </p></div> <!> <!> <div class="import-table svelte-1uha8ag"><div class="import-table-header svelte-1uha8ag"><span>Date</span> <span>Amount</span> <span>Category</span> <span>Note</span></div> <div class="import-table-body svelte-1uha8ag"><!> <!></div></div></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Back</button> <button class="btn primary svelte-1uha8ag"> </button></div>',1),bd=u('<div class="import-progress svelte-1uha8ag"><div class="spinner large svelte-1uha8ag"></div> <p class="svelte-1uha8ag">Importing transactions...</p></div>'),yd=u('<p class="result-errors svelte-1uha8ag"> </p>'),wd=u('<p class="error-text svelte-1uha8ag"> </p>'),xd=u('<div class="import-errors svelte-1uha8ag"></div>'),kd=u('<div class="import-done svelte-1uha8ag"><div class="import-result svelte-1uha8ag"><p class="result-success svelte-1uha8ag"> </p> <p class="result-skipped svelte-1uha8ag"> </p> <!></div> <!></div> <div class="form-actions svelte-1uha8ag"><button class="btn primary svelte-1uha8ag">Done</button></div>',1),Cd=u('<div class="password-strength svelte-1uha8ag"><div class="strength-bar svelte-1uha8ag"><div></div></div> <span> </span></div>'),Td=u('<span class="form-error svelte-1uha8ag">Passphrases do not match</span>'),Sd=u('<div class="encryption-warning svelte-1uha8ag"><span class="warning-icon svelte-1uha8ag">⚠️</span> <p class="svelte-1uha8ag"><strong class="svelte-1uha8ag">Important:</strong> If you lose your passphrase AND recovery phrase, your data will be permanently lost. There is no way to recover it.</p></div> <div class="form-group svelte-1uha8ag"><label for="encrypt-pass" class="svelte-1uha8ag">Create Passphrase</label> <input id="encrypt-pass" type="password" placeholder="Enter a strong passphrase..." class="svelte-1uha8ag"/> <!></div> <div class="form-group svelte-1uha8ag"><label for="encrypt-pass-confirm" class="svelte-1uha8ag">Confirm Passphrase</label> <input id="encrypt-pass-confirm" type="password" placeholder="Confirm your passphrase..." class="svelte-1uha8ag"/> <!></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Continue</button></div>',1),Ed=u('<div class="recovery-word svelte-1uha8ag"><span class="word-number svelte-1uha8ag"></span> <span class="word-text svelte-1uha8ag"> </span></div>'),Fd=u('<div class="recovery-section svelte-1uha8ag"><div class="recovery-warning svelte-1uha8ag"><span class="warning-icon svelte-1uha8ag">📝</span> <p class="svelte-1uha8ag"><strong>Write this down!</strong> This 12-word phrase is the ONLY way to recover your data if you forget your passphrase.</p></div> <div class="recovery-phrase-display svelte-1uha8ag"><div class="recovery-words svelte-1uha8ag"></div> <button class="btn secondary copy-btn svelte-1uha8ag">📋 Copy to Clipboard</button></div> <div class="recovery-confirm svelte-1uha8ag"><label class="checkbox-label svelte-1uha8ag"><input type="checkbox" class="svelte-1uha8ag"/> <span class="svelte-1uha8ag">I have written down my recovery phrase and stored it safely</span></label></div></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Back</button> <button class="btn primary svelte-1uha8ag">Enable Encryption</button></div>',1),Dd=u('<div class="password-strength svelte-1uha8ag"><div class="strength-bar svelte-1uha8ag"><div></div></div> <span> </span></div>'),Ad=u('<span class="form-error svelte-1uha8ag">Passphrases do not match</span>'),Id=u('<div class="form-group svelte-1uha8ag"><label for="current-pass" class="svelte-1uha8ag">Current Passphrase</label> <input id="current-pass" type="password" placeholder="Enter current passphrase..." class="svelte-1uha8ag"/></div> <div class="form-group svelte-1uha8ag"><label for="new-pass" class="svelte-1uha8ag">New Passphrase</label> <input id="new-pass" type="password" placeholder="Enter new passphrase..." class="svelte-1uha8ag"/> <!></div> <div class="form-group svelte-1uha8ag"><label for="new-pass-confirm" class="svelte-1uha8ag">Confirm New Passphrase</label> <input id="new-pass-confirm" type="password" placeholder="Confirm new passphrase..." class="svelte-1uha8ag"/> <!></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn primary svelte-1uha8ag">Change Passphrase</button></div>',1),Md=u('<div class="encryption-warning danger svelte-1uha8ag"><span class="warning-icon svelte-1uha8ag">⚠️</span> <p class="svelte-1uha8ag"><strong class="svelte-1uha8ag">Warning:</strong> Removing encryption will make your database accessible without a passphrase. Anyone with access to your computer could view your financial data.</p></div> <div class="form-group svelte-1uha8ag"><label for="remove-pass" class="svelte-1uha8ag">Enter Passphrase to Confirm</label> <input id="remove-pass" type="password" placeholder="Enter current passphrase..." class="svelte-1uha8ag"/></div> <div class="form-actions svelte-1uha8ag"><button class="btn secondary svelte-1uha8ag">Cancel</button> <button class="btn danger svelte-1uha8ag">Remove Encryption</button></div>',1),Ld=u('<div class="app svelte-1uha8ag"><!></div> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>',1);function zd(n,i){Ms(i,!0);let c=y(Nt([])),d=y(!1),g=y(""),p=y(!1),f=y(null),w=y(""),m=y(!1),B=y(null);const $=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];let H=y(Nt([])),x=y(Nt([])),D=y(Nt([])),R=y(Nt({})),ae=y(!1),S=y(""),F=y("info"),J=y("dashboard"),he=y(null),te=y(null),me=y(null),ue=y(null),oe=y("timestamp"),ke=y("desc"),xe=y(!0),A=y(!1),Y=y(!0),se=y(""),we=y(""),Ce=y("passphrase"),aa=y(""),ka=y(!1),va=y(""),at=y(""),Na=y(""),At=y(!1),kt=y("passphrase"),Ka=y(null),Hs=y(!1),os=y(""),It=y(""),Ht=y(""),ut=y(null),Gs=y(!1),vs=y(""),ms=y("never"),mr=y(Nt(Date.now())),br=null,cs=y(!1),Bs=y(!1),Ps=y("family"),yr=y(!1),$s=y(null),wr=y(!1),bs=y(null),Ys=y(!1),Ns=y(null),js=y(""),xr=y(1),Hr=y(!1),Rt=y("upload"),Rs=y(null),Us=y(0),Gr=y(""),Ut=y(Nt([])),Mt=y(Nt([])),ys=y(Nt([])),zt=y(null),kr=y(!1),ws=y(null),Js=y(!1),Lt=y("incoming"),Ot=y(""),us=y(0),Kt=y("Uncategorized"),ds=y(""),_s=y(Nt(new Date().toISOString().split("T")[0])),Xt=y(""),_a=y("BTC"),Zt=y(""),Qt=y(""),Ks=y(!1),zs=y(null),xs=y("incoming"),ks=y(""),Xs=y("Uncategorized"),Cr=y(""),Tr=y(""),Zs=y(""),bt=y("BTC"),Qs=y(""),er=y(""),Sr=y(!1),Cs=y(null),ar=y(""),tr=y(""),Yr=y("zpub"),Os=y(1),Ts=y(""),Er=y(null),jr=y(!1),Ws=y(null),sr=y("sats"),Xa=y("display"),Fr=y(!1),Dr=y(!1),rr=y("dark"),Za=y(!0),Le=y("EUR"),Qa=y(null),gs=y(null),Ar=y(!1),lr=y(null),Ir=y(!1),Mr=y(!1),Jr=y(null),nr=y("average"),Kr=Nt({personal:!0,family:!0,business:!0}),Xr=Nt({}),Xn=Me(()=>[{value:null,label:"All accounts",type:"all"},...e(H).map(s=>({value:s.id,label:s.name,type:s.entity_type}))]),Lr=Me(()=>e(c).map(s=>s.name)),Zn=Me(()=>{const s=e(he)?e(x).filter(v=>v.entity_id===e(he)):e(x);return[{value:null,label:"All wallets"},...s.map(v=>({value:v.id,label:v.name}))]}),Fl=Me(()=>{const s=new Set;for(const v of e(D))v.timestamp&&s.add(new Date(v.timestamp*1e3).getFullYear());return Array.from(s).sort((v,_)=>_-v)}),Ss=Me(()=>e(D).filter(s=>{if(e(te)!==null&&s.wallet_id!==e(te))return!1;if(!s.timestamp)return e(me)===null&&e(ue)===null;const v=new Date(s.timestamp*1e3),_=v.getFullYear(),C=v.getMonth()+1;return!(e(me)!==null&&_!==e(me)||e(ue)!==null&&C!==e(ue))})),Qn=Me(()=>{const s=[...e(Ss)];return s.sort((v,_)=>{let C,E;return e(oe)==="timestamp"?(C=v.timestamp??0,E=_.timestamp??0):e(oe)==="amount_sats"?(C=v.amount_sats,E=_.amount_sats):e(oe)==="wallet_name"?(C=v.wallet_name.toLowerCase(),E=_.wallet_name.toLowerCase()):e(oe)==="category"&&(C=(v.category??"").toLowerCase(),E=(_.category??"").toLowerCase()),C<E?e(ke)==="asc"?-1:1:C>E?e(ke)==="asc"?1:-1:0}),s});const ei={Buy:"#4ade80",Sell:"#f87171","Transfer In":"#888888","Transfer Out":"#888888",Income:"#4ade80",Gift:"#a78bfa",Food:"#fb923c",Utilities:"#38bdf8",Shopping:"#f472b6","Trading Gain":"#4ade80","Trading Loss":"#f87171",Mining:"#fbbf24","Lending Interest (Income)":"#4ade80","Lending Interest (Cost)":"#f87171","Receive Loan":"#60a5fa","Repay Loan":"#f87171",Liquidation:"#ef4444",Uncategorized:"#444444"},ai=["Transfer In","Transfer Out","Receive Loan","Repay Loan"];let ps=Me(()=>e(Ss).filter(s=>(s.currency||"BTC")==="BTC")),Dl=Me(()=>{const s={};for(const v of e(ps))if(v.amount_sats<0&&!ai.includes(v.category||"")){const _=v.category||"Uncategorized";s[_]=(s[_]||0)+Math.abs(v.amount_sats)}return Object.entries(s).map(([v,_])=>({label:v,value:_,color:ei[v]||"#666"})).sort((v,_)=>_.value-v.value)}),Al=Me(()=>{const s={};for(const _ of e(ps))if(_.timestamp){const C=new Date(_.timestamp*1e3),E=`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`;s[E]=(s[E]||0)+_.amount_sats}return Object.entries(s).sort(([_],[C])=>_.localeCompare(C)).slice(-12).map(([_,C])=>{const[,E]=_.split("-");return{label:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(E)-1],value:C,color:C>=0?"#4ade80":"#f87171"}})});const ti=["Trading Gain","Buy","Income","Mining","Lending Interest (Income)"],si=["Trading Loss","Sell","Lending Interest (Cost)","Liquidation","Food","Shopping","Utilities"];let Zr=Me(()=>e(ps).filter(s=>{const v=s.category||"Uncategorized";return!!(ti.includes(v)&&s.amount_sats>0||v==="Gift"&&s.amount_sats>0)}).reduce((s,v)=>s+v.amount_sats,0)),Qr=Me(()=>Math.abs(e(ps).filter(s=>{const v=s.category||"Uncategorized";return!!(si.includes(v)&&s.amount_sats<0||v==="Gift"&&s.amount_sats<0)}).reduce((s,v)=>s+v.amount_sats,0))),Br=Me(()=>e(Zr)-e(Qr)),ri=Me(()=>e(ps).reduce((s,v)=>s+v.amount_sats,0)),Pr=Me(()=>{let s=0,v={};for(const _ of e(Ss))_.fee_sats&&_.fee_sats>0&&(s+=_.fee_sats),_.fee_fiat&&_.fee_fiat>0&&_.fee_fiat_currency&&(v[_.fee_fiat_currency]=(v[_.fee_fiat_currency]||0)+_.fee_fiat);return{btcFees:s,fiatFees:v}}),Il=Me(()=>{const s={};for(const v of e(Ss)){const _=v.currency||"BTC";_!=="BTC"&&(s[_]=(s[_]||0)+v.amount_sats)}for(const v in s)s[v]=s[v]/100;return s});const li=["Buy","Income","Mining","Gift","Trading Gain","Lending Interest (Income)"],ni=["Sell","Food","Utilities","Shopping","Trading Loss","Liquidation"],ii=["Transfer In","Transfer Out","Receive Loan","Repay Loan","Uncategorized"];let es=Me(()=>{if(!e(Qa))return{unrealized:{fiat:0,percent:0},realized:{fiat:0,percent:0},total:{fiat:0,percent:0},totalCostBasis:0,totalProceeds:0};const s=[...e(ps)].filter(I=>I.timestamp&&I.fiat_value!==null).sort((I,O)=>(I.timestamp??0)-(O.timestamp??0)),v=[],_=[];for(const I of s){const O=I.category||"Uncategorized";ii.includes(O)||(I.amount_sats>0&&li.includes(O)?v.push({sats:I.amount_sats,fiatValue:Math.abs(I.fiat_value),timestamp:I.timestamp}):I.amount_sats<0&&ni.includes(O)?_.push({sats:Math.abs(I.amount_sats),fiatValue:Math.abs(I.fiat_value),timestamp:I.timestamp}):I.amount_sats<0&&O==="Gift"?_.push({sats:Math.abs(I.amount_sats),fiatValue:Math.abs(I.fiat_value),timestamp:I.timestamp}):I.amount_sats>0&&O==="Gift"&&v.push({sats:I.amount_sats,fiatValue:Math.abs(I.fiat_value),timestamp:I.timestamp}))}let C=0,E=0,P=0,M=[...v];if(e(nr)==="fifo")for(const I of _){let O=I.sats;for(P+=I.fiatValue;O>0&&M.length>0;){const Z=M[0];if(Z.sats<=O){const re=Z.fiatValue,ve=Z.sats/I.sats,be=I.fiatValue*ve;C+=be-re,E+=re,O-=Z.sats,M.shift()}else{const re=O/Z.sats,ve=Z.fiatValue*re,be=O/I.sats,q=I.fiatValue*be;C+=q-ve,E+=ve,Z.sats-=O,Z.fiatValue-=ve,O=0}}}else{let I=v.reduce((q,X)=>q+X.sats,0),O=v.reduce((q,X)=>q+X.fiatValue,0);const Z=I>0?O/I:0;for(const q of _){const X=q.sats*Z;C+=q.fiatValue-X,E+=X,P+=q.fiatValue}const re=_.reduce((q,X)=>q+X.sats,0),ve=I-re,be=ve*Z;M=ve>0?[{sats:ve,fiatValue:be,timestamp:0}]:[]}const W=M.reduce((I,O)=>I+O.sats,0),L=M.reduce((I,O)=>I+O.fiatValue,0),K=W/1e8*e(Qa)-L,ie=L>0?K/L*100:0,G=E>0?C/E*100:0,ge=K+C,de=L+E,Ee=de>0?ge/de*100:0;return{unrealized:{fiat:K,percent:ie},realized:{fiat:C,percent:G},total:{fiat:ge,percent:Ee},totalCostBasis:de,totalProceeds:P}}),Ml=Me(()=>{const s=["#f7931a","#4ade80","#38bdf8","#a78bfa","#f472b6","#fb923c","#fbbf24","#60a5fa","#34d399","#f87171"];return tl().map((v,_)=>({label:v.name,value:e(R)[v.id]??0,color:s[_%s.length]})).filter(v=>v.value>0).sort((v,_)=>_.value-v.value)}),Ll=Me(()=>{if(e(ps).length===0)return[];const s=[...e(ps)].sort((E,P)=>(E.timestamp??0)-(P.timestamp??0)),v={};let _=0;for(const E of s){if(!E.timestamp)continue;const P=new Date(E.timestamp*1e3),M=`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}`;_+=E.amount_sats,v[M]=_}const C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return Object.entries(v).sort(([E],[P])=>E.localeCompare(P)).slice(-12).map(([E,P])=>{const[M,W]=E.split("-");return{label:`${C[parseInt(W)-1]} ${M.slice(2)}`,value:P}})}),oi=Me(()=>{const s=["personal","family","business"],v={};for(const _ of s){const E=e(H).filter(M=>M.entity_type===_).map(M=>{const W=e(x).filter(ne=>ne.entity_id===M.id).sort((ne,K)=>(e(R)[K.id]??0)-(e(R)[ne.id]??0)),L=W.reduce((ne,K)=>ne+(e(R)[K.id]??0),0);return{entity:M,wallets:W,totalBalance:L}}).sort((M,W)=>W.totalBalance-M.totalBalance),P=E.reduce((M,W)=>M+W.totalBalance,0);v[_]={totalBalance:P,entities:E}}return v});function Bl(s){return s.startsWith("manual-")?"manual":s.startsWith("lnm-futures-")?"lnm-fut":s.startsWith("lnm-options-")?"lnm-opt":s.startsWith("phoenix-")?"phoenix":s.startsWith("bitstack-")?"bitstack":s.startsWith("bull-")?"bull":s.slice(0,8)+"..."}function Pl(s){return s.txid.startsWith("manual-")||s.txid.startsWith("lnm-")||s.txid.startsWith("phoenix-")||s.txid.startsWith("bitstack-")||s.txid.startsWith("bull-")?null:`https://mempool.space/tx/${s.txid}`}function vi(s){Kr[s]=!Kr[s]}function ci(s){Xr[s]=!Xr[s]}function $l(s){return Kr[s]??!0}function Nl(s){return Xr[s]??!0}function ui(s){l(Os,s,!0),l(cs,!0)}function di(s){switch(s){case"personal":return"Personal";case"family":return"Family";case"business":return"Business";default:return s}}function U(s,v="info"){l(S,s,!0),l(F,v,!0),setTimeout(()=>{l(S,"")},3e3)}function el(s){const v=e(Le)==="EUR"?"€":"$",_=s.fiat>=0?"+":"",C=_+v+Math.abs(s.fiat).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),E=_+s.percent.toFixed(1)+"%";return`${C} (${E})`}function yt(s,v=!1){const _=s>0&&v?"+":s<0?"-":"",C=Math.abs(s);return e(sr)==="btc"?"₿ "+_+(C/1e8).toFixed(8):"丰 "+_+C.toLocaleString()}function _i(s,v=!1){const _=s.currency||"BTC";if(_==="BTC")return yt(s.amount_sats,v);{const C=s.amount_sats/100,E=C>0&&v?"+":C<0?"-":"";return(_==="EUR"?"€":"$")+" "+E+Math.abs(C).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}function Rl(s){return s?new Date(s*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Pending"}function gi(s){return s?new Date(s*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):""}function al(){return e(te)!==null?e(R)[e(te)]??0:(e(he)?e(x).filter(v=>v.entity_id===e(he)):e(x)).reduce((v,_)=>v+(e(R)[_.id]??0),0)}function tl(){return e(te)!==null?e(x).filter(s=>s.id===e(te)):e(he)?e(x).filter(s=>s.entity_id===e(he)):e(x)}function pi(){return e(H).filter(s=>s.entity_type==="personal"||s.entity_type==="family")}function $r(s){e(oe)===s?l(ke,e(ke)==="asc"?"desc":"asc",!0):(l(oe,s,!0),l(ke,"asc"))}function Nr(s){return e(oe)!==s?"":e(ke)==="asc"?" ↑":" ↓"}function Ul(){l(me,null),l(ue,null)}function sl(s){return s.txid.startsWith("manual-")}function fi(s){l(Jr,s,!0),l(Lt,s.amount_sats>=0?"incoming":"outgoing",!0),l(_a,s.currency||"BTC",!0),e(_a)==="BTC"?l(Ot,Math.abs(s.amount_sats).toString(),!0):l(Ot,(Math.abs(s.amount_sats)/100).toString(),!0),l(us,s.wallet_id,!0),l(Kt,s.category||"Uncategorized",!0),l(ds,s.note?`${s.note} (copy)`:"(copy)",!0),l(_s,s.timestamp?new Date(s.timestamp*1e3).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],!0),l(Xt,s.fiat_value?Math.abs(s.fiat_value).toString():"",!0),l(Zt,s.fee_sats?s.fee_sats.toString():"",!0),l(Qt,s.fee_fiat?s.fee_fiat.toString():"",!0),l(Mr,!0)}async function hi(){await Zl(),l(Mr,!1),l(Jr,null)}function zl(){l(Mr,!1),l(Jr,null),l(Ot,""),l(ds,""),l(Xt,""),l(Kt,"Uncategorized"),l(_s,new Date().toISOString().split("T")[0],!0),l(_a,"BTC"),l(Zt,""),l(Qt,"")}function mi(s){return s===null?"—":(e(Le)==="EUR"?"€ ":"$ ")+Math.abs(s).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function Rr(s){if(!e(Qa))return"";const _=s/1e8*e(Qa);return(e(Le)==="EUR"?"€":"$")+_.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function Ur(){if(!e(Qa)||!e(gs))return null;const s=e(Qa)-e(gs),v=s/e(gs)*100;return{value:s,percent:v}}function bi(){const s=Ur();if(!s)return"";const v=e(Le)==="EUR"?"€":"$",_=s.value>=0?"+":"";return`${_}${v}${Math.abs(s.value).toFixed(0)} (${_}${s.percent.toFixed(2)}%)`}function yi(s){return new Date(s*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}async function ir(){try{l(H,await le("get_entities"),!0)}catch(s){U(`${s}`,"error")}}async function Es(){try{l(x,await le("get_wallets"),!0),await Vs()}catch(s){U(`${s}`,"error")}}async function Vs(){try{l(R,await le("get_wallet_balances"),!0)}catch(s){console.error("Failed to load balances:",s)}}async function Ol(){try{const s=await le("get_setting",{key:"currency_format"});s&&l(sr,s,!0)}catch(s){console.error("Failed to load settings:",s)}}async function or(){try{l(c,await le("get_categories"),!0)}catch(s){console.error("Failed to load categories:",s),l(c,[{id:1,name:"Uncategorized",is_system:!0},{id:2,name:"Buy",is_system:!0},{id:3,name:"Sell",is_system:!0},{id:4,name:"Transfer In",is_system:!0},{id:5,name:"Transfer Out",is_system:!0}],!0)}}async function Wl(){if(!e(g).trim()){U("Please enter a category name","error");return}try{await le("add_category",{name:e(g).trim()}),U(`Category "${e(g)}" added`,"success"),l(g,""),l(d,!1),await or()}catch(s){U(`${s}`,"error")}}function wi(s){if(s.is_system){U("Cannot edit system categories","error");return}l(f,s,!0),l(w,s.name,!0),l(p,!0)}async function Vl(){if(!e(f)||!e(w).trim()){U("Please enter a category name","error");return}try{await le("update_category",{id:e(f).id,name:e(w).trim()}),U("Category updated","success"),l(p,!1),l(f,null),await or(),await Bt()}catch(s){U(`${s}`,"error")}}function xi(s){if(s.is_system){U("Cannot delete system categories","error");return}l(B,s,!0),l(m,!0)}async function ki(){if(e(B))try{await le("delete_category",{id:e(B).id}),U("Category deleted","success"),l(m,!1),l(B,null),await or(),await Bt()}catch(s){U(`${s}`,"error")}}async function ql(s){l(sr,s,!0);try{await le("set_setting",{key:"currency_format",value:s})}catch(v){U(`${v}`,"error")}}async function Hl(){try{const s=await le("get_setting",{key:"fiat_enabled"});l(Za,s==="true");const v=await le("get_setting",{key:"fiat_currency"});(v==="USD"||v==="EUR")&&l(Le,v,!0);const _=await le("get_setting",{key:"cost_basis_method"});(_==="average"||_==="fifo")&&l(nr,_,!0)}catch(s){console.error("Failed to load fiat settings:",s)}}async function Gl(s){l(nr,s,!0);try{await le("set_setting",{key:"cost_basis_method",value:s}),U(`Cost basis method set to ${s==="average"?"Average Cost":"FIFO"}`,"success")}catch(v){U(`${v}`,"error")}}async function Ci(s){l(Za,s,!0);try{await le("set_setting",{key:"fiat_enabled",value:s?"true":"false"}),s&&!e(Qa)&&await vr()}catch(v){U(`${v}`,"error")}}async function Yl(s){if(s===e(Le))return;e(D).filter(_=>_.fiat_value!==null).length>0?(l(ws,s,!0),l(kr,!0)):await rl(s,!1)}async function rl(s,v){const _=e(Le);l(Le,s,!0),l(Qa,null),l(gs,null),l(kr,!1),l(ws,null);try{await le("set_setting",{key:"fiat_currency",value:s}),await vr(),v&&(await Ti(),await Bt(),await ll()),U(`Currency changed to ${s}`,"success")}catch(C){l(Le,_,!0),U(`Failed to change currency: ${C}`,"error")}}async function Ti(){for(const s of e(D))if(s.fiat_value!==null)try{await le("update_transaction_fiat",{id:s.id,fiatValue:null,fiatCurrency:null})}catch(v){console.error("Failed to clear fiat value:",v)}}function jl(){l(kr,!1),l(ws,null)}async function vr(){l(Ar,!0);try{const s=await le("fetch_current_price",{currency:e(Le).toLowerCase()});l(Qa,s,!0),l(lr,new Date,!0),await le("cache_price",{currency:e(Le),price:s,date:"current"}),await Si(),U(`Price updated: ${e(Le)==="EUR"?"€":"$"}${s.toLocaleString()}`,"success")}catch(s){U(`Failed to fetch price: ${s}`,"error")}l(Ar,!1)}async function Si(){try{const s=new Date,v=`${String(s.getDate()).padStart(2,"0")}-${String(s.getMonth()+1).padStart(2,"0")}-${s.getFullYear()}`,_=`${e(Le)}-dayopen`,C=await le("get_cached_price",{currency:e(Le),date:_});if(C){l(gs,C,!0);return}const E=await le("fetch_historical_price",{currency:e(Le).toLowerCase(),date:v});l(gs,E,!0),await le("cache_price",{currency:e(Le),price:E,date:_})}catch(s){console.error("Failed to fetch day open price:",s),l(gs,null)}}async function Jl(){try{const s=await le("get_cached_price",{currency:e(Le),date:"current"});s&&l(Qa,s,!0);const v=`${e(Le)}-dayopen`,_=await le("get_cached_price",{currency:e(Le),date:v});_&&l(gs,_,!0)}catch(s){console.error("Failed to load cached price:",s)}}async function Ei(s){const v=new Date(s*1e3),_=`${String(v.getDate()).padStart(2,"0")}-${String(v.getMonth()+1).padStart(2,"0")}-${v.getFullYear()}`;try{const E=await le("get_cached_price",{currency:e(Le),date:_});if(E)return E}catch(E){console.error("Cache check failed:",E)}const C=await le("fetch_historical_price",{currency:e(Le).toLowerCase(),date:_});return await le("cache_price",{currency:e(Le),price:C,date:_}),C}async function ll(){const s=e(D).filter(M=>M.fiat_value===null&&M.timestamp&&(M.currency||"BTC")==="BTC");if(s.length===0){U("All transactions have fiat values","info");return}l(Ir,!0),U(`Fetching fiat values for ${s.length} transactions...`,"info");const v={};for(const M of s){if(!M.timestamp)continue;const W=new Date(M.timestamp*1e3),L=`${W.getFullYear()}-${W.getMonth()+1}-${W.getDate()}`;v[L]||(v[L]=[]),v[L].push(M)}const _=Object.entries(v);let C=0,E=_.length,P=0;for(const[M,W]of _){const L=W[0];if(!L.timestamp)continue;let ne=null,K=0;const ie=5;for(;ne===null&&K<ie;)try{if(ne=await Ei(L.timestamp),ne===null&&(K++,K<ie)){const G=5e3*Math.pow(2,K-1);U(`Rate limited. Waiting ${G/1e3}s before retry (${K}/${ie})...`,"info"),await new Promise(ge=>setTimeout(ge,G))}}catch(G){const ge=String(G).toLowerCase();if(ge.includes("429")||ge.includes("rate")||ge.includes("limit")||ge.includes("too many"))if(K++,K<ie){const de=1e4*Math.pow(2,K-1);U(`Rate limited. Waiting ${de/1e3}s before retry (${K}/${ie})...`,"info"),await new Promise(Ee=>setTimeout(Ee,de))}else console.error(`Failed to fetch price after ${ie} retries:`,G);else{console.error("Failed to fetch price:",G);break}}if(ne===null){console.warn(`Skipping date ${M} after ${K} retries`),P++;continue}for(const G of W){const de=Math.abs(G.amount_sats)/1e8*ne;try{await le("update_transaction_fiat",{id:G.id,fiatValue:G.amount_sats>=0?de:-de,fiatCurrency:e(Le)}),G.fiat_value=G.amount_sats>=0?de:-de,G.fiat_currency=e(Le),C++}catch(Ee){console.error("Failed to update tx fiat:",Ee)}}P++,P%5===0&&U(`Progress: ${P}/${E} dates processed (${C} transactions updated)`,"info"),await new Promise(G=>setTimeout(G,3e3))}l(Ir,!1),C>0?U(`Done! Updated fiat values for ${C} transactions`,"success"):U("No fiat values could be fetched. API may be unavailable.","error")}function Fi(){var s;l(Rt,"upload"),l(Rs,null),l(Us,((s=e(x)[0])==null?void 0:s.id)||0,!0),l(Gr,""),l(Ut,[],!0),l(Mt,[],!0),l(ys,[],!0),l(zt,null),l(Hr,!0)}async function Di(s){const v=s.target;if(!v.files||v.files.length===0)return;l(Rs,v.files[0],!0);const _=await e(Rs).text(),{headers:C,rows:E}=Ov(_);if(C.length===0){l(Mt,["Could not parse CSV file"],!0);return}const P=Wv(C);if(!P){l(Mt,["Unknown CSV format. Supported formats: Phoenix, Bitstack, Bull Bitcoin"],!0);return}l(Gr,P.name,!0);const M=P.parse(C,E);l(Ut,M.transactions,!0),l(Mt,M.errors,!0),l(ys,M.warnings,!0),l(Rt,"preview")}async function Ai(){if(!(!e(Us)||e(Ut).length===0)){l(Rt,"importing");try{const s=e(Ut).map(_=>({id:_.id,timestamp:_.timestamp,amount_sats:_.amount_sats,fee_sats:_.fee_sats,fee_fiat:_.fee_fiat,fee_fiat_currency:_.fee_fiat_currency,category:_.category==="Uncategorized"?null:_.category,note:_.note||null,fiat_value:_.fiat_value,fiat_currency:_.fiat_currency,currency:_.currency})),v=await le("import_transactions",{walletId:e(Us),transactions:s});l(zt,v,!0),l(Rt,"done"),await Bt(),await Vs()}catch(s){l(Mt,[`Import failed: ${s}`],!0),l(Rt,"preview")}}}function nl(){l(Hr,!1),l(Rt,"upload"),l(Rs,null),l(Ut,[],!0),l(Mt,[],!0),l(ys,[],!0),l(zt,null)}async function Bt(){l(jr,!0);try{l(D,await le("get_all_transactions",{entityId:e(he)}),!0)}catch(s){U(`${s}`,"error")}l(jr,!1)}async function Ii(){if(!e(Ts).trim()){U("Please enter a name","error");return}try{e(Ps)==="family"?await le("add_family_member",{name:e(Ts).trim()}):await le("add_business",{name:e(Ts).trim(),parentId:e(Er)}),U(`Added "${e(Ts)}"`,"success"),l(Ts,""),l(Er,null),l(Bs,!1),await ir()}catch(s){U(`${s}`,"error")}}function Kl(s){l(bs,s,!0),l(wr,!0)}async function Mi(){if(e(bs))try{await le("delete_entity",{id:e(bs).id}),U("Deleted","success"),e(he)===e(bs).id&&l(he,null),l(wr,!1),l(bs,null),await ir(),await Es()}catch(s){U(`${s}`,"error")}}async function Li(){if(!e(ar)){U("Please enter a wallet name","error");return}if(!e(ae)&&!e(tr)){U("Please enter an extended public key or select Manual","error");return}try{await le("add_wallet",{name:e(ar),xpub:e(ae)?null:e(tr),walletType:e(ae)?"manual":e(Yr),entityId:e(Os)}),U("Wallet added","success"),l(ar,""),l(tr,""),l(ae,!1),l(cs,!1),await Es()}catch(s){U(`${s}`,"error")}}function il(s){l($s,s,!0),l(yr,!0)}async function Bi(){if(e($s))try{await le("delete_wallet",{id:e($s).id}),U("Wallet deleted","success"),l(yr,!1),l($s,null),await Es(),await Bt()}catch(s){U(`${s}`,"error")}}function ol(s){l(Ns,s,!0),l(js,s.name,!0),l(xr,s.entity_id,!0),l(Ys,!0)}async function Pi(){if(!e(Ns)||!e(js).trim()){U("Please enter a name","error");return}try{await le("update_wallet",{id:e(Ns).id,name:e(js).trim(),entityId:e(xr)}),U("Wallet updated","success"),l(Ys,!1),l(Ns,null),await Es()}catch(s){U(`${s}`,"error")}}async function Xl(s){l(Ws,s.id,!0);try{const v=await le("fetch_wallet_transactions",{xpub:s.xpub});await le("save_transactions",{walletId:s.id,transactions:v}),U(`Synced ${v.length} transactions`,"success"),await Bt(),await Vs(),e(Za)&&await ll()}catch(v){U(`${v}`,"error")}l(Ws,null)}async function $i(s,v){try{await le("update_transaction",{id:s.id,category:v==="Uncategorized"?null:v,note:s.note}),s.category=v==="Uncategorized"?null:v}catch(_){U(`${_}`,"error")}}async function Ni(s,v){try{await le("update_transaction",{id:s.id,category:s.category,note:v||null}),s.note=v||null}catch(_){U(`${_}`,"error")}}async function Zl(){if(!e(Ot)||!e(us)){U("Please fill in amount and select a wallet","error");return}const s=parseFloat(e(Ot));if(isNaN(s)||s<=0){U("Please enter a valid amount","error");return}let v;e(_a)==="BTC"?v=Math.round(s*(e(Ot).includes(".")?1e8:1)):v=Math.round(s*100);const _=e(Lt)==="outgoing"?-v:v,C=Math.floor(new Date(e(_s)).getTime()/1e3);let E=null;if(e(Xt)){const L=parseFloat(e(Xt));isNaN(L)||(E=e(Lt)==="outgoing"?-L:L)}let P=null,M=null,W=null;if(e(Zt)){const L=parseFloat(e(Zt));!isNaN(L)&&L>0&&(P=Math.round(L))}if(e(Qt)){const L=parseFloat(e(Qt));!isNaN(L)&&L>0&&(M=L,W=e(Le))}try{await le("add_manual_transaction",{walletId:e(us),amountSats:_,timestamp:C,category:e(Kt)==="Uncategorized"?null:e(Kt),note:e(ds)||null,fiatValue:E,fiatCurrency:E?e(Le):null,currency:e(_a),feeSats:P,feeFiat:M,feeFiatCurrency:W}),U("Transaction added","success"),l(Js,!1),l(Ot,""),l(ds,""),l(Xt,""),l(Kt,"Uncategorized"),l(_s,new Date().toISOString().split("T")[0],!0),l(_a,"BTC"),l(Zt,""),l(Qt,""),await Bt(),await Vs()}catch(L){U(`${L}`,"error")}}function Ri(s){if(!sl(s)){U("Only manual transactions can be edited","error");return}l(zs,s,!0),l(xs,s.amount_sats>=0?"incoming":"outgoing",!0),l(bt,s.currency||"BTC",!0),e(bt)==="BTC"?l(ks,Math.abs(s.amount_sats).toString(),!0):l(ks,(Math.abs(s.amount_sats)/100).toString(),!0),l(Xs,s.category||"Uncategorized",!0),l(Cr,s.note||"",!0),l(Tr,s.timestamp?new Date(s.timestamp*1e3).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],!0),l(Zs,s.fiat_value?Math.abs(s.fiat_value).toString():"",!0),l(Qs,s.fee_sats?s.fee_sats.toString():"",!0),l(er,s.fee_fiat?s.fee_fiat.toString():"",!0),l(Ks,!0)}async function Ui(){if(!e(zs)||!e(ks)){U("Please fill in amount","error");return}const s=parseFloat(e(ks));if(isNaN(s)||s<=0){U("Please enter a valid amount","error");return}let v;e(bt)==="BTC"?v=Math.round(s*(e(ks).includes(".")?1e8:1)):v=Math.round(s*100);const _=e(xs)==="outgoing"?-v:v,C=Math.floor(new Date(e(Tr)).getTime()/1e3);let E=null;if(e(Zs)){const L=parseFloat(e(Zs));isNaN(L)||(E=e(xs)==="outgoing"?-L:L)}let P=null,M=null,W=null;if(e(Qs)){const L=parseFloat(e(Qs));!isNaN(L)&&L>0&&(P=Math.round(L))}if(e(er)){const L=parseFloat(e(er));!isNaN(L)&&L>0&&(M=L,W=e(Le))}try{await le("update_manual_transaction",{id:e(zs).id,amountSats:_,timestamp:C,category:e(Xs)==="Uncategorized"?null:e(Xs),note:e(Cr)||null,fiatValue:E,fiatCurrency:E?e(Le):null,currency:e(bt),feeSats:P,feeFiat:M,feeFiatCurrency:W}),U("Transaction updated","success"),l(Ks,!1),l(zs,null),await Bt(),await Vs()}catch(L){U(`${L}`,"error")}}function zi(s){if(!sl(s)){U("Only manual transactions can be deleted","error");return}l(Cs,s,!0),l(Sr,!0)}async function Oi(){if(e(Cs))try{await le("delete_transaction",{id:e(Cs).id}),U("Transaction deleted","success"),l(Sr,!1),l(Cs,null),await Bt(),await Vs()}catch(s){U(`${s}`,"error")}}async function Ql(){try{const s=await le("get_setting",{key:"theme"});(s==="light"||s==="dark")&&(l(rr,s,!0),en(e(rr)))}catch(s){console.error("Failed to load theme:",s)}}function en(s){document.documentElement.setAttribute("data-theme",s)}async function an(s){l(rr,s,!0),en(s);try{await le("set_setting",{key:"theme",value:s})}catch(v){U(`${v}`,"error")}}async function Wi(){l(Fr,!0);try{const s=[["Date","Amount (sats)","Currency","Fiat Value","Fiat Currency","Fee (sats)","Fee (fiat)","Fee Currency","Category","Note","Wallet","Owner","TxID"].join(",")];for(const P of e(D)){const W=[P.timestamp?new Date(P.timestamp*1e3).toISOString():"",P.amount_sats,P.currency||"BTC",P.fiat_value??"",P.fiat_currency??"",P.fee_sats??"",P.fee_fiat??"",P.fee_fiat_currency??"",P.category??"",`"${(P.note||"").replace(/"/g,'""')}"`,P.wallet_name,P.owner_name,P.txid].join(",");s.push(W)}const v=s.join(`
`),_=new Blob([v],{type:"text/csv"}),C=URL.createObjectURL(_),E=document.createElement("a");E.href=C,E.download=`satstone-export-${new Date().toISOString().split("T")[0]}.csv`,E.click(),URL.revokeObjectURL(C),U("Data exported successfully","success")}catch(s){U(`Export failed: ${s}`,"error")}l(Fr,!1)}async function Vi(){l(Y,!0);try{await le("check_db_exists")?(l(A,await le("check_db_encrypted"),!0),l(xe,e(A),!0)):(l(A,!1),l(xe,!1))}catch(s){console.error("Failed to check encryption status:",s),l(A,!1),l(xe,!1)}l(Y,!1)}async function tn(){if(!e(se)){l(we,"Please enter your passphrase");return}l(we,"");try{await le("unlock_with_passphrase",{passphrase:e(se)}),l(xe,!1),l(se,""),l(mr,Date.now(),!0)}catch{l(we,"Invalid passphrase. Please try again.")}}async function qi(){if(!e(aa).trim()){l(we,"Please enter your recovery phrase");return}l(we,"");const s=e(aa).toLowerCase().trim().replace(/[\n\r,]+/g," ").replace(/\s+/g," ").replace(/[0-9]+\.\s*/g,"").trim();console.log("Normalized recovery phrase:",s),console.log("Word count:",s.split(" ").length);try{const v=await le("validate_recovery_phrase",{phrase:s});if(console.log("Validation result:",v),!v){l(we,"Invalid recovery phrase format. Please check spelling.");return}await le("unlock_with_recovery",{recoveryPhrase:s}),l(xe,!1),l(aa,""),l(mr,Date.now(),!0)}catch(v){console.error("Unlock error:",v),l(we,`Failed to unlock: ${v}`)}}async function Hi(){l(kt,"passphrase"),l(va,""),l(at,""),l(Na,""),l(At,!1),l(Ka,null),l(ka,!0)}async function Gi(){try{l(Na,await le("generate_recovery_phrase"),!0),l(kt,"recovery")}catch(s){U(`Failed to generate recovery phrase: ${s}`,"error")}}async function Yi(s){if(!s){l(Ka,null);return}try{l(Ka,await le("check_password_strength",{password:s}),!0)}catch(v){console.error("Failed to check password strength:",v)}}async function ji(s){if(!s){l(ut,null);return}try{l(ut,await le("check_password_strength",{password:s}),!0)}catch(v){console.error("Failed to check password strength:",v)}}async function Ji(){if(e(va)!==e(at)){U("Passphrases do not match","error");return}if(!e(At)){U("Please confirm you have saved your recovery phrase","error");return}const s=e(Na).toLowerCase().trim().replace(/\s+/g," ");try{await le("encrypt_database",{passphrase:e(va),recoveryPhrase:s}),U("Database encrypted successfully!","success"),l(A,!0),l(ka,!1),l(va,""),l(at,""),l(Na,""),l(At,!1),l(kt,"passphrase")}catch(v){U(`Encryption failed: ${v}`,"error")}}function sn(){l(ka,!1),l(va,""),l(at,""),l(Na,""),l(At,!1),l(kt,"passphrase"),l(Ka,null)}async function Ki(){if(!e(os)||!e(It)||!e(Ht)){U("Please fill in all fields","error");return}if(e(It)!==e(Ht)){U("New passphrases do not match","error");return}try{await le("change_passphrase",{oldPassphrase:e(os),newPassphrase:e(It)}),U("Passphrase changed successfully!","success"),l(Hs,!1),l(os,""),l(It,""),l(Ht,""),l(ut,null)}catch(s){U(`Failed to change passphrase: ${s}`,"error")}}async function Xi(){if(!e(vs)){U("Please enter your passphrase","error");return}try{await le("remove_encryption",{passphrase:e(vs)}),U("Encryption removed successfully","success"),l(A,!1),l(Gs,!1),l(vs,"")}catch(s){U(`Failed to remove encryption: ${s}`,"error")}}function Zi(){navigator.clipboard.writeText(e(Na)),U("Recovery phrase copied to clipboard","success")}async function rn(){try{const s=await le("get_setting",{key:"auto_lock"});s&&l(ms,s,!0)}catch(s){console.error("Failed to load auto-lock setting:",s)}}async function Qi(s){l(ms,s,!0);try{await le("set_setting",{key:"auto_lock",value:s})}catch(v){U(`Failed to save setting: ${v}`,"error")}vl()}function vl(){if(br&&(clearInterval(br),br=null),e(ms)==="never"||!e(A))return;const s=parseInt(e(ms))*60*1e3;br=setInterval(()=>{Date.now()-e(mr)>s&&!e(xe)&&(l(xe,!0),U("App locked due to inactivity","info"))},1e4)}function eo(){l(mr,Date.now(),!0)}function ao(){["mousedown","keydown","scroll","touchstart"].forEach(v=>{document.addEventListener(v,eo,{passive:!0})})}async function to(){try{await le("reset_all_data"),U("All data has been reset","success"),l(Dr,!1),await ir(),await Es(),await Bt()}catch(s){U(`Reset failed: ${s}`,"error")}}_r(()=>{e(he),l(te,null),Bt()}),_r(()=>{e(te),Bt()}),_r(()=>{const s=setInterval(()=>{},3e4);return()=>clearInterval(s)}),_r(()=>{!e(xe)&&!e(Y)&&(ir(),Es(),or(),Ol(),Ql(),rn().then(()=>vl()),Hl().then(()=>{Jl().then(()=>{e(Za)&&vr()})}))}),Vi().then(()=>{e(xe)||(ir(),Es(),or(),Ol(),Ql(),rn().then(()=>vl()),Hl().then(()=>{Jl().then(()=>{e(Za)&&vr()})}))}),ao();var ln=Ld(),cl=_e(ln),so=t(cl);{var ro=s=>{var v=Vv();o(s,v)},lo=s=>{var v=Pa(),_=_e(v);{var C=P=>{var M=Jv(),W=t(M),L=r(t(W),6),ne=t(L);let K;ne.__click=()=>{l(Ce,"passphrase"),l(we,"")};var ie=r(ne,2);let G;ie.__click=()=>{l(Ce,"recovery"),l(we,"")},a(L);var ge=r(L,2);{var de=q=>{var X=qv(),Te=t(X);Xe(Te),Te.__keydown=Je=>Je.key==="Enter"&&tn();var He=r(Te,2);He.__click=tn,a(X),ea(Te,()=>e(se),Je=>l(se,Je)),o(q,X)},Ee=q=>{var X=Hv(),Te=t(X);zo(Te);var He=r(Te,2);He.__click=qi,a(X),ea(Te,()=>e(aa),Je=>l(aa,Je)),o(q,X)};k(ge,q=>{e(Ce)==="passphrase"?q(de):q(Ee,!1)})}var I=r(ge,2);{var O=q=>{var X=Gv(),Te=t(X,!0);a(X),b(()=>h(Te,e(we))),o(q,X)};k(I,q=>{e(we)&&q(O)})}var Z=r(I,2),re=t(Z);{var ve=q=>{var X=Yv(),Te=r(_e(X));Te.__click=()=>l(Ce,"recovery"),o(q,X)},be=q=>{var X=jv(),Te=r(_e(X));Te.__click=()=>l(Ce,"passphrase"),o(q,X)};k(re,q=>{e(Ce)==="passphrase"?q(ve):q(be,!1)})}a(Z),a(W),a(M),b(()=>{K=Q(ne,1,"unlock-tab svelte-1uha8ag",null,K,{active:e(Ce)==="passphrase"}),G=Q(ie,1,"unlock-tab svelte-1uha8ag",null,G,{active:e(Ce)==="recovery"})}),o(P,M)},E=P=>{var M=Mu(),W=_e(M),L=t(W),ne=t(L),K=t(ne);$n(K,{size:24,color:"#f7931a"}),nt(2),a(ne),a(L);var ie=r(L,2),G=t(ie);Pn(G,{get options(){return e(Xn)},placeholder:"All accounts",get value(){return e(he)},set value(ce){l(he,ce,!0)}});var ge=r(G,2);Pn(ge,{get options(){return e(Zn)},placeholder:"All wallets",get value(){return e(te)},set value(ce){l(te,ce,!0)}}),a(ie);var de=r(ie,2),Ee=t(de),I=r(t(Ee),2),O=t(I,!0);a(I);var Z=r(I,2);{var re=ce=>{var V=Kv(),N=t(V,!0);a(V),b(ee=>h(N,ee),[()=>Rr(al())]),o(ce,V)};k(Z,ce=>{e(Za)&&e(Qa)&&ce(re)})}a(Ee);var ve=r(Ee,2);{var be=ce=>{var V=Zv(),N=t(V),ee=t(N);a(N);var Fe=r(N,2),fa=t(Fe);{var za=ha=>{var Ze=ct();b(ma=>h(Ze,`${e(Le)==="EUR"?"€":"$"}${ma??""}`),[()=>e(Qa).toLocaleString()]),o(ha,Ze)},ot=ha=>{var Ze=ct("—");o(ha,Ze)};k(fa,ha=>{e(Qa)?ha(za):ha(ot,!1)})}a(Fe);var tt=r(Fe,2),ft=t(tt);{var wt=ha=>{var Ze=Xv();let ma;var rt=t(Ze,!0);a(Ze),b((Ke,Ta)=>{ma=Q(Ze,1,"svelte-1uha8ag",null,ma,Ke),h(rt,Ta)},[()=>{var Ke,Ta;return{positive:((Ke=Ur())==null?void 0:Ke.value)??!0,negative:((Ta=Ur())==null?void 0:Ta.value)??!1}},bi]),o(ha,Ze)},st=ha=>{var Ze=Pa(),ma=_e(Ze);{var rt=Ta=>{var ht=ct();b(Ct=>h(ht,Ct),[()=>e(lr).toLocaleTimeString()]),o(Ta,ht)},Ke=Ta=>{var ht=ct("—");o(Ta,ht)};k(ma,Ta=>{e(lr)?Ta(rt):Ta(Ke,!1)},!0)}o(ha,Ze)};k(ft,ha=>{Ur()?ha(wt):ha(st,!1)})}a(tt),a(V),b(()=>h(ee,`BTC / ${e(Le)??""}`)),o(ce,V)};k(ve,ce=>{e(Za)&&ce(be)})}var q=r(ve,2);let X;q.__click=vr;var Te=t(q);yl(Te,{size:16}),a(q),a(de),a(W);var He=r(W,2),Je=t(He);let Ra;Je.__click=()=>l(J,"dashboard");var Ma=r(Je,2);let Ca;Ma.__click=()=>l(J,"wallets");var qa=r(Ma,2);let Ha;qa.__click=()=>l(J,"transactions");var dt=r(qa,2);let _t;dt.__click=()=>l(J,"settings"),a(He);var ca=r(He,2);{var sa=ce=>{var V=Qv(),N=t(V,!0);a(V),b(()=>{Q(V,1,`toast ${e(F)??""}`,"svelte-1uha8ag"),h(N,e(S))}),o(ce,V)};k(ca,ce=>{e(S)&&ce(sa)})}var Ye=r(ca,2),Oe=t(Ye);{var ga=ce=>{var V=kc(),N=_e(V),ee=r(t(N),2),Fe=t(ee),fa=t(Fe);fa.value=(fa.__value=null)??"";var za=r(fa);Ie(za,17,()=>e(Fl),Ae,(T,z)=>{var pe=ec(),Pe=t(pe,!0);a(pe);var xa={};b(()=>{h(Pe,e(z)),xa!==(xa=e(z))&&(pe.value=(pe.__value=e(z))??"")}),o(T,pe)}),a(Fe);var ot=r(Fe,2),tt=t(ot);tt.value=(tt.__value=null)??"";var ft=r(tt);Ie(ft,17,()=>$,Ae,(T,z)=>{var pe=ac(),Pe=t(pe,!0);a(pe);var xa={};b(()=>{h(Pe,e(z).label),xa!==(xa=e(z).value)&&(pe.value=(pe.__value=e(z).value)??"")}),o(T,pe)}),a(ot);var wt=r(ot,2);{var st=T=>{var z=tc();z.__click=Ul,o(T,z)};k(wt,T=>{(e(me)!==null||e(ue)!==null)&&T(st)})}a(ee),a(N);var ha=r(N,2),Ze=t(ha),ma=t(Ze),rt=t(ma,!0);a(ma);var Ke=r(ma,2),Ta=t(Ke,!0);a(Ke);var ht=r(Ke,2);{var Ct=T=>{var z=rc();Ie(z,21,()=>Object.entries(e(Il)),Ae,(pe,Pe)=>{var xa=Me(()=>In(e(Pe),2));let qt=()=>e(xa)[0],rs=()=>e(xa)[1];var Jt=sc();let Ds;var cr=t(Jt);a(Jt),b(ur=>{Ds=Q(Jt,1,"fiat-holding svelte-1uha8ag",null,Ds,{positive:rs()>=0,negative:rs()<0}),h(cr,`${qt()==="EUR"?"€":"$"}${ur??""}`)},[()=>rs().toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]),o(pe,Jt)}),a(z),o(T,z)};k(ht,T=>{Object.keys(e(Il)).length>0&&T(Ct)})}a(Ze);var Wt=r(Ze,2),Ge=r(t(Wt),2),ba=t(Ge,!0);a(Ge);var ra=r(Ge,2);{var Ga=T=>{var z=lc(),pe=t(z,!0);a(z),b(Pe=>h(pe,Pe),[()=>Rr(e(Zr))]),o(T,z)};k(ra,T=>{e(Za)&&e(Qa)&&T(Ga)})}a(Wt);var Ya=r(Wt,2),Sa=r(t(Ya),2),Oa=t(Sa,!0);a(Sa);var ya=r(Sa,2);{var ja=T=>{var z=nc(),pe=t(z,!0);a(z),b(Pe=>h(pe,Pe),[()=>Rr(e(Qr))]),o(T,z)};k(ya,T=>{e(Za)&&e(Qa)&&T(ja)})}a(Ya);var Wa=r(Ya,2),wa=r(t(Wa),2);let Ea;var Fa=t(wa,!0);a(wa);var Ja=r(wa,2);{var vt=T=>{var z=ic(),pe=t(z,!0);a(z),b(Pe=>h(pe,Pe),[()=>Rr(e(Br))]),o(T,z)};k(Ja,T=>{e(Za)&&e(Qa)&&T(vt)})}a(Wa),a(ha);var ta=r(ha,2),ia=t(ta),La=r(t(ia),2);{var Ba=T=>{var z=oc();let pe;var Pe=t(z,!0);a(z),b(xa=>{pe=Q(z,1,"stat-value svelte-1uha8ag",null,pe,{positive:e(es).realized.fiat>=0,negative:e(es).realized.fiat<0}),h(Pe,xa)},[()=>el(e(es).realized)]),o(T,z)},We=T=>{var z=vc();o(T,z)};k(La,T=>{e(Za)&&e(Qa)?T(Ba):T(We,!1)})}a(ia);var $e=r(ia,2),j=r(t($e),2);{var De=T=>{var z=cc();let pe;var Pe=t(z,!0);a(z),b(xa=>{pe=Q(z,1,"stat-value svelte-1uha8ag",null,pe,{positive:e(es).unrealized.fiat>=0,negative:e(es).unrealized.fiat<0}),h(Pe,xa)},[()=>el(e(es).unrealized)]),o(T,z)},Qe=T=>{var z=uc();o(T,z)};k(j,T=>{e(Za)&&e(Qa)?T(De):T(Qe,!1)})}a($e);var Ne=r($e,2),ye=r(t(Ne),2),Re=t(ye);{var Ve=T=>{var z=ct();b(pe=>h(z,pe),[()=>yt(e(Pr).btcFees)]),o(T,z)},ua=T=>{var z=ct("—");o(T,z)};k(Re,T=>{e(Pr).btcFees>0?T(Ve):T(ua,!1)})}a(ye);var Ue=r(ye,2);{var la=T=>{var z=_c();Ie(z,21,()=>Object.entries(e(Pr).fiatFees),Ae,(pe,Pe)=>{var xa=Me(()=>In(e(Pe),2));let qt=()=>e(xa)[0],rs=()=>e(xa)[1];var Jt=dc(),Ds=t(Jt);a(Jt),b(cr=>h(Ds,`${qt()==="EUR"?"€":"$"}${cr??""}`),[()=>rs().toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]),o(pe,Jt)}),a(z),o(T,z)};k(Ue,T=>{Object.keys(e(Pr).fiatFees).length>0&&T(la)})}a(Ne);var na=r(Ne,2),da=r(t(na),2);{var je=T=>{var z=gc();let pe;var Pe=t(z,!0);a(z),b(xa=>{pe=Q(z,1,"stat-value svelte-1uha8ag",null,pe,{positive:e(es).total.fiat>=0,negative:e(es).total.fiat<0}),h(Pe,xa)},[()=>el(e(es).total)]),o(T,z)},lt=T=>{var z=pc();o(T,z)};k(da,T=>{e(Za)&&e(Qa)?T(je):T(lt,!1)})}a(na),a(ta);var et=r(ta,2),pt=t(et),Gt=r(t(pt),2);{var Pt=T=>{var z=fc();o(T,z)},Aa=T=>{xv(T,{get data(){return e(Al)},height:200})};k(Gt,T=>{e(Al).length===0?T(Pt):T(Aa,!1)})}a(pt);var oa=r(pt,2),Ia=r(t(oa),2);{var Vt=T=>{var z=hc();o(T,z)},mt=T=>{Rn(T,{get data(){return e(Dl)},size:160})};k(Ia,T=>{e(Dl).length===0?T(Vt):T(mt,!1)})}a(oa),a(et);var Tt=r(et,2),Et=t(Tt),Yt=r(t(Et),2);{var as=T=>{var z=mc();o(T,z)},jt=T=>{Bv(T,{get data(){return e(Ll)},height:200})};k(Yt,T=>{e(Ll).length===0?T(as):T(jt,!1)})}a(Et);var $t=r(Et,2),ts=r(t($t),2);{var ss=T=>{var z=bc();o(T,z)},Fs=T=>{Rn(T,{get data(){return e(Ml)},size:160})};k(ts,T=>{e(Ml).length===0?T(ss):T(Fs,!1)})}a($t),a(Tt);var Be=r(Tt,2),qe=r(t(Be),2);{var ze=T=>{var z=yc();o(T,z)},Va=T=>{var z=xc();Ie(z,21,()=>e(Ss).slice(0,5),Ae,(pe,Pe)=>{var xa=wc(),qt=t(xa),rs=t(qt),Jt=t(rs,!0);a(rs);var Ds=r(rs,2),cr=t(Ds,!0);a(Ds),a(qt);var ur=r(qt,2);let Cn;var io=t(ur,!0);a(ur),a(xa),b((oo,vo)=>{h(Jt,e(Pe).category||"Uncategorized"),h(cr,oo),Cn=Q(ur,1,"recent-amount svelte-1uha8ag",null,Cn,{positive:e(Pe).amount_sats>=0,negative:e(Pe).amount_sats<0}),h(io,vo)},[()=>Rl(e(Pe).timestamp),()=>yt(e(Pe).amount_sats,!0)]),o(pe,xa)}),a(z),o(T,z)};k(qe,T=>{e(Ss).length===0?T(ze):T(Va,!1)})}a(Be),b((T,z,pe,Pe)=>{h(rt,e(me)||e(ue)?"Period Balance":"Total Balance"),h(Ta,T),h(ba,z),h(Oa,pe),Ea=Q(wa,1,"stat-value svelte-1uha8ag",null,Ea,{positive:e(Br)>=0,negative:e(Br)<0}),h(Fa,Pe)},[()=>yt(e(me)||e(ue)?e(ri):al()),()=>yt(e(Zr)),()=>yt(e(Qr)),()=>yt(e(Br),!0)]),xt(Fe,()=>e(me),T=>l(me,T)),xt(ot,()=>e(ue),T=>l(ue,T)),o(ce,V)};k(Oe,ce=>{e(J)==="dashboard"&&ce(ga)})}var it=r(Oe,2);{var gt=ce=>{var V=zc(),N=_e(V),ee=r(t(N),2);ee.__click=()=>l(cs,!0);var Fe=t(ee);As(Fe,{size:18}),nt(),a(ee),a(N);var fa=r(N,2);{var za=tt=>{var ft=Pa(),wt=_e(ft);{var st=Ze=>{var ma=Cc(),rt=t(ma);bl(rt,{size:48,color:"#333"});var Ke=r(rt,4);Ke.__click=()=>l(cs,!0),a(ma),o(Ze,ma)},ha=Ze=>{var ma=Fc();Ie(ma,21,tl,Ae,(rt,Ke)=>{var Ta=Ec(),ht=t(Ta),Ct=t(ht),Wt=t(Ct);{var Ge=We=>{Nn(We,{size:20,color:"#f7931a"})},ba=We=>{bl(We,{size:20,color:"#f7931a"})};k(Wt,We=>{e(Ke).owner_type==="business"?We(Ge):We(ba,!1)})}a(Ct);var ra=r(Ct,2),Ga=t(ra),Ya=t(Ga,!0);a(Ga);var Sa=r(Ga,2),Oa=t(Sa,!0);a(Sa),a(ra);var ya=r(ra,2),ja=t(ya);{var Wa=We=>{var $e=Tc();$e.__click=()=>Xl(e(Ke));var j=t($e);yl(j,{size:16}),a($e),b(()=>$e.disabled=e(Ws)===e(Ke).id),o(We,$e)};k(ja,We=>{e(Ke).wallet_type!=="manual"&&We(Wa)})}var wa=r(ja,2);wa.__click=()=>ol(e(Ke));var Ea=r(wa,2);Ea.__click=()=>il(e(Ke)),a(ya),a(ht);var Fa=r(ht,2),Ja=t(Fa),vt=t(Ja,!0);a(Ja);var ta=r(Ja,2),ia=t(ta,!0);a(ta),a(Fa);var La=r(Fa,2);{var Ba=We=>{var $e=Sc();o(We,$e)};k(La,We=>{e(Ws)===e(Ke).id&&We(Ba)})}a(Ta),b(We=>{h(Ya,e(Ke).name),h(Oa,e(Ke).owner_name),h(vt,We),h(ia,e(Ke).wallet_type==="manual"?"Manual":e(Ke).wallet_type)},[()=>yt(e(R)[e(Ke).id]??0)]),o(rt,Ta)}),a(ma),o(Ze,ma)};k(wt,Ze=>{tl().length===0?Ze(st):Ze(ha,!1)})}o(tt,ft)},ot=tt=>{var ft=Uc();Ie(ft,20,()=>["personal","family","business"],Ae,(wt,st)=>{const ha=Me(()=>e(oi)[st]);var Ze=Rc(),ma=t(Ze);ma.__click=()=>vi(st);var rt=t(ma),Ke=t(rt,!0);a(rt);var Ta=r(rt,2),ht=t(Ta,!0);a(Ta);var Ct=r(Ta,2),Wt=t(Ct,!0);a(Ct),a(ma);var Ge=r(ma,2);{var ba=ra=>{var Ga=Nc(),Ya=t(Ga);{var Sa=ya=>{var ja=Dc(),Wa=t(ja),wa=t(Wa);a(Wa),a(ja),b(()=>h(wa,`No ${st??""} accounts`)),o(ya,ja)},Oa=ya=>{var ja=Pa(),Wa=_e(ja);Ie(Wa,17,()=>e(ha).entities,Ae,(wa,Ea)=>{let Fa=()=>e(Ea).entity,Ja=()=>e(Ea).wallets,vt=()=>e(Ea).totalBalance;var ta=$c(),ia=t(ta);ia.__click=()=>ci(Fa().id);var La=t(ia),Ba=t(La,!0);a(La);var We=r(La,2),$e=t(We,!0);a(We);var j=r(We,2),De=t(j,!0);a(j),a(ia);var Qe=r(ia,2);{var Ne=ye=>{var Re=Pc(),Ve=t(Re);{var ua=la=>{var na=Ac(),da=r(t(na),2);da.__click=()=>ui(Fa().id);var je=t(da);As(je,{size:14}),nt(),a(da),a(na),o(la,na)},Ue=la=>{var na=Bc();Ie(na,21,Ja,Ae,(da,je)=>{var lt=Lc(),et=t(lt),pt=t(et),Gt=t(pt);{var Pt=ze=>{Nn(ze,{size:20,color:"#f7931a"})},Aa=ze=>{bl(ze,{size:20,color:"#f7931a"})};k(Gt,ze=>{e(je).owner_type==="business"?ze(Pt):ze(Aa,!1)})}a(pt);var oa=r(pt,2),Ia=t(oa),Vt=t(Ia,!0);a(Ia),a(oa);var mt=r(oa,2),Tt=t(mt);{var Et=ze=>{var Va=Ic();Va.__click=()=>Xl(e(je));var T=t(Va);yl(T,{size:16}),a(Va),b(()=>Va.disabled=e(Ws)===e(je).id),o(ze,Va)};k(Tt,ze=>{e(je).wallet_type!=="manual"&&ze(Et)})}var Yt=r(Tt,2);Yt.__click=()=>ol(e(je));var as=r(Yt,2);as.__click=()=>il(e(je)),a(mt),a(et);var jt=r(et,2),$t=t(jt),ts=t($t,!0);a($t);var ss=r($t,2),Fs=t(ss,!0);a(ss),a(jt);var Be=r(jt,2);{var qe=ze=>{var Va=Mc();o(ze,Va)};k(Be,ze=>{e(Ws)===e(je).id&&ze(qe)})}a(lt),b(ze=>{h(Vt,e(je).name),h(ts,ze),h(Fs,e(je).wallet_type==="manual"?"Manual":e(je).wallet_type)},[()=>yt(e(R)[e(je).id]??0)]),o(da,lt)}),a(na),o(la,na)};k(Ve,la=>{Ja().length===0?la(ua):la(Ue,!1)})}a(Re),o(ye,Re)};k(Qe,ye=>{Nl(Fa().id)||ye(Ne)})}a(ta),b((ye,Re)=>{h(Ba,ye),h($e,Fa().name),h(De,Re)},[()=>Nl(Fa().id)?"▶":"▼",()=>yt(vt())]),o(wa,ta)}),o(ya,ja)};k(Ya,ya=>{e(ha).entities.length===0?ya(Sa):ya(Oa,!1)})}a(Ga),o(ra,Ga)};k(Ge,ra=>{$l(st)||ra(ba)})}a(Ze),b((ra,Ga,Ya)=>{h(Ke,ra),h(ht,Ga),h(Wt,Ya)},[()=>$l(st)?"▶":"▼",()=>di(st),()=>yt(e(ha).totalBalance)]),o(wt,Ze)}),a(ft),o(tt,ft)};k(fa,tt=>{e(he)!==null?tt(za):tt(ot,!1)})}o(ce,V)};k(it,ce=>{e(J)==="wallets"&&ce(gt)})}var pa=r(it,2);{var Da=ce=>{var V=ru(),N=_e(V),ee=r(t(N),2),Fe=t(ee),fa=t(Fe);a(Fe);var za=r(Fe,2),ot=t(za),tt=t(ot);tt.value=(tt.__value=null)??"";var ft=r(tt);Ie(ft,17,()=>e(Fl),Ae,(Ge,ba)=>{var ra=Oc(),Ga=t(ra,!0);a(ra);var Ya={};b(()=>{h(Ga,e(ba)),Ya!==(Ya=e(ba))&&(ra.value=(ra.__value=e(ba))??"")}),o(Ge,ra)}),a(ot);var wt=r(ot,2),st=t(wt);st.value=(st.__value=null)??"";var ha=r(st);Ie(ha,17,()=>$,Ae,(Ge,ba)=>{var ra=Wc(),Ga=t(ra,!0);a(ra);var Ya={};b(()=>{h(Ga,e(ba).label),Ya!==(Ya=e(ba).value)&&(ra.value=(ra.__value=e(ba).value)??"")}),o(Ge,ra)}),a(wt);var Ze=r(wt,2);{var ma=Ge=>{var ba=Vc();ba.__click=Ul,o(Ge,ba)};k(Ze,Ge=>{(e(me)!==null||e(ue)!==null)&&Ge(ma)})}a(za);var rt=r(za,2);rt.__click=Fi;var Ke=r(rt,2);Ke.__click=()=>{var Ge;l(us,((Ge=e(x)[0])==null?void 0:Ge.id)||0,!0),l(Js,!0)};var Ta=t(Ke);As(Ta,{size:18}),nt(),a(Ke),a(ee),a(N);var ht=r(N,2);{var Ct=Ge=>{var ba=qc();o(Ge,ba)},Wt=Ge=>{var ba=Pa(),ra=_e(ba);{var Ga=Sa=>{var Oa=Hc(),ya=t(Oa);$n(ya,{size:48,color:"#333"}),nt(4),a(Oa),o(Sa,Oa)},Ya=Sa=>{var Oa=su(),ya=t(Oa);let ja;var Wa=t(ya);Wa.__click=()=>$r("timestamp");var wa=t(Wa);a(Wa);var Ea=r(Wa,2);Ea.__click=()=>$r("amount_sats");var Fa=t(Ea);a(Ea);var Ja=r(Ea,2);{var vt=$e=>{var j=Gc();o($e,j)};k(Ja,$e=>{e(Za)&&$e(vt)})}var ta=r(Ja,4);ta.__click=()=>$r("wallet_name");var ia=t(ta);a(ta);var La=r(ta,2);La.__click=()=>$r("category");var Ba=t(La);a(La),nt(6),a(ya);var We=r(ya,2);Ie(We,21,()=>e(Qn),Ae,($e,j)=>{var De=tu();let Qe;var Ne=t(De),ye=t(Ne),Re=t(ye,!0);a(ye);var Ve=r(ye,2);{var ua=Be=>{var qe=Yc(),ze=t(qe,!0);a(qe),b(Va=>h(ze,Va),[()=>gi(e(j).timestamp)]),o(Be,qe)};k(Ve,Be=>{e(j).timestamp&&Be(ua)})}a(Ne);var Ue=r(Ne,2);let la;var na=t(Ue,!0);a(Ue);var da=r(Ue,2);{var je=Be=>{var qe=jc();let ze;var Va=t(qe);{var T=pe=>{var Pe=ct();b(xa=>h(Pe,xa),[()=>e(j).fiat_value!==null?mi(e(j).fiat_value):"—"]),o(pe,Pe)},z=pe=>{var Pe=ct("—");o(pe,Pe)};k(Va,pe=>{(e(j).currency||"BTC")==="BTC"?pe(T):pe(z,!1)})}a(qe),b(()=>ze=Q(qe,1,"tx-cell tx-fiat svelte-1uha8ag",null,ze,{positive:e(j).amount_sats>=0,negative:e(j).amount_sats<0})),o(Be,qe)};k(da,Be=>{e(Za)&&Be(je)})}var lt=r(da,2),et=t(lt);{var pt=Be=>{var qe=Xc(),ze=_e(qe);{var Va=pe=>{var Pe=Jc(),xa=t(Pe);a(Pe),b(qt=>h(xa,`${qt??""} sats`),[()=>e(j).fee_sats.toLocaleString()]),o(pe,Pe)};k(ze,pe=>{e(j).fee_sats>0&&pe(Va)})}var T=r(ze,2);{var z=pe=>{var Pe=Kc(),xa=t(Pe);a(Pe),b(qt=>h(xa,`${e(j).fee_fiat_currency==="EUR"?"€":"$"}${qt??""}`),[()=>e(j).fee_fiat.toFixed(2)]),o(pe,Pe)};k(T,pe=>{e(j).fee_fiat&&e(j).fee_fiat>0&&pe(z)})}o(Be,qe)},Gt=Be=>{var qe=ct("—");o(Be,qe)};k(et,Be=>{e(j).fee_sats>0||e(j).fee_fiat&&e(j).fee_fiat>0?Be(pt):Be(Gt,!1)})}a(lt);var Pt=r(lt,2),Aa=t(Pt,!0);a(Pt);var oa=r(Pt,2),Ia=t(oa);Ia.__change=Be=>$i(e(j),Be.currentTarget.value),Ie(Ia,21,()=>e(Lr),Ae,(Be,qe)=>{var ze=Zc(),Va=t(ze,!0);a(ze);var T={};b(()=>{h(Va,e(qe)),T!==(T=e(qe))&&(ze.value=(ze.__value=e(qe))??"")}),o(Be,ze)}),a(Ia);var Vt;kl(Ia),a(oa);var mt=r(oa,2),Tt=t(mt);Xe(Tt),a(mt);var Et=r(mt,2),Yt=t(Et);{var as=Be=>{var qe=Qc(),ze=t(qe,!0);a(qe),b((Va,T)=>{fe(qe,"href",Va),fe(qe,"title",e(j).txid),h(ze,T)},[()=>Pl(e(j)),()=>Bl(e(j).txid)]),o(Be,qe)},jt=Be=>{var qe=eu(),ze=t(qe,!0);a(qe),b(Va=>{fe(qe,"title",e(j).txid),h(ze,Va)},[()=>Bl(e(j).txid)]),o(Be,qe)};k(Yt,Be=>{Pl(e(j))?Be(as):Be(jt,!1)})}a(Et);var $t=r(Et,2),ts=t($t);ts.__click=()=>fi(e(j));var ss=r(ts,2);{var Fs=Be=>{var qe=au(),ze=_e(qe);ze.__click=()=>Ri(e(j));var Va=r(ze,2);Va.__click=()=>zi(e(j)),o(Be,qe)};k(ss,Be=>{sl(e(j))&&Be(Fs)})}a($t),a(De),b((Be,qe)=>{Qe=Q(De,1,"tx-row svelte-1uha8ag",null,Qe,{"has-fiat":e(Za)}),h(Re,Be),la=Q(Ue,1,"tx-cell tx-amount svelte-1uha8ag",null,la,{positive:e(j).amount_sats>=0,negative:e(j).amount_sats<0}),h(na,qe),h(Aa,e(j).wallet_name),Vt!==(Vt=e(j).category||"Uncategorized")&&(Ia.value=(Ia.__value=e(j).category||"Uncategorized")??"",Wr(Ia,e(j).category||"Uncategorized")),Ko(Tt,e(j).note||"")},[()=>Rl(e(j).timestamp),()=>_i(e(j),!0)]),Yn("blur",Tt,Be=>Ni(e(j),Be.currentTarget.value)),o($e,De)}),a(We),a(Oa),b(($e,j,De,Qe)=>{ja=Q(ya,1,"tx-header svelte-1uha8ag",null,ja,{"has-fiat":e(Za)}),h(wa,`Date${$e??""}`),h(Fa,`Amount${j??""}`),h(ia,`Wallet${De??""}`),h(Ba,`Category${Qe??""}`)},[()=>Nr("timestamp"),()=>Nr("amount_sats"),()=>Nr("wallet_name"),()=>Nr("category")]),o(Sa,Oa)};k(ra,Sa=>{e(D).length===0?Sa(Ga):Sa(Ya,!1)},!0)}o(Ge,ba)};k(ht,Ge=>{e(jr)?Ge(Ct):Ge(Wt,!1)})}b(()=>h(fa,`${e(Ss).length??""} transactions`)),xt(ot,()=>e(me),Ge=>l(me,Ge)),xt(wt,()=>e(ue),Ge=>l(ue,Ge)),o(ce,V)};k(pa,ce=>{e(J)==="transactions"&&ce(Da)})}var Ua=r(pa,2);{var Se=ce=>{var V=Iu(),N=t(V),ee=t(N);let Fe;ee.__click=()=>l(Xa,"display");var fa=r(ee,2);let za;fa.__click=()=>l(Xa,"pnl");var ot=r(fa,2);let tt;ot.__click=()=>l(Xa,"categories");var ft=r(ot,2);let wt;ft.__click=()=>l(Xa,"accounts");var st=r(ft,2);let ha;st.__click=()=>l(Xa,"wallets");var Ze=r(st,2);let ma;Ze.__click=()=>l(Xa,"security");var rt=r(Ze,2);let Ke;rt.__click=()=>l(Xa,"data"),a(N);var Ta=r(N,2),ht=t(Ta);{var Ct=Ge=>{var ba=nu(),ra=r(t(ba),2),Ga=r(t(ra),2),Ya=t(Ga),Sa=t(Ya);let Oa;Sa.__click=()=>an("dark");var ya=r(Sa,2);let ja;ya.__click=()=>an("light"),a(Ya),a(Ga),a(ra);var Wa=r(ra,2),wa=r(t(Wa),2),Ea=t(wa),Fa=t(Ea);let Ja;Fa.__click=()=>ql("sats");var vt=r(Fa,2);let ta;vt.__click=()=>ql("btc"),a(Ea),a(wa),a(Wa);var ia=r(Wa,2),La=r(t(ia),2),Ba=t(La);let We;Ba.__click=()=>Ci(!e(Za)),a(La),a(ia);var $e=r(ia,2);{var j=De=>{var Qe=lu(),Ne=r(t(Qe),2),ye=t(Ne),Re=t(ye);let Ve;Re.__click=()=>Yl("EUR");var ua=r(Re,2);let Ue;ua.__click=()=>Yl("USD"),a(ye),a(Ne),a(Qe),b(()=>{Ve=Q(Re,1,"toggle-option svelte-1uha8ag",null,Ve,{active:e(Le)==="EUR"}),Ue=Q(ua,1,"toggle-option svelte-1uha8ag",null,Ue,{active:e(Le)==="USD"})}),o(De,Qe)};k($e,De=>{e(Za)&&De(j)})}a(ba),b(()=>{Oa=Q(Sa,1,"toggle-option svelte-1uha8ag",null,Oa,{active:e(rr)==="dark"}),ja=Q(ya,1,"toggle-option svelte-1uha8ag",null,ja,{active:e(rr)==="light"}),Ja=Q(Fa,1,"toggle-option svelte-1uha8ag",null,Ja,{active:e(sr)==="sats"}),ta=Q(vt,1,"toggle-option svelte-1uha8ag",null,ta,{active:e(sr)==="btc"}),We=Q(Ba,1,"toggle-btn svelte-1uha8ag",null,We,{active:e(Za)})}),o(Ge,ba)},Wt=Ge=>{var ba=Pa(),ra=_e(ba);{var Ga=Sa=>{var Oa=cu(),ya=r(t(Oa),2),ja=r(t(ya),2),Wa=t(ja),wa=t(Wa);let Ea;wa.__click=()=>Gl("average");var Fa=r(wa,2);let Ja;Fa.__click=()=>Gl("fifo"),a(Wa),a(ja),a(ya);var vt=r(ya,2),ta=r(t(vt),2),ia=t(ta);{var La=De=>{var Qe=ou(),Ne=t(Qe),ye=r(Ne);{var Re=Ve=>{var ua=iu(),Ue=t(ua);a(ua),b(la=>h(Ue,`(${la??""})`),[()=>e(lr).toLocaleTimeString()]),o(Ve,ua)};k(ye,Ve=>{e(lr)&&Ve(Re)})}a(Qe),b(Ve=>h(Ne,`Current: ${e(Le)==="EUR"?"€":"$"}${Ve??""} `),[()=>e(Qa).toLocaleString()]),o(De,Qe)};k(ia,De=>{e(Qa)&&De(La)})}var Ba=r(ia,2);Ba.__click=ll;var We=t(Ba);{var $e=De=>{var Qe=vu();nt(),o(De,Qe)},j=De=>{var Qe=ct("Fetch Missing Fiat Values");o(De,Qe)};k(We,De=>{e(Ir)?De($e):De(j,!1)})}a(Ba),a(ta),a(vt),a(Oa),b(()=>{Ea=Q(wa,1,"toggle-option svelte-1uha8ag",null,Ea,{active:e(nr)==="average"}),Ja=Q(Fa,1,"toggle-option svelte-1uha8ag",null,Ja,{active:e(nr)==="fifo"}),Ba.disabled=e(Ir)||!e(Za)}),o(Sa,Oa)},Ya=Sa=>{var Oa=Pa(),ya=_e(Oa);{var ja=wa=>{var Ea=hu(),Fa=r(t(Ea),4),Ja=r(t(Fa),2);Ie(Ja,21,()=>e(H).filter(Ne=>Ne.entity_type==="personal"),Ae,(Ne,ye)=>{var Re=uu(),Ve=t(Re),ua=t(Ve,!0);a(Ve),nt(2),a(Re),b(()=>h(ua,e(ye).name)),o(Ne,Re)}),a(Ja),a(Fa);var vt=r(Fa,2),ta=t(vt),ia=r(t(ta),2);ia.__click=()=>{l(Ps,"family"),l(Bs,!0)};var La=t(ia);As(La,{size:14}),nt(),a(ia),a(ta);var Ba=r(ta,2);Ie(Ba,21,()=>e(H).filter(Ne=>Ne.entity_type==="family"),Ae,(Ne,ye)=>{var Re=du(),Ve=t(Re),ua=t(Ve,!0);a(Ve);var Ue=r(Ve,2);Ue.__click=()=>Kl(e(ye)),a(Re),b(()=>h(ua,e(ye).name)),o(Ne,Re)},Ne=>{var ye=_u();o(Ne,ye)}),a(Ba),a(vt);var We=r(vt,2),$e=t(We),j=r(t($e),2);j.__click=()=>{l(Ps,"business"),l(Bs,!0)};var De=t(j);As(De,{size:14}),nt(),a(j),a($e);var Qe=r($e,2);Ie(Qe,21,()=>e(H).filter(Ne=>Ne.entity_type==="business"),Ae,(Ne,ye)=>{var Re=pu(),Ve=t(Re),ua=t(Ve,!0);a(Ve);var Ue=r(Ve,2);{var la=da=>{var je=gu(),lt=t(je,!0);a(je),b(et=>h(lt,et),[()=>{var et;return(et=e(H).find(pt=>pt.id===e(ye).parent_id))==null?void 0:et.name}]),o(da,je)};k(Ue,da=>{e(ye).parent_id&&da(la)})}var na=r(Ue,2);na.__click=()=>Kl(e(ye)),a(Re),b(()=>h(ua,e(ye).name)),o(Ne,Re)},Ne=>{var ye=fu();o(Ne,ye)}),a(Qe),a(We),a(Ea),o(wa,Ea)},Wa=wa=>{var Ea=Pa(),Fa=_e(Ea);{var Ja=ta=>{var ia=yu(),La=t(ia),Ba=r(t(La),2);Ba.__click=()=>l(cs,!0);var We=t(Ba);As(We,{size:16}),nt(),a(Ba),a(La);var $e=r(La,2);Ie($e,21,()=>e(x),Ae,(j,De)=>{var Qe=mu(),Ne=t(Qe),ye=t(Ne),Re=t(ye,!0);a(ye);var Ve=r(ye,2),ua=t(Ve);a(Ve),a(Ne);var Ue=r(Ne,2),la=t(Ue,!0);a(Ue);var na=r(Ue,2),da=t(na);da.__click=()=>ol(e(De));var je=r(da,2);je.__click=()=>il(e(De)),a(na),a(Qe),b(lt=>{h(Re,e(De).name),h(ua,`${e(De).owner_name??""} · ${(e(De).wallet_type==="manual"?"Manual":e(De).wallet_type)??""}`),h(la,lt)},[()=>yt(e(R)[e(De).id]??0)]),o(j,Qe)},j=>{var De=bu();o(j,De)}),a($e),a(ia),o(ta,ia)},vt=ta=>{var ia=Pa(),La=_e(ia);{var Ba=$e=>{var j=Cu(),De=t(j),Qe=r(t(De),2);Qe.__click=()=>l(d,!0);var Ne=t(Qe);As(Ne,{size:16}),nt(),a(Qe),a(De);var ye=r(De,2),Re=r(t(ye),2);Ie(Re,21,()=>e(c).filter(Ue=>Ue.is_system),Ae,(Ue,la)=>{var na=wu(),da=t(na),je=t(da,!0);a(da),nt(2),a(na),b(()=>h(je,e(la).name)),o(Ue,na)}),a(Re),a(ye);var Ve=r(ye,2),ua=r(t(Ve),2);Ie(ua,21,()=>e(c).filter(Ue=>!Ue.is_system),Ae,(Ue,la)=>{var na=xu(),da=t(na),je=t(da,!0);a(da);var lt=r(da,2),et=t(lt);et.__click=()=>wi(e(la));var pt=r(et,2);pt.__click=()=>xi(e(la)),a(lt),a(na),b(()=>h(je,e(la).name)),o(Ue,na)},Ue=>{var la=ku();o(Ue,la)}),a(ua),a(Ve),a(j),o($e,j)},We=$e=>{var j=Pa(),De=_e(j);{var Qe=ye=>{var Re=Fu(),Ve=r(t(Re),4),ua=t(Ve),Ue=r(t(ua),2),la=t(Ue);{var na=Aa=>{var oa=ct("Your database is encrypted with AES-256. Only you can access your data.");o(Aa,oa)},da=Aa=>{var oa=ct("Your database is not encrypted. Enable encryption to protect your data.");o(Aa,oa)};k(la,Aa=>{e(A)?Aa(na):Aa(da,!1)})}a(Ue),a(ua);var je=r(ua,2),lt=t(je);{var et=Aa=>{var oa=Tu(),Ia=r(_e(oa),2);Ia.__click=()=>l(Hs,!0);var Vt=r(Ia,2);Vt.__click=()=>l(Gs,!0),o(Aa,oa)},pt=Aa=>{var oa=Su(),Ia=r(_e(oa),2);Ia.__click=Hi,o(Aa,oa)};k(lt,Aa=>{e(A)?Aa(et):Aa(pt,!1)})}a(je),a(Ve);var Gt=r(Ve,2);{var Pt=Aa=>{var oa=Eu(),Ia=_e(oa),Vt=r(t(Ia),2),mt=t(Vt);mt.__change=Be=>Qi(Be.currentTarget.value);var Tt=t(mt);Tt.value=Tt.__value="never";var Et=r(Tt);Et.value=Et.__value="5";var Yt=r(Et);Yt.value=Yt.__value="15";var as=r(Yt);as.value=as.__value="30";var jt=r(as);jt.value=jt.__value="60",a(mt);var $t;kl(mt),a(Vt),a(Ia);var ts=r(Ia,2),ss=r(t(ts),2),Fs=t(ss);Fs.__click=()=>l(xe,!0),a(ss),a(ts),b(()=>{$t!==($t=e(ms))&&(mt.value=(mt.__value=e(ms))??"",Wr(mt,e(ms)))}),o(Aa,oa)};k(Gt,Aa=>{e(A)&&Aa(Pt)})}a(Re),o(ye,Re)},Ne=ye=>{var Re=Pa(),Ve=_e(Re);{var ua=Ue=>{var la=Au(),na=r(t(la),2),da=r(t(na),2),je=t(da);je.__click=Wi;var lt=t(je);{var et=oa=>{var Ia=Du();nt(),o(oa,Ia)},pt=oa=>{var Ia=ct("Export to CSV");o(oa,Ia)};k(lt,oa=>{e(Fr)?oa(et):oa(pt,!1)})}a(je),a(da),a(na);var Gt=r(na,2),Pt=r(t(Gt),2),Aa=t(Pt);Aa.__click=()=>l(Dr,!0),a(Pt),a(Gt),a(la),b(()=>je.disabled=e(Fr)),o(Ue,la)};k(Ve,Ue=>{e(Xa)==="data"&&Ue(ua)},!0)}o(ye,Re)};k(De,ye=>{e(Xa)==="security"?ye(Qe):ye(Ne,!1)},!0)}o($e,j)};k(La,$e=>{e(Xa)==="categories"?$e(Ba):$e(We,!1)},!0)}o(ta,ia)};k(Fa,ta=>{e(Xa)==="wallets"?ta(Ja):ta(vt,!1)},!0)}o(wa,Ea)};k(ya,wa=>{e(Xa)==="accounts"?wa(ja):wa(Wa,!1)},!0)}o(Sa,Oa)};k(ra,Sa=>{e(Xa)==="pnl"?Sa(Ga):Sa(Ya,!1)},!0)}o(Ge,ba)};k(ht,Ge=>{e(Xa)==="display"?Ge(Ct):Ge(Wt,!1)})}a(Ta),a(V),b(()=>{Fe=Q(ee,1,"settings-nav-item svelte-1uha8ag",null,Fe,{active:e(Xa)==="display"}),za=Q(fa,1,"settings-nav-item svelte-1uha8ag",null,za,{active:e(Xa)==="pnl"}),tt=Q(ot,1,"settings-nav-item svelte-1uha8ag",null,tt,{active:e(Xa)==="categories"}),wt=Q(ft,1,"settings-nav-item svelte-1uha8ag",null,wt,{active:e(Xa)==="accounts"}),ha=Q(st,1,"settings-nav-item svelte-1uha8ag",null,ha,{active:e(Xa)==="wallets"}),ma=Q(Ze,1,"settings-nav-item svelte-1uha8ag",null,ma,{active:e(Xa)==="security"}),Ke=Q(rt,1,"settings-nav-item svelte-1uha8ag",null,Ke,{active:e(Xa)==="data"})}),o(ce,V)};k(Ua,ce=>{e(J)==="settings"&&ce(Se)})}a(Ye),b(ce=>{h(O,ce),X=Q(q,1,"icon-btn refresh-price svelte-1uha8ag",null,X,{spinning:e(Ar)}),q.disabled=e(Ar),Ra=Q(Je,1,"tab svelte-1uha8ag",null,Ra,{active:e(J)==="dashboard"}),Ca=Q(Ma,1,"tab svelte-1uha8ag",null,Ca,{active:e(J)==="wallets"}),Ha=Q(qa,1,"tab svelte-1uha8ag",null,Ha,{active:e(J)==="transactions"}),_t=Q(dt,1,"tab svelte-1uha8ag",null,_t,{active:e(J)==="settings"})},[()=>yt(al())]),o(P,M)};k(_,P=>{e(xe)?P(C):P(E,!1)},!0)}o(s,v)};k(so,s=>{e(Y)?s(ro):s(lo,!1)})}a(cl);var nn=r(cl,2);Ft(nn,{title:"Add Wallet",get open(){return e(cs)},onclose:()=>l(cs,!1),children:(s,v)=>{var _=Nu(),C=_e(_),E=r(t(C),2);Xe(E),a(C);var P=r(C,2),M=r(t(P),2),W=t(M);let L;W.__click=()=>l(ae,!1);var ne=r(W,2);let K;ne.__click=()=>l(ae,!0),a(M),a(P);var ie=r(P,2);{var G=O=>{var Z=Bu(),re=_e(Z),ve=r(t(re),2);Xe(ve),a(re);var be=r(re,2),q=t(be),X=r(t(q),2),Te=t(X);Te.value=Te.__value="zpub";var He=r(Te);He.value=He.__value="ypub";var Je=r(He);Je.value=Je.__value="xpub",a(X),a(q);var Ra=r(q,2),Ma=r(t(Ra),2);Ie(Ma,21,()=>e(H),Ae,(Ca,qa)=>{var Ha=Lu(),dt=t(Ha,!0);a(Ha);var _t={};b(()=>{h(dt,e(qa).name),_t!==(_t=e(qa).id)&&(Ha.value=(Ha.__value=e(qa).id)??"")}),o(Ca,Ha)}),a(Ma),a(Ra),a(be),ea(ve,()=>e(tr),Ca=>l(tr,Ca)),xt(X,()=>e(Yr),Ca=>l(Yr,Ca)),xt(Ma,()=>e(Os),Ca=>l(Os,Ca)),o(O,Z)},ge=O=>{var Z=$u(),re=r(_e(Z),2),ve=r(t(re),2);Ie(ve,21,()=>e(H),Ae,(be,q)=>{var X=Pu(),Te=t(X,!0);a(X);var He={};b(()=>{h(Te,e(q).name),He!==(He=e(q).id)&&(X.value=(X.__value=e(q).id)??"")}),o(be,X)}),a(ve),a(re),xt(ve,()=>e(Os),be=>l(Os,be)),o(O,Z)};k(ie,O=>{e(ae)?O(ge,!1):O(G)})}var de=r(ie,2),Ee=t(de);Ee.__click=()=>l(cs,!1);var I=r(Ee,2);I.__click=Li,a(de),b(()=>{L=Q(W,1,"type-btn svelte-1uha8ag",null,L,{active:!e(ae)}),K=Q(ne,1,"type-btn svelte-1uha8ag",null,K,{active:e(ae)})}),ea(E,()=>e(ar),O=>l(ar,O)),o(s,_)},$$slots:{default:!0}});var on=r(nn,2);{let s=Me(()=>e(Ps)==="family"?"Add Family Member":"Add Business");Ft(on,{get title(){return e(s)},get open(){return e(Bs)},onclose:()=>l(Bs,!1),children:(v,_)=>{var C=zu(),E=_e(C),P=r(t(E),2);Xe(P),a(E);var M=r(E,2);{var W=ie=>{var G=Uu(),ge=r(t(G),2),de=t(ge);de.value=(de.__value=null)??"";var Ee=r(de);Ie(Ee,17,pi,Ae,(I,O)=>{var Z=Ru(),re=t(Z,!0);a(Z);var ve={};b(()=>{h(re,e(O).name),ve!==(ve=e(O).id)&&(Z.value=(Z.__value=e(O).id)??"")}),o(I,Z)}),a(ge),a(G),xt(ge,()=>e(Er),I=>l(Er,I)),o(ie,G)};k(M,ie=>{e(Ps)==="business"&&ie(W)})}var L=r(M,2),ne=t(L);ne.__click=()=>l(Bs,!1);var K=r(ne,2);K.__click=Ii,a(L),b(()=>fe(P,"placeholder",e(Ps)==="family"?"e.g. Partner":"e.g. My Company")),ea(P,()=>e(Ts),ie=>l(Ts,ie)),o(v,C)},$$slots:{default:!0}})}var vn=r(on,2);{let s=Me(()=>{var v;return((v=e($s))==null?void 0:v.name)??""});uv(vn,{get open(){return e(yr)},get name(){return e(s)},onconfirm:Bi,onclose:()=>{l(yr,!1),l($s,null)}})}var cn=r(vn,2);{let s=Me(()=>{var v;return`Delete "${(v=e(bs))==null?void 0:v.name}"? Associated wallets will also be deleted.`});Or(cn,{get open(){return e(wr)},title:"Delete",get message(){return e(s)},confirmText:"Delete",danger:!0,onconfirm:Mi,onclose:()=>{l(wr,!1),l(bs,null)}})}var un=r(cn,2);Ft(un,{title:"Edit Wallet",get open(){return e(Ys)},onclose:()=>{l(Ys,!1),l(Ns,null)},children:(s,v)=>{var _=Wu(),C=_e(_),E=r(t(C),2);Xe(E),a(C);var P=r(C,2),M=r(t(P),2);Ie(M,21,()=>e(H),Ae,(K,ie)=>{var G=Ou(),ge=t(G,!0);a(G);var de={};b(()=>{h(ge,e(ie).name),de!==(de=e(ie).id)&&(G.value=(G.__value=e(ie).id)??"")}),o(K,G)}),a(M),a(P);var W=r(P,2),L=t(W);L.__click=()=>{l(Ys,!1),l(Ns,null)};var ne=r(L,2);ne.__click=Pi,a(W),ea(E,()=>e(js),K=>l(js,K)),xt(M,()=>e(xr),K=>l(xr,K)),o(s,_)},$$slots:{default:!0}});var dn=r(un,2);Ft(dn,{title:"Add Transaction",get open(){return e(Js)},onclose:()=>l(Js,!1),children:(s,v)=>{var _=Yu(),C=_e(_),E=t(C);let P;E.__click=()=>l(Lt,"incoming");var M=r(E,2);let W;M.__click=()=>l(Lt,"outgoing"),a(C);var L=r(C,2),ne=r(t(L),2),K=t(ne);let ie;K.__click=()=>l(_a,"BTC");var G=r(K,2);let ge;G.__click=()=>l(_a,"EUR");var de=r(G,2);let Ee;de.__click=()=>l(_a,"USD"),a(ne),a(L);var I=r(L,2),O=t(I),Z=r(t(O));{var re=N=>{var ee=ct("(sats or BTC)");o(N,ee)},ve=N=>{var ee=ct();b(()=>h(ee,`(${e(_a)??""})`)),o(N,ee)};k(Z,N=>{e(_a)==="BTC"?N(re):N(ve,!1)})}a(O);var be=r(O,2);Xe(be);var q=r(be,2);{var X=N=>{var ee=Vu();o(N,ee)};k(q,N=>{e(_a)==="BTC"&&N(X)})}a(I);var Te=r(I,2),He=t(Te),Je=r(t(He),2);Ie(Je,21,()=>e(x),Ae,(N,ee)=>{var Fe=qu(),fa=t(Fe,!0);a(Fe);var za={};b(()=>{h(fa,e(ee).name),za!==(za=e(ee).id)&&(Fe.value=(Fe.__value=e(ee).id)??"")}),o(N,Fe)}),a(Je),a(He);var Ra=r(He,2),Ma=r(t(Ra),2);Xe(Ma),a(Ra),a(Te);var Ca=r(Te,2),qa=t(Ca),Ha=r(t(qa),2);Ie(Ha,21,()=>e(Lr),Ae,(N,ee)=>{var Fe=Hu(),fa=t(Fe,!0);a(Fe);var za={};b(()=>{h(fa,e(ee)),za!==(za=e(ee))&&(Fe.value=(Fe.__value=e(ee))??"")}),o(N,Fe)}),a(Ha),a(qa);var dt=r(qa,2);{var _t=N=>{var ee=Gu(),Fe=t(ee),fa=t(Fe);a(Fe);var za=r(Fe,2);Xe(za),a(ee),b(()=>h(fa,`Fiat Value (${e(Le)??""}, optional)`)),ea(za,()=>e(Xt),ot=>l(Xt,ot)),o(N,ee)};k(dt,N=>{e(_a)==="BTC"&&N(_t)})}a(Ca);var ca=r(Ca,2),sa=t(ca),Ye=r(t(sa),2);Xe(Ye),a(sa);var Oe=r(sa,2),ga=t(Oe),it=t(ga);a(ga);var gt=r(ga,2);Xe(gt),a(Oe),a(ca);var pa=r(ca,2),Da=r(t(pa),2);Xe(Da),a(pa);var Ua=r(pa,2),Se=t(Ua);Se.__click=()=>l(Js,!1);var ce=r(Se,2);ce.__click=Zl;var V=t(ce);a(ce),a(Ua),b(()=>{P=Q(E,1,"type-btn svelte-1uha8ag",null,P,{active:e(Lt)==="incoming"}),W=Q(M,1,"type-btn svelte-1uha8ag",null,W,{active:e(Lt)==="outgoing"}),ie=Q(K,1,"type-btn small svelte-1uha8ag",null,ie,{active:e(_a)==="BTC"}),ge=Q(G,1,"type-btn small svelte-1uha8ag",null,ge,{active:e(_a)==="EUR"}),Ee=Q(de,1,"type-btn small svelte-1uha8ag",null,Ee,{active:e(_a)==="USD"}),fe(be,"placeholder",e(_a)==="BTC"?"e.g. 100000 or 0.001":"e.g. 100.00"),h(it,`Fee (${e(Le)??""}, optional)`),h(V,`Add ${e(Lt)==="incoming"?"Incoming":"Outgoing"} Transaction`)}),ea(be,()=>e(Ot),N=>l(Ot,N)),xt(Je,()=>e(us),N=>l(us,N)),ea(Ma,()=>e(_s),N=>l(_s,N)),xt(Ha,()=>e(Kt),N=>l(Kt,N)),ea(Ye,()=>e(Zt),N=>l(Zt,N)),ea(gt,()=>e(Qt),N=>l(Qt,N)),ea(Da,()=>e(ds),N=>l(ds,N)),o(s,_)},$$slots:{default:!0}});var _n=r(dn,2);Ft(_n,{title:"Add Category",get open(){return e(d)},onclose:()=>{l(d,!1),l(g,"")},children:(s,v)=>{var _=ju(),C=_e(_),E=r(t(C),2);Xe(E),E.__keydown=L=>L.key==="Enter"&&Wl(),a(C);var P=r(C,2),M=t(P);M.__click=()=>{l(d,!1),l(g,"")};var W=r(M,2);W.__click=Wl,a(P),ea(E,()=>e(g),L=>l(g,L)),o(s,_)},$$slots:{default:!0}});var gn=r(_n,2);Ft(gn,{title:"Edit Category",get open(){return e(p)},onclose:()=>{l(p,!1),l(f,null)},children:(s,v)=>{var _=Ju(),C=_e(_),E=r(t(C),2);Xe(E),E.__keydown=L=>L.key==="Enter"&&Vl(),a(C);var P=r(C,2),M=t(P);M.__click=()=>{l(p,!1),l(f,null)};var W=r(M,2);W.__click=Vl,a(P),ea(E,()=>e(w),L=>l(w,L)),o(s,_)},$$slots:{default:!0}});var pn=r(gn,2);{let s=Me(()=>{var v;return`Delete "${(v=e(B))==null?void 0:v.name}"? All transactions with this category will be set to "Uncategorized".`});Or(pn,{get open(){return e(m)},title:"Delete Category",get message(){return e(s)},confirmText:"Delete",danger:!0,onconfirm:ki,onclose:()=>{l(m,!1),l(B,null)}})}var fn=r(pn,2);Ft(fn,{title:"Edit Transaction",get open(){return e(Ks)},onclose:()=>{l(Ks,!1),l(zs,null)},children:(s,v)=>{var _=Qu(),C=_e(_),E=t(C);let P;E.__click=()=>l(xs,"incoming");var M=r(E,2);let W;M.__click=()=>l(xs,"outgoing"),a(C);var L=r(C,2),ne=r(t(L),2),K=t(ne);let ie;K.__click=()=>l(bt,"BTC");var G=r(K,2);let ge;G.__click=()=>l(bt,"EUR");var de=r(G,2);let Ee;de.__click=()=>l(bt,"USD"),a(ne),a(L);var I=r(L,2),O=t(I),Z=r(t(O));{var re=Se=>{var ce=ct("(sats or BTC)");o(Se,ce)},ve=Se=>{var ce=ct();b(()=>h(ce,`(${e(bt)??""})`)),o(Se,ce)};k(Z,Se=>{e(bt)==="BTC"?Se(re):Se(ve,!1)})}a(O);var be=r(O,2);Xe(be);var q=r(be,2);{var X=Se=>{var ce=Ku();o(Se,ce)};k(q,Se=>{e(bt)==="BTC"&&Se(X)})}a(I);var Te=r(I,2),He=t(Te),Je=r(t(He),2);Xe(Je),a(He);var Ra=r(He,2),Ma=r(t(Ra),2);Ie(Ma,21,()=>e(Lr),Ae,(Se,ce)=>{var V=Xu(),N=t(V,!0);a(V);var ee={};b(()=>{h(N,e(ce)),ee!==(ee=e(ce))&&(V.value=(V.__value=e(ce))??"")}),o(Se,V)}),a(Ma),a(Ra),a(Te);var Ca=r(Te,2),qa=t(Ca);{var Ha=Se=>{var ce=Zu(),V=t(ce),N=t(V);a(V);var ee=r(V,2);Xe(ee),a(ce),b(()=>h(N,`Fiat Value (${e(Le)??""}, optional)`)),ea(ee,()=>e(Zs),Fe=>l(Zs,Fe)),o(Se,ce)};k(qa,Se=>{e(bt)==="BTC"&&Se(Ha)})}var dt=r(qa,2),_t=r(t(dt),2);Xe(_t),a(dt),a(Ca);var ca=r(Ca,2),sa=t(ca),Ye=r(t(sa),2);Xe(Ye),a(sa);var Oe=r(sa,2),ga=t(Oe),it=t(ga);a(ga);var gt=r(ga,2);Xe(gt),a(Oe),a(ca);var pa=r(ca,2),Da=t(pa);Da.__click=()=>{l(Ks,!1),l(zs,null)};var Ua=r(Da,2);Ua.__click=Ui,a(pa),b(()=>{P=Q(E,1,"type-btn svelte-1uha8ag",null,P,{active:e(xs)==="incoming"}),W=Q(M,1,"type-btn svelte-1uha8ag",null,W,{active:e(xs)==="outgoing"}),ie=Q(K,1,"type-btn small svelte-1uha8ag",null,ie,{active:e(bt)==="BTC"}),ge=Q(G,1,"type-btn small svelte-1uha8ag",null,ge,{active:e(bt)==="EUR"}),Ee=Q(de,1,"type-btn small svelte-1uha8ag",null,Ee,{active:e(bt)==="USD"}),fe(be,"placeholder",e(bt)==="BTC"?"e.g. 100000 or 0.001":"e.g. 100.00"),h(it,`Fee (${e(Le)??""}, optional)`)}),ea(be,()=>e(ks),Se=>l(ks,Se)),ea(Je,()=>e(Tr),Se=>l(Tr,Se)),xt(Ma,()=>e(Xs),Se=>l(Xs,Se)),ea(_t,()=>e(Cr),Se=>l(Cr,Se)),ea(Ye,()=>e(Qs),Se=>l(Qs,Se)),ea(gt,()=>e(er),Se=>l(er,Se)),o(s,_)},$$slots:{default:!0}});var hn=r(fn,2);Ft(hn,{title:"Duplicate Transaction",get open(){return e(Mr)},onclose:zl,children:(s,v)=>{var _=rd(),C=r(_e(_),2),E=t(C);let P;E.__click=()=>l(Lt,"incoming");var M=r(E,2);let W;M.__click=()=>l(Lt,"outgoing"),a(C);var L=r(C,2),ne=r(t(L),2),K=t(ne);let ie;K.__click=()=>l(_a,"BTC");var G=r(K,2);let ge;G.__click=()=>l(_a,"EUR");var de=r(G,2);let Ee;de.__click=()=>l(_a,"USD"),a(ne),a(L);var I=r(L,2),O=r(t(I),2);Ie(O,21,()=>e(x),Ae,(V,N)=>{var ee=ed(),Fe=t(ee);a(ee);var fa={};b(()=>{h(Fe,`${e(N).name??""} (${e(N).owner_name??""})`),fa!==(fa=e(N).id)&&(ee.value=(ee.__value=e(N).id)??"")}),o(V,ee)}),a(O),a(I);var Z=r(I,2),re=t(Z),ve=r(t(re));{var be=V=>{var N=ct("(sats or BTC)");o(V,N)},q=V=>{var N=ct();b(()=>h(N,`(${e(_a)??""})`)),o(V,N)};k(ve,V=>{e(_a)==="BTC"?V(be):V(q,!1)})}a(re);var X=r(re,2);Xe(X);var Te=r(X,2);{var He=V=>{var N=ad();o(V,N)};k(Te,V=>{e(_a)==="BTC"&&V(He)})}a(Z);var Je=r(Z,2),Ra=t(Je),Ma=r(t(Ra),2);Xe(Ma),a(Ra);var Ca=r(Ra,2),qa=r(t(Ca),2);Ie(qa,21,()=>e(Lr),Ae,(V,N)=>{var ee=td(),Fe=t(ee,!0);a(ee);var fa={};b(()=>{h(Fe,e(N)),fa!==(fa=e(N))&&(ee.value=(ee.__value=e(N))??"")}),o(V,ee)}),a(qa),a(Ca),a(Je);var Ha=r(Je,2),dt=t(Ha);{var _t=V=>{var N=sd(),ee=t(N),Fe=t(ee);a(ee);var fa=r(ee,2);Xe(fa),a(N),b(()=>h(Fe,`Fiat Value (${e(Le)??""}, optional)`)),ea(fa,()=>e(Xt),za=>l(Xt,za)),o(V,N)};k(dt,V=>{e(_a)==="BTC"&&V(_t)})}var ca=r(dt,2),sa=r(t(ca),2);Xe(sa),a(ca),a(Ha);var Ye=r(Ha,2),Oe=t(Ye),ga=r(t(Oe),2);Xe(ga),a(Oe);var it=r(Oe,2),gt=t(it),pa=t(gt);a(gt);var Da=r(gt,2);Xe(Da),a(it),a(Ye);var Ua=r(Ye,2),Se=t(Ua);Se.__click=zl;var ce=r(Se,2);ce.__click=hi,a(Ua),b(()=>{P=Q(E,1,"type-btn svelte-1uha8ag",null,P,{active:e(Lt)==="incoming"}),W=Q(M,1,"type-btn svelte-1uha8ag",null,W,{active:e(Lt)==="outgoing"}),ie=Q(K,1,"type-btn small svelte-1uha8ag",null,ie,{active:e(_a)==="BTC"}),ge=Q(G,1,"type-btn small svelte-1uha8ag",null,ge,{active:e(_a)==="EUR"}),Ee=Q(de,1,"type-btn small svelte-1uha8ag",null,Ee,{active:e(_a)==="USD"}),fe(X,"placeholder",e(_a)==="BTC"?"e.g. 100000 or 0.001":"e.g. 100.00"),h(pa,`Fee (${e(Le)??""}, optional)`)}),xt(O,()=>e(us),V=>l(us,V)),ea(X,()=>e(Ot),V=>l(Ot,V)),ea(Ma,()=>e(_s),V=>l(_s,V)),xt(qa,()=>e(Kt),V=>l(Kt,V)),ea(sa,()=>e(ds),V=>l(ds,V)),ea(ga,()=>e(Zt),V=>l(Zt,V)),ea(Da,()=>e(Qt),V=>l(Qt,V)),o(s,_)},$$slots:{default:!0}});var mn=r(hn,2);{let s=Me(()=>{var v;return`Delete this ${(v=e(Cs))!=null&&v.amount_sats?yt(e(Cs).amount_sats):""} transaction? This cannot be undone.`});Or(mn,{get open(){return e(Sr)},title:"Delete Transaction",get message(){return e(s)},confirmText:"Delete",danger:!0,onconfirm:Oi,onclose:()=>{l(Sr,!1),l(Cs,null)}})}var bn=r(mn,2);Ft(bn,{title:"Change Fiat Currency",get open(){return e(kr)},onclose:jl,children:(s,v)=>{var _=ld(),C=_e(_),E=t(C),P=r(t(E)),M=t(P,!0);a(P);var W=r(P,2),L=t(W,!0);a(W),nt(),a(E);var ne=r(E,2),K=r(t(ne)),ie=t(K,!0);a(K),nt(),a(ne);var G=r(ne,2),ge=t(G);a(G),nt(2),a(C);var de=r(C,2),Ee=t(de);Ee.__click=jl;var I=r(Ee,2);I.__click=()=>rl(e(ws),!1);var O=r(I,2);O.__click=()=>rl(e(ws),!0),a(de),b(Z=>{h(M,e(Le)),h(L,e(ws)),h(ie,Z),h(ge,`Would you like to update all historical transaction values to ${e(ws)??""}?`)},[()=>e(D).filter(Z=>Z.fiat_value!==null).length]),o(s,_)},$$slots:{default:!0}});var yn=r(bn,2);Ft(yn,{title:"Import CSV",get open(){return e(Hr)},onclose:nl,children:(s,v)=>{var _=Pa(),C=_e(_);{var E=M=>{var W=vd(),L=_e(W),ne=t(L),K=r(t(ne),2);Ie(K,21,()=>e(x),Ae,(Z,re)=>{var ve=nd(),be=t(ve,!0);a(ve);var q={};b(()=>{h(be,e(re).name),q!==(q=e(re).id)&&(ve.value=(ve.__value=e(re).id)??"")}),o(Z,ve)}),a(K),a(ne);var ie=r(ne,2),G=t(ie),ge=t(G);ge.__change=Di,nt(4),a(G),a(ie);var de=r(ie,2);{var Ee=Z=>{var re=od();Ie(re,21,()=>e(Mt),Ae,(ve,be)=>{var q=id(),X=t(q,!0);a(q),b(()=>h(X,e(be))),o(ve,q)}),a(re),o(Z,re)};k(de,Z=>{e(Mt).length>0&&Z(Ee)})}a(L);var I=r(L,2),O=t(I);O.__click=nl,a(I),xt(K,()=>e(Us),Z=>l(Us,Z)),o(M,W)},P=M=>{var W=Pa(),L=_e(W);{var ne=ie=>{var G=md(),ge=_e(G),de=t(ge),Ee=t(de),I=r(t(Ee));a(Ee);var O=r(Ee,2),Z=r(t(O));a(O);var re=r(O,2),ve=r(t(re));a(re);var be=r(re,2),q=r(t(be));a(be),a(de);var X=r(de,2);{var Te=Ye=>{var Oe=dd(),ga=r(t(Oe),2);Ie(ga,17,()=>e(ys).slice(0,5),Ae,(pa,Da)=>{var Ua=cd(),Se=t(Ua,!0);a(Ua),b(()=>h(Se,e(Da))),o(pa,Ua)});var it=r(ga,2);{var gt=pa=>{var Da=ud(),Ua=t(Da);a(Da),b(()=>h(Ua,`...and ${e(ys).length-5} more`)),o(pa,Da)};k(it,pa=>{e(ys).length>5&&pa(gt)})}a(Oe),o(Ye,Oe)};k(X,Ye=>{e(ys).length>0&&Ye(Te)})}var He=r(X,2);{var Je=Ye=>{var Oe=pd(),ga=r(t(Oe),2);Ie(ga,17,()=>e(Mt).slice(0,5),Ae,(pa,Da)=>{var Ua=_d(),Se=t(Ua,!0);a(Ua),b(()=>h(Se,e(Da))),o(pa,Ua)});var it=r(ga,2);{var gt=pa=>{var Da=gd(),Ua=t(Da);a(Da),b(()=>h(Ua,`...and ${e(Mt).length-5} more`)),o(pa,Da)};k(it,pa=>{e(Mt).length>5&&pa(gt)})}a(Oe),o(Ye,Oe)};k(He,Ye=>{e(Mt).length>0&&Ye(Je)})}var Ra=r(He,2),Ma=r(t(Ra),2),Ca=t(Ma);Ie(Ca,17,()=>e(Ut).slice(0,10),Ae,(Ye,Oe)=>{var ga=fd(),it=t(ga),gt=t(it,!0);a(it);var pa=r(it,2);let Da;var Ua=t(pa,!0);a(pa);var Se=r(pa,2),ce=t(Se,!0);a(Se);var V=r(Se,2),N=t(V,!0);a(V),a(ga),b((ee,Fe)=>{h(gt,ee),Da=Q(pa,1,"svelte-1uha8ag",null,Da,{positive:e(Oe).amount_sats>=0,negative:e(Oe).amount_sats<0}),h(Ua,Fe),h(ce,e(Oe).category),h(N,e(Oe).note||"—")},[()=>yi(e(Oe).timestamp),()=>yt(e(Oe).amount_sats,!0)]),o(Ye,ga)});var qa=r(Ca,2);{var Ha=Ye=>{var Oe=hd(),ga=t(Oe);a(Oe),b(()=>h(ga,`...and ${e(Ut).length-10} more transactions`)),o(Ye,Oe)};k(qa,Ye=>{e(Ut).length>10&&Ye(Ha)})}a(Ma),a(Ra),a(ge);var dt=r(ge,2),_t=t(dt);_t.__click=()=>{l(Rt,"upload"),l(Rs,null)};var ca=r(_t,2);ca.__click=Ai;var sa=t(ca);a(ca),a(dt),b(Ye=>{var Oe;h(I,` ${e(Gr)??""}`),h(Z,` ${((Oe=e(Rs))==null?void 0:Oe.name)??""}`),h(ve,` ${e(Ut).length??""}`),h(q,` ${Ye??""}`),ca.disabled=e(Ut).length===0,h(sa,`Import ${e(Ut).length??""} Transactions`)},[()=>{var Ye;return(Ye=e(x).find(Oe=>Oe.id===e(Us)))==null?void 0:Ye.name}]),o(ie,G)},K=ie=>{var G=Pa(),ge=_e(G);{var de=I=>{var O=bd();o(I,O)},Ee=I=>{var O=Pa(),Z=_e(O);{var re=ve=>{var be=kd(),q=_e(be),X=t(q),Te=t(X),He=t(Te);a(Te);var Je=r(Te,2),Ra=t(Je);a(Je);var Ma=r(Je,2);{var Ca=ca=>{var sa=yd(),Ye=t(sa);a(sa),b(()=>h(Ye,`✕ Errors: ${e(zt).errors.length??""}`)),o(ca,sa)};k(Ma,ca=>{var sa;(sa=e(zt))!=null&&sa.errors&&e(zt).errors.length>0&&ca(Ca)})}a(X);var qa=r(X,2);{var Ha=ca=>{var sa=xd();Ie(sa,21,()=>e(zt).errors.slice(0,5),Ae,(Ye,Oe)=>{var ga=wd(),it=t(ga,!0);a(ga),b(()=>h(it,e(Oe))),o(Ye,ga)}),a(sa),o(ca,sa)};k(qa,ca=>{var sa;(sa=e(zt))!=null&&sa.errors&&e(zt).errors.length>0&&ca(Ha)})}a(q);var dt=r(q,2),_t=t(dt);_t.__click=nl,a(dt),b(()=>{var ca,sa;h(He,`✓ Imported: ${((ca=e(zt))==null?void 0:ca.imported)??""}`),h(Ra,`⊘ Skipped (duplicates): ${((sa=e(zt))==null?void 0:sa.skipped)??""}`)}),o(ve,be)};k(Z,ve=>{e(Rt)==="done"&&ve(re)},!0)}o(I,O)};k(ge,I=>{e(Rt)==="importing"?I(de):I(Ee,!1)},!0)}o(ie,G)};k(L,ie=>{e(Rt)==="preview"?ie(ne):ie(K,!1)},!0)}o(M,W)};k(C,M=>{e(Rt)==="upload"?M(E):M(P,!1)})}o(s,_)},$$slots:{default:!0}});var wn=r(yn,2);Ft(wn,{title:"Enable Database Encryption",get open(){return e(ka)},onclose:sn,children:(s,v)=>{var _=Pa(),C=_e(_);{var E=M=>{var W=Sd(),L=r(_e(W),2),ne=r(t(L),2);Xe(ne),ne.__input=()=>Yi(e(va));var K=r(ne,2);{var ie=re=>{var ve=Cd(),be=t(ve),q=t(be);let X;a(be);var Te=r(be,2);let He;var Je=t(Te,!0);a(Te),a(ve),b(()=>{X=Q(q,1,"strength-fill svelte-1uha8ag",null,X,{"very-weak":e(Ka).level==="very_weak",weak:e(Ka).level==="weak",fair:e(Ka).level==="fair",strong:e(Ka).level==="strong","very-strong":e(Ka).level==="very_strong"}),Is(q,`width: ${e(Ka).score??""}%`),He=Q(Te,1,"strength-label svelte-1uha8ag",null,He,{"very-weak":e(Ka).level==="very_weak",weak:e(Ka).level==="weak",fair:e(Ka).level==="fair",strong:e(Ka).level==="strong","very-strong":e(Ka).level==="very_strong"}),h(Je,e(Ka).label)}),o(re,ve)};k(K,re=>{e(Ka)&&re(ie)})}a(L);var G=r(L,2),ge=r(t(G),2);Xe(ge);var de=r(ge,2);{var Ee=re=>{var ve=Td();o(re,ve)};k(de,re=>{e(at)&&e(va)!==e(at)&&re(Ee)})}a(G);var I=r(G,2),O=t(I);O.__click=sn;var Z=r(O,2);Z.__click=Gi,a(I),b(()=>Z.disabled=!e(va)||e(va)!==e(at)),ea(ne,()=>e(va),re=>l(va,re)),ea(ge,()=>e(at),re=>l(at,re)),o(M,W)},P=M=>{var W=Pa(),L=_e(W);{var ne=K=>{var ie=Fd(),G=_e(ie),ge=r(t(G),2),de=t(ge);Ie(de,21,()=>e(Na).split(" "),Ae,(q,X,Te)=>{var He=Ed(),Je=t(He);Je.textContent=`${Te+1}.`;var Ra=r(Je,2),Ma=t(Ra,!0);a(Ra),a(He),b(()=>h(Ma,e(X))),o(q,He)}),a(de);var Ee=r(de,2);Ee.__click=Zi,a(ge);var I=r(ge,2),O=t(I),Z=t(O);Xe(Z),nt(2),a(O),a(I),a(G);var re=r(G,2),ve=t(re);ve.__click=()=>l(kt,"passphrase");var be=r(ve,2);be.__click=Ji,a(re),b(()=>be.disabled=!e(At)),Zo(Z,()=>e(At),q=>l(At,q)),o(K,ie)};k(L,K=>{e(kt)==="recovery"&&K(ne)},!0)}o(M,W)};k(C,M=>{e(kt)==="passphrase"?M(E):M(P,!1)})}o(s,_)},$$slots:{default:!0}});var xn=r(wn,2);Ft(xn,{title:"Change Passphrase",get open(){return e(Hs)},onclose:()=>{l(Hs,!1),l(os,""),l(It,""),l(Ht,""),l(ut,null)},children:(s,v)=>{var _=Id(),C=_e(_),E=r(t(C),2);Xe(E),a(C);var P=r(C,2),M=r(t(P),2);Xe(M),M.__input=()=>ji(e(It));var W=r(M,2);{var L=I=>{var O=Dd(),Z=t(O),re=t(Z);let ve;a(Z);var be=r(Z,2);let q;var X=t(be,!0);a(be),a(O),b(()=>{ve=Q(re,1,"strength-fill svelte-1uha8ag",null,ve,{"very-weak":e(ut).level==="very_weak",weak:e(ut).level==="weak",fair:e(ut).level==="fair",strong:e(ut).level==="strong","very-strong":e(ut).level==="very_strong"}),Is(re,`width: ${e(ut).score??""}%`),q=Q(be,1,"strength-label svelte-1uha8ag",null,q,{"very-weak":e(ut).level==="very_weak",weak:e(ut).level==="weak",fair:e(ut).level==="fair",strong:e(ut).level==="strong","very-strong":e(ut).level==="very_strong"}),h(X,e(ut).label)}),o(I,O)};k(W,I=>{e(ut)&&I(L)})}a(P);var ne=r(P,2),K=r(t(ne),2);Xe(K);var ie=r(K,2);{var G=I=>{var O=Ad();o(I,O)};k(ie,I=>{e(Ht)&&e(It)!==e(Ht)&&I(G)})}a(ne);var ge=r(ne,2),de=t(ge);de.__click=()=>{l(Hs,!1),l(os,""),l(It,""),l(Ht,""),l(ut,null)};var Ee=r(de,2);Ee.__click=Ki,a(ge),b(()=>Ee.disabled=!e(os)||!e(It)||e(It)!==e(Ht)),ea(E,()=>e(os),I=>l(os,I)),ea(M,()=>e(It),I=>l(It,I)),ea(K,()=>e(Ht),I=>l(Ht,I)),o(s,_)},$$slots:{default:!0}});var kn=r(xn,2);Ft(kn,{title:"Remove Encryption",get open(){return e(Gs)},onclose:()=>{l(Gs,!1),l(vs,"")},children:(s,v)=>{var _=Md(),C=r(_e(_),2),E=r(t(C),2);Xe(E),a(C);var P=r(C,2),M=t(P);M.__click=()=>{l(Gs,!1),l(vs,"")};var W=r(M,2);W.__click=Xi,a(P),b(()=>W.disabled=!e(vs)),ea(E,()=>e(vs),L=>l(vs,L)),o(s,_)},$$slots:{default:!0}});var no=r(kn,2);Or(no,{get open(){return e(Dr)},title:"Reset All Data",message:"Are you sure you want to delete ALL your data? This includes all wallets, transactions, accounts, and settings. This action cannot be undone.",confirmText:"Yes, Reset Everything",danger:!0,onconfirm:to,onclose:()=>l(Dr,!1)}),o(n,ln),Ls()}hr(["click","keydown","change","input"]);export{zd as component};
